{"version":3,"file":"server.js","mappings":"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","sources":["webpack://the_game/./src/actions/auth.actions.ts","webpack://the_game/./src/actions/forum.actions.ts","webpack://the_game/./src/actions/leaderboard.actions.ts","webpack://the_game/./src/actions/profile.actions.ts","webpack://the_game/./src/actions/theme.actions.ts","webpack://the_game/./src/actions/topic.actions.ts","webpack://the_game/./src/actions/types/auth.types.ts","webpack://the_game/./src/actions/types/forum.types.ts","webpack://the_game/./src/actions/types/leaderboard.types.ts","webpack://the_game/./src/actions/types/profile.types.ts","webpack://the_game/./src/actions/types/theme.types.ts","webpack://the_game/./src/actions/types/topic.types.ts","webpack://the_game/./src/api/Auth/Auth.api.ts","webpack://the_game/./src/api/Auth/index.ts","webpack://the_game/./src/api/Forum/Forum.api.ts","webpack://the_game/./src/api/Leaderboard/Leaderboard.api.ts","webpack://the_game/./src/api/OAuth/OAuth.api.ts","webpack://the_game/./src/api/Profile/Profile.api.ts","webpack://the_game/./src/api/Theme/Theme.api.ts","webpack://the_game/./src/components/AccessRedirectRoute/AccessRedirectRoute.tsx","webpack://the_game/./src/components/AccessRoute/AccessRoute.tsx","webpack://the_game/./src/components/App/App.helpers.tsx","webpack://the_game/./src/components/App/App.view.tsx","webpack://the_game/./src/components/Button/Button.view.tsx","webpack://the_game/./src/components/Container/Container.view.tsx","webpack://the_game/./src/components/ErrorBoundary/ErrorBoundary.view.tsx","webpack://the_game/./src/components/GameModal/GameModal.view.tsx","webpack://the_game/./src/components/Header/Header.helpers.tsx","webpack://the_game/./src/components/Header/Header.view.tsx","webpack://the_game/./src/components/Input/Input.view.tsx","webpack://the_game/./src/components/NavBar/NavBar.view.tsx","webpack://the_game/./src/components/NavBar/Navbar.helpers.tsx","webpack://the_game/./src/components/PageLoader/PageLoader.view.tsx","webpack://the_game/./src/components/PageMeta/PageMeta.view.tsx","webpack://the_game/./src/components/Password/Password.view.tsx","webpack://the_game/./src/components/Router/Router.view.tsx","webpack://the_game/./src/components/Router/Routes/Routes.view.tsx","webpack://the_game/./src/components/Switch/Switch.view.tsx","webpack://the_game/./src/config/apiRoutes.ts","webpack://the_game/./src/config/leaderboard.ts","webpack://the_game/./src/config/routes/routes.ts","webpack://the_game/./src/game/core/animations/animation.ts","webpack://the_game/./src/game/core/animations/attack/attack.ts","webpack://the_game/./src/game/core/animations/move/moveAnimation.ts","webpack://the_game/./src/game/core/animations/sprite/spriteAnimation.ts","webpack://the_game/./src/game/core/camera.ts","webpack://the_game/./src/game/core/eventBus.ts","webpack://the_game/./src/game/core/geometry/geometry.ts","webpack://the_game/./src/game/core/geometry/rectangle/rectangle.ts","webpack://the_game/./src/game/core/object.ts","webpack://the_game/./src/game/core/physics/physics.ts","webpack://the_game/./src/game/core/renderer.ts","webpack://the_game/./src/game/core/scene.ts","webpack://the_game/./src/game/core/utils/box2.ts","webpack://the_game/./src/game/core/utils/color.ts","webpack://the_game/./src/game/core/utils/vector.ts","webpack://the_game/./src/game/world/objects/enemy.ts","webpack://the_game/./src/game/world/objects/ground.ts","webpack://the_game/./src/game/world/objects/player.ts","webpack://the_game/./src/game/world/objects/wall.ts","webpack://the_game/./src/game/world/objects/weapon.ts","webpack://the_game/./src/game/world/ui/health.ts","webpack://the_game/./src/game/world/ui/player.ui.ts","webpack://the_game/./src/game/world/world.config.ts","webpack://the_game/./src/game/world/world.events.ts","webpack://the_game/./src/game/world/world.helpers.ts","webpack://the_game/./src/game/world/world.manager.ts","webpack://the_game/./src/game/world/world.ts","webpack://the_game/./src/helpers/acess.ts","webpack://the_game/./src/helpers/environment.ts","webpack://the_game/./src/hooks/useMountEffect.ts","webpack://the_game/./src/hooks/useSelector.ts","webpack://the_game/./src/hooks/useUnmountEffect.ts","webpack://the_game/./src/pages/About/About.view.tsx","webpack://the_game/./src/pages/Error/Error.helpers.ts","webpack://the_game/./src/pages/Error/Error.view.tsx","webpack://the_game/./src/pages/Forum/Forum.helpers.ts","webpack://the_game/./src/pages/Forum/Forum.view.tsx","webpack://the_game/./src/pages/Game/Game.helpers.ts","webpack://the_game/./src/pages/Game/Game.view.tsx","webpack://the_game/./src/pages/Game/Menu/Menu.view.tsx","webpack://the_game/./src/pages/Leaderboard/LeaderBoard.helpers.ts","webpack://the_game/./src/pages/Leaderboard/LeaderBoard.view.tsx","webpack://the_game/./src/pages/Leaderboard/components/Pagination/Pagination.view.tsx","webpack://the_game/./src/pages/Main/Main.view.tsx","webpack://the_game/./src/pages/Offline/Offline.view.tsx","webpack://the_game/./src/pages/Profile/Profile.helpers.ts","webpack://the_game/./src/pages/Profile/Profile.view.tsx","webpack://the_game/./src/pages/Profile/components/FormControls/FormControls.view.tsx","webpack://the_game/./src/pages/Profile/components/FormFields/FormFields.helpers.tsx","webpack://the_game/./src/pages/Profile/components/FormFields/FormFields.view.tsx","webpack://the_game/./src/pages/SignIn/SignIn.helpers.ts","webpack://the_game/./src/pages/SignIn/SignIn.view.tsx","webpack://the_game/./src/pages/SignIn/YandexSignIn/YandexSignIn.view.tsx","webpack://the_game/./src/pages/SignUp/SignUp.helpers.ts","webpack://the_game/./src/pages/SignUp/SignUp.view.tsx","webpack://the_game/./src/pages/Topic/Comment/Comment.view.tsx","webpack://the_game/./src/pages/Topic/CommentInput/CommentInput.view.tsx","webpack://the_game/./src/pages/Topic/Topic.helpers.ts","webpack://the_game/./src/pages/Topic/Topic.view.tsx","webpack://the_game/./src/pages/TopicEdit/TopicEdit.helpers.ts","webpack://the_game/./src/pages/TopicEdit/TopicEdit.view.tsx","webpack://the_game/./src/reducers/auth.reducer.ts","webpack://the_game/./src/reducers/forum.reducer.ts","webpack://the_game/./src/reducers/leaderboard.reducer.ts","webpack://the_game/./src/reducers/profile.reducer.ts","webpack://the_game/./src/reducers/theme.reducer.ts","webpack://the_game/./src/reducers/topic.reducer.ts","webpack://the_game/./src/server/controllers/forum/topics.ts","webpack://the_game/./src/server/controllers/index.ts","webpack://the_game/./src/server/controllers/themes/themes.ts","webpack://the_game/./src/server/db/forum/actions/topics.ts","webpack://the_game/./src/server/db/forum/models/topic.ts","webpack://the_game/./src/server/db/init.ts","webpack://the_game/./src/server/db/themes/actions/themes.ts","webpack://the_game/./src/server/db/themes/models/themes.ts","webpack://the_game/./src/server/middlewares/apiProxy.ts","webpack://the_game/./src/server/middlewares/auth.ts","webpack://the_game/./src/server/middlewares/index.ts","webpack://the_game/./src/server/middlewares/limiter.ts","webpack://the_game/./src/server/middlewares/redirect.ts","webpack://the_game/./src/server/middlewares/serverRender.tsx","webpack://the_game/./src/server/router/apiRoutes.ts","webpack://the_game/./src/server/router/appRoutes.ts","webpack://the_game/./src/server/router/index.ts","webpack://the_game/./src/server/router/yandexApiRoutes.ts","webpack://the_game/./src/server/server.ts","webpack://the_game/./src/server/utils/httpStatuses.ts","webpack://the_game/./src/server/utils/makeHTMLPage.ts","webpack://the_game/./src/server/utils/safeDecorator.ts","webpack://the_game/./src/services/API/API.service.ts","webpack://the_game/./src/services/API/index.ts","webpack://the_game/./src/store/store.ts","webpack://the_game/./node_modules/antd/dist/antd.css","webpack://the_game/./src/components/App/App.module.scss","webpack://the_game/./src/components/Container/Container.module.scss","webpack://the_game/./src/components/GameModal/GameModal.module.scss","webpack://the_game/./src/components/Header/Header.module.scss","webpack://the_game/./src/components/NavBar/NavBar.module.scss","webpack://the_game/./src/components/PageLoader/PageLoader.module.scss","webpack://the_game/./src/pages/Error/Error.module.scss","webpack://the_game/./src/pages/Forum/Forum.module.scss","webpack://the_game/./src/pages/Game/Game.module.scss","webpack://the_game/./src/pages/Game/Menu/Main.module.scss","webpack://the_game/./src/pages/Leaderboard/LeaderBoard.module.scss","webpack://the_game/./src/pages/Leaderboard/components/Pagination/Pagination.module.scss","webpack://the_game/./src/pages/Main/Main.module.scss","webpack://the_game/./src/pages/Offline/Offline.module.scss","webpack://the_game/./src/pages/Profile/Profile.module.scss","webpack://the_game/./src/pages/Profile/components/FormControls/FormControls.module.scss","webpack://the_game/./src/pages/SignIn/SignIn.module.scss","webpack://the_game/./src/pages/SignIn/YandexSignIn/YandexSignIn.module.scss","webpack://the_game/./src/pages/SignUp/SignUp.module.scss","webpack://the_game/./src/pages/Topic/Comment/Comment.module.scss","webpack://the_game/./src/pages/Topic/CommentInput/CommentInput.module.scss","webpack://the_game/./src/pages/Topic/Topic.module.scss","webpack://the_game/./src/pages/TopicEdit/TopicEdit.module.scss","webpack://the_game/external commonjs \"@ant-design/icons\"","webpack://the_game/external commonjs \"antd\"","webpack://the_game/external commonjs \"antd/lib/form/Form\"","webpack://the_game/external commonjs \"body-parser\"","webpack://the_game/external commonjs \"cookie-parser\"","webpack://the_game/external commonjs \"dotenv/config\"","webpack://the_game/external commonjs \"express\"","webpack://the_game/external commonjs \"express-rate-limit\"","webpack://the_game/external commonjs \"http-proxy-middleware\"","webpack://the_game/external commonjs \"react\"","webpack://the_game/external commonjs \"react-dom/server\"","webpack://the_game/external commonjs \"react-helmet\"","webpack://the_game/external commonjs \"react-redux\"","webpack://the_game/external commonjs \"react-router-dom\"","webpack://the_game/external commonjs \"redux\"","webpack://the_game/external commonjs \"redux-thunk\"","webpack://the_game/external commonjs \"sequelize\"","webpack://the_game/external commonjs \"sequelize-typescript\"","webpack://the_game/webpack/bootstrap","webpack://the_game/webpack/runtime/compat get default export","webpack://the_game/webpack/runtime/define property getters","webpack://the_game/webpack/runtime/hasOwnProperty shorthand","webpack://the_game/webpack/runtime/make namespace object","webpack://the_game/./src/server/index.ts"],"sourcesContent":["import { AnyAction } from \"redux\";\nimport { ThunkAction } from \"redux-thunk\";\n\nimport { History } from \"history\";\nimport api, { SignInData } from \"@/api/Auth\";\nimport { routes } from \"@/config/routes/routes\";\nimport { setUserIdCookie, setSigned, setSignedOAuth } from \"@/helpers/acess\";\n\nimport {\n    LOADING, SIGN_IN, SIGN_OUT, SIGN_IN_OAUTH,\n} from \"./types/auth.types\";\n\ntype SignedIn = {\n    type: typeof SIGN_IN;\n};\n\ntype SignedInOAuth = {\n    type: typeof SIGN_IN_OAUTH;\n};\n\ntype SignedOut = {\n    type: typeof SIGN_OUT;\n};\n\ntype Loading = {\n    type: typeof LOADING;\n    payload: { isLoading: boolean };\n};\n\nexport enum AuthStages {\n    INIT = \"init\",\n    LOADING = \"loading\",\n    DONE = \"done\",\n}\n\nconst loading = (isLoading: boolean): Loading => ({\n    type: LOADING,\n    payload: { isLoading },\n});\n\nexport const signInSuccess = (): SignedIn => ({ type: SIGN_IN });\n\nexport const signInOAuthSuccess = (): SignedInOAuth => ({\n    type: SIGN_IN_OAUTH,\n});\n\nexport const signOutSuccess = (): SignedOut => ({ type: SIGN_OUT });\n\nexport const signIn = (\n    data: SignInData,\n    history: History,\n): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(loading(true));\n    try {\n        const response = await api.signIn(data);\n        if (response) {\n            dispatch(signInSuccess());\n            setSigned(true);\n            history.push(routes.main.path);\n        } else {\n            dispatch(loading(false));\n        }\n    } catch (error) {\n        dispatch(loading(false));\n    }\n};\n\n// eslint-disable-next-line max-len\nexport const signInOAuth = (history: History): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(signInOAuthSuccess());\n    setSignedOAuth(true);\n    history.push(routes.main.path);\n};\n\n// eslint-disable-next-line max-len\nexport const signOut = (history: History): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(loading(true));\n    setSigned(false);\n    setSignedOAuth(false);\n    setUserIdCookie(0);\n    history.push(routes.signIn.path);\n    try {\n        const response = await api.logOut();\n        if (response) {\n            dispatch(signOutSuccess());\n        } else {\n            dispatch(loading(false));\n        }\n    } catch (error) {\n        dispatch(loading(false));\n    }\n};\n\nexport type AuthAction = SignedOut | SignedIn | Loading | SignedInOAuth;\n","import { ForumState } from \"reducers/forum.reducer\";\nimport { AnyAction } from \"redux\";\nimport { ThunkAction } from \"redux-thunk\";\nimport { FORUM_LOAD, FORUM_SET_LOADING } from \"./types/forum.types\";\nimport forumApi from \"../api/Forum\";\n\nexport type ForumAction = GetForumTopics | SetLoading;\n\ntype GetForumTopics = {\n    type: typeof FORUM_LOAD,\n    payload: Pick<ForumState, \"data\">\n};\nconst getTopics = (data: any[]): GetForumTopics => ({\n    type: FORUM_LOAD,\n    payload: { data },\n});\n\ntype SetLoading = {\n    type: typeof FORUM_SET_LOADING,\n    payload: Pick<ForumState, \"isLoading\">\n};\nconst setLoading = (isLoading: boolean): SetLoading => ({\n    type: FORUM_SET_LOADING,\n    payload: { isLoading },\n});\n\nexport const loadForumTopics = ():\nThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(setLoading(true));\n    try {\n        const data = await forumApi.getTopics();\n        if (data) {\n            dispatch(getTopics(data));\n        }\n        dispatch(setLoading(false));\n    } catch (error) {\n        dispatch(setLoading(false));\n    }\n};\n","import { LeaderBoardData } from \"config/leaderboard\";\nimport { LeaderBoardState } from \"reducers/leaderboard.reducer\";\nimport { AnyAction } from \"redux\";\nimport { ThunkAction } from \"redux-thunk\";\nimport { LOAD, SET_LOADING } from \"./types/leaderboard.types\";\nimport LeaderboardApi from \"../api/Leaderboard\";\n\nexport type LeaderBoardAction = GetLeaderBoard | SetLoading;\n\ntype GetLeaderBoard = {\n    type: typeof LOAD,\n    payload: Pick<LeaderBoardState, \"data\">\n};\nconst getLeaderBoard = (data: LeaderBoardData): GetLeaderBoard => ({\n    type: LOAD,\n    payload: { data },\n});\n\ntype SetLoading = {\n    type: typeof SET_LOADING,\n    payload: Pick<LeaderBoardState, \"isLoading\">\n};\nconst setLoading = (isLoading: boolean): SetLoading => ({\n    type: SET_LOADING,\n    payload: { isLoading },\n});\n\nexport const loadLeaderBoard = (cursor: number):\nThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(setLoading(true));\n    try {\n        const data = await LeaderboardApi.getLeaderBoard(cursor);\n        if (data) {\n            dispatch(getLeaderBoard(data));\n        }\n        dispatch(setLoading(false));\n    } catch (error) {\n        dispatch(setLoading(false));\n    }\n};\n","import { AnyAction } from \"redux\";\nimport { ThunkAction } from \"redux-thunk\";\n\nimport api, { SignUpData, UserInfo } from \"@/api/Auth/Auth.api\";\nimport profileApi, { PasswordData } from \"@/api/Profile/Profile.api\";\n\nimport {\n    GET_PROFILE,\n    PROFILE_LOADING,\n    SET_PROFILE,\n    SET_PASSWORD,\n} from \"./types/profile.types\";\nimport { setUserIdCookie } from \"@/helpers/acess\";\n\ntype ProfileFetched = {\n    type: typeof GET_PROFILE;\n    payload: { data: UserInfo };\n};\n\ntype ProfileUploaded = {\n    type: typeof SET_PROFILE;\n    payload: { data: UserInfo };\n};\n\ntype ProfileLoading = {\n    type: typeof PROFILE_LOADING;\n    payload: { isLoading: boolean };\n};\n\ntype PasswordUpdated = {\n    type: typeof SET_PASSWORD;\n};\n\nexport enum ProfileStages {\n    INIT = \"init\",\n    LOADING = \"loading\",\n    DONE = \"done\",\n}\n\nconst loading = (isLoading: boolean): ProfileLoading => ({\n    type: PROFILE_LOADING,\n    payload: { isLoading },\n});\n\nexport const profileFetchSuccess = (data: UserInfo): ProfileFetched => ({\n    type: GET_PROFILE,\n    payload: { data },\n});\n\nconst profileUploadSuccess = (data: UserInfo): ProfileFetched => ({\n    type: GET_PROFILE,\n    payload: { data },\n});\n\nconst passwordUpdateSuccess = () => ({\n    type: SET_PASSWORD,\n});\n\n// eslint-disable-next-line max-len\nexport const getProfile = (): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(loading(true));\n    try {\n        const response = await api.getUserInfo();\n        if (response) {\n            dispatch(profileFetchSuccess(response));\n            setUserIdCookie(response.id);\n        } else {\n            dispatch(loading(false));\n        }\n    } catch (error) {\n        dispatch(loading(false));\n    }\n};\n\nexport const setProfile = (\n    data: Omit<SignUpData, \"password\">,\n): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(loading(true));\n    try {\n        const response = await profileApi.setProfile(data);\n        if (response) {\n            dispatch(profileUploadSuccess(response));\n        } else {\n            dispatch(loading(false));\n        }\n    } catch (error) {\n        dispatch(loading(false));\n    }\n};\n\n// eslint-disable-next-line max-len\nexport const setPassword = (data: PasswordData): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(loading(true));\n    try {\n        const response = await profileApi.setPassword(data);\n        if (response) {\n            dispatch(passwordUpdateSuccess());\n        } else {\n            dispatch(loading(false));\n        }\n    } catch (error) {\n        dispatch(loading(false));\n    }\n};\n\nexport type ProfileAction =\n    | ProfileFetched\n    | ProfileUploaded\n    | ProfileLoading\n    | PasswordUpdated;\n","import { AnyAction } from \"redux\";\nimport { ThunkAction } from \"redux-thunk\";\nimport { getUserIdCookie } from \"@/helpers/acess\";\n\nimport api, { Theme, ThemeData } from \"@/api/Theme/Theme.api\";\n\nimport {\n    SET_THEME,\n} from \"./types/theme.types\";\n\ntype ThemeRequest = {\n    type: typeof SET_THEME;\n    payload: Theme | null;\n};\n\nconst LIGHT_THEME = \"light\";\nconst DARK_THEME = \"dark\";\n\n// Обновляем тему в DOM\nconst updateDOMTheme = (theme: string) => {\n    if (theme === DARK_THEME) {\n        document.body.classList.remove(LIGHT_THEME);\n    } else if (theme === LIGHT_THEME) {\n        document.body.classList.remove(DARK_THEME);\n    }\n\n    document.body.classList.add(theme);\n};\n\nexport const themeRequest = (data: Theme | null): ThemeRequest => ({\n    type: SET_THEME,\n    payload: data,\n});\n\n// eslint-disable-next-line max-len\nexport const getTheme = (): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    const id = getUserIdCookie();\n    const themeData: ThemeData | null = await api.getTheme(id);\n    const theme = themeData?.theme || LIGHT_THEME;\n    dispatch(themeRequest(theme));\n    //\n    updateDOMTheme(theme);\n};\n\n// eslint-disable-next-line max-len\nexport const updateTheme = (data: Theme): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    const id = getUserIdCookie();\n    const themeData: ThemeData | null = await api.updateTheme(id, data);\n    const theme = themeData?.theme || LIGHT_THEME;\n    dispatch(themeRequest(theme));\n    //\n    updateDOMTheme(theme);\n};\n\n// eslint-disable-next-line max-len\nexport const createTheme = (data: Theme): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    const userId = getUserIdCookie();\n    const themeData: ThemeData | null = await api.createTheme({\n        theme: data,\n        user_id: userId,\n    });\n    const theme = themeData?.theme || LIGHT_THEME;\n    dispatch(themeRequest(theme));\n    //\n    if (!themeData) return;\n    //\n    updateDOMTheme(theme);\n};\n\nexport type ThemeAction =\n    | ThemeRequest;\n","import { ForumState } from \"reducers/forum.reducer\";\nimport { AnyAction } from \"redux\";\nimport { ThunkAction } from \"redux-thunk\";\nimport { History } from \"history\";\n\nimport { routes } from \"@/config/routes/routes\";\nimport { TopicEditData } from \"@/reducers/topic.reducer\";\n\nimport { TOPIC_LOAD, TOPIC_SET_LOADING } from \"./types/topic.types\";\nimport api from \"../api/Forum\";\n\nexport type TopicAction = GetTopic | SetLoading;\n\ntype GetTopic = {\n    type: typeof TOPIC_LOAD,\n    payload: Pick<ForumState, \"data\">\n};\n\nconst getTopic = (data: any): GetTopic => ({\n    type: TOPIC_LOAD,\n    payload: { data },\n});\n\ntype SetLoading = {\n    type: typeof TOPIC_SET_LOADING,\n    payload: Pick<ForumState, \"isLoading\">\n};\n\nconst setLoading = (isLoading: boolean): SetLoading => ({\n    type: TOPIC_SET_LOADING,\n    payload: { isLoading },\n});\n\nexport const loadTopic = (id: number):\nThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(setLoading(true));\n    try {\n        const data = await api.getTopic(id);\n        if (data) {\n            dispatch(getTopic(data));\n        }\n        dispatch(setLoading(false));\n    } catch (error) {\n        dispatch(setLoading(false));\n    }\n};\n\nexport const createTopic = (\n    data: TopicEditData,\n    history: History,\n): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(setLoading(true));\n    try {\n        const response = await api.createTopic(data);\n        if (response) {\n            history.push(routes.forum.path);\n        } else {\n            dispatch(setLoading(false));\n        }\n    } catch (error) {\n        dispatch(setLoading(false));\n    }\n};\n\nexport const updateTopic = (\n    id: number,\n    data: TopicEditData,\n): ThunkAction<void, unknown, unknown, AnyAction> => async (dispatch, _state) => {\n    dispatch(setLoading(true));\n    try {\n        const response = await api.updateTopic(id, data);\n        if (response) {\n            // dispatch(signInSuccess());\n            // todo\n        } else {\n            dispatch(setLoading(false));\n        }\n    } catch (error) {\n        dispatch(setLoading(false));\n    }\n};\n","export const SIGN_IN = \"SIGN_IN\";\nexport const SIGN_IN_OAUTH = \"SIGN_IN_OAUTH\";\nexport const SIGN_OUT = \"SIGN_OUT\";\nexport const LOADING = \"LOADING\";\n","export const FORUM_LOAD = \"LOAD_FORUM\";\nexport const FORUM_SET_LOADING = \"SET_LOADING_FORUM\";\n","export const LOAD = \"LOAD_LEADERBOARD\";\nexport const SET_LOADING = \"SET_LOADING_LEADERBOARD\";\n","export const GET_PROFILE = \"GET_PROFILE\";\nexport const SET_PROFILE = \"SET_PROFILE\";\nexport const SET_PASSWORD = \"SET_PASSWORD\";\nexport const PROFILE_LOADING = \"PROFILE_LOADING\";\n","export const SET_THEME = \"SET_THEME\";\n","export const TOPIC_LOAD = \"TOPIC_LOAD\";\nexport const TOPIC_SET_LOADING = \"TOPIC_SET_LOADING\";\n","import { notification } from \"antd\";\n\nimport APIService from \"@/services/API\";\nimport { Method } from \"@/services/API/API.service\";\n\nexport interface SignUpData {\n    second_name: string;\n    first_name: string;\n    email: string;\n    phone: string;\n    login: string;\n    password: string;\n}\n\nexport interface SignInData {\n    login: string;\n    password: string;\n}\n\nexport interface UserInfo extends SignUpData {\n    id: number,\n    avatar: string\n}\n\nconst root = \"auth\";\n\ntype Request = \"signIn\" | \"signOut\" | undefined;\n\nclass AuthApi {\n    isSuccessfulRequest(response: Response, type: Request = undefined) {\n        let message = \"Регистрация прошла успешно\";\n        let errorMessage = \"Отправленные данные не корректны\";\n        switch (response.status) {\n            case 200:\n                if (type) {\n                    message = type === \"signIn\"\n                        ? \"Выполнен вход в приложение\" : \"Выполнен выход из приложения\";\n                }\n                notification.success({ message });\n                return true;\n            case 400:\n                if (type === \"signIn\") {\n                    errorMessage = \"Пользователь уже авторизован в системе\";\n                }\n                notification.error({ message: errorMessage });\n                return false;\n            case 401:\n                notification.error({ message: \"Неверный логин или пароль\" });\n                return false;\n            case 500:\n                notification.error({ message: \"Произошла неизвестная ошибка\" });\n                return false;\n            default:\n                return false;\n        }\n    }\n\n    public async signUp(data: SignUpData): Promise<string | null> {\n        const response = await APIService.request(Method.POST, `${root}/signup`, data);\n        if (response) {\n            const success = this.isSuccessfulRequest(response);\n            if (success) {\n                const result = await response.json();\n                return result.id ?? null;\n            }\n        }\n        return null;\n    }\n\n    public async signIn(data: SignInData): Promise<boolean> {\n        const response = await APIService.request(Method.POST, `${root}/signin`, data);\n        if (response) {\n            return this.isSuccessfulRequest(response, \"signIn\");\n        }\n        return false;\n    }\n\n    public async logOut(): Promise<boolean> {\n        const response = await APIService.request(Method.POST, `${root}/logout`);\n        if (response) {\n            return this.isSuccessfulRequest(response, \"signOut\");\n        }\n        return false;\n    }\n\n    public async getUserInfo(): Promise<UserInfo | null> {\n        const response = await APIService.request(Method.GET, `${root}/user`);\n        if (response.status === 200) {\n            const result = await response.json();\n            return result ?? null;\n        }\n        return null;\n    }\n}\n\nexport default new AuthApi();\n","export * from \"./Auth.api\";\nexport { default } from \"./Auth.api\";\n","import { notification } from \"antd\";\nimport { Method, LocalAPIService } from \"@/services/API/API.service\";\nimport { TopicEditData } from \"@/reducers/topic.reducer\";\n\ntype ForumData = {};\n\nconst root = \"topics\";\n\nclass ForumApi {\n    isSuccessfulRequest(response: Response) {\n        const errorMessage = \"Отправленные данные не корректны\";\n        switch (response.status) {\n            case 200:\n            case 201:\n                return true;\n            case 400:\n                notification.error({ message: errorMessage });\n                return false;\n            case 401:\n                notification.error({ message: \"Ошибка авторизации\" });\n                return false;\n            case 500:\n                notification.error({ message: \"Произошла неизвестная ошибка\" });\n                return false;\n            default:\n                return false;\n        }\n    }\n\n    public async getTopics(): Promise<ForumData[] | []> {\n        const response = await LocalAPIService.request(Method.GET, root);\n        if (response) {\n            const success = this.isSuccessfulRequest(response);\n            if (success) {\n                const result = await response.json();\n                return result ?? [];\n            }\n        }\n        return [];\n    }\n\n    public async getTopic(id: number): Promise<ForumData | null> {\n        const response = await LocalAPIService.request(Method.GET, `${root}/${id}`);\n        if (response) {\n            const success = this.isSuccessfulRequest(response);\n            if (success) {\n                const result = await response.json();\n                return result ?? null;\n            }\n        }\n        return null;\n    }\n\n    public async createTopic(data: TopicEditData): Promise<boolean> {\n        const response = await LocalAPIService.request(Method.POST, root, data);\n        if (response) {\n            const success = this.isSuccessfulRequest(response);\n            if (success) {\n                const result = await response.json();\n                return result;\n            }\n        }\n        return false;\n    }\n\n    public async updateTopic(id: number, data: TopicEditData): Promise<TopicEditData | null> {\n        const response = await LocalAPIService.request(Method.PUT, `${root}/${id}`, data);\n        if (response) {\n            const success = this.isSuccessfulRequest(response);\n            if (success) {\n                const result = await response.json();\n                return result ?? null;\n            }\n        }\n        return null;\n    }\n}\n\nexport default new ForumApi();\n","import { notification } from \"antd\";\n\nimport APIService from \"@/services/API\";\nimport { Method } from \"@/services/API/API.service\";\nimport {\n    LeaderBoardData,\n    LeaderBoardGetRequest,\n    LeaderBoardRecord,\n    LeaderBoardRecordRequest,\n    RECORDS_PER_PAGE,\n    TEAM_SCORE,\n} from \"@/config/leaderboard\";\n\nconst root = \"leaderboard\";\n\nclass LeaderBoardApi {\n    public async getLeaderBoard(cursor: number): Promise<LeaderBoardData | null> {\n        const body: LeaderBoardGetRequest = {\n            ratingFieldName: TEAM_SCORE,\n            cursor,\n            limit: RECORDS_PER_PAGE,\n        };\n        const response = await APIService.request(Method.POST, `${root}/all`, body);\n        if (response.ok) {\n            const result = await response.json();\n            return result ?? null;\n        }\n        if (response.status >= 400 && response.status < 500) {\n            // notification.success({ message: \"\" });\n        }\n        if (response.status >= 500) {\n            notification.error({ message: \"Не удалось получить данные лидерборда\" });\n        }\n        return null;\n    }\n\n    public async createLeaderBoardRecord(data: LeaderBoardRecord): Promise<boolean | null> {\n        const body: LeaderBoardRecordRequest = {\n            data,\n            ratingFieldName: TEAM_SCORE,\n            teamName: \"southpark\",\n        };\n        const response = await APIService.request(Method.POST, `${root}`, body);\n        if (response.ok) {\n            notification.success({ message: \"Рекорд сохранен\" });\n            return true;\n        }\n        if (response.status >= 400 && response.status < 500) {\n            notification.error({ message: \"Не удалось сохранить рекорд\" });\n        }\n        if (response.status >= 500) {\n            notification.error({ message: \"Не удалось сохранить рекорд\" });\n        }\n        return null;\n    }\n}\n\nexport default new LeaderBoardApi();\n","import { notification } from \"antd\";\n\nimport APIService from \"@/services/API\";\nimport { Method } from \"@/services/API/API.service\";\nimport { apiRoutes } from \"@/config/apiRoutes\";\n\nconst { serviceId, signIn, redirectURI } = apiRoutes.oauth;\n\nclass OAuthApi {\n    isSuccessfulRequest(response: Response, isSignIn?: boolean) {\n        const errorMessage = \"Отправленные данные не корректны\";\n        switch (response.status) {\n            case 200:\n                if (isSignIn) {\n                    notification.success({ message: \"Вход выполнен успешно\" });\n                }\n                return true;\n            case 400:\n                notification.error({ message: errorMessage });\n                return false;\n            case 401:\n                notification.error({ message: \"Ошибка доступа\" });\n                return false;\n            case 500:\n                notification.error({ message: \"Произошла неизвестная ошибка\" });\n                return false;\n            default:\n                return false;\n        }\n    }\n\n    public async getServiceId(redirectURI: string): Promise<string | null> {\n        const response = await APIService.request(Method.GET, serviceId, redirectURI);\n        if (response) {\n            const success = this.isSuccessfulRequest(response);\n            if (success) {\n                const result = await response.json();\n                return result.service_id ?? null;\n            }\n        }\n        return null;\n    }\n\n    public async signUpWithYandex(code: string): Promise<boolean> {\n        const response = await APIService.request(Method.POST, signIn, {\n            code,\n            redirect_uri: redirectURI,\n        });\n        if (response) {\n            return this.isSuccessfulRequest(response, true);\n        }\n        return false;\n    }\n}\n\nexport default new OAuthApi();\n","import { notification } from \"antd\";\n\nimport APIService from \"@/services/API\";\nimport { Method } from \"@/services/API/API.service\";\nimport { SignUpData, UserInfo } from \"@/api/Auth\";\n\nconst root = \"user\";\n\nexport interface PasswordData {\n    oldPassword: string,\n    newPassword: string\n}\n\nenum ProfileDataType {\n    Common = \"Common\",\n    Password = \"Password\",\n}\n\ntype DisplayName = {\n    display_name: \"\"\n};\n\nclass ProfileApi {\n    isSuccessfulRequest(response: Response, dataType?: ProfileDataType) {\n        const errorMessage = \"Отправленные данные не корректны\";\n        let message = \"Данные успешно изменены\";\n        if (dataType) {\n            message = dataType === ProfileDataType.Common ? \"Данные профиля успешно изменены\"\n                : \"Пароль успешно изменен\";\n        }\n        switch (response.status) {\n            case 200:\n                notification.success({ message });\n                return true;\n            case 400:\n                notification.error({ message: errorMessage });\n                return false;\n            case 401:\n                notification.error({ message: \"Ошибка авторизации\" });\n                return false;\n            case 500:\n                notification.error({ message: \"Произошла неизвестная ошибка\" });\n                return false;\n            default:\n                return false;\n        }\n    }\n\n    public async setProfile(data: Omit<SignUpData, \"password\">): Promise<UserInfo | null> {\n        const requestData: Omit<SignUpData, \"password\"> & DisplayName = {\n            ...data,\n            display_name: \"\",\n        };\n        const response = await APIService.request(Method.PUT, `${root}/profile`, requestData);\n        if (response) {\n            const success = this.isSuccessfulRequest(response, ProfileDataType.Common);\n            if (success) {\n                const result = await response.json();\n                return result ?? null;\n            }\n        }\n        return null;\n    }\n\n    public async setPassword(data: PasswordData): Promise<boolean> {\n        const response = await APIService.request(Method.PUT, `${root}/password`, data);\n        if (response) {\n            return this.isSuccessfulRequest(response, ProfileDataType.Password);\n        }\n        return false;\n    }\n\n    // todo\n    public async setAvatar(data: any): Promise<UserInfo | null> {\n        const response = await APIService.request(Method.PUT, `${root}/avatar`, data);\n        if (response) {\n            const success = this.isSuccessfulRequest(response);\n            if (success) {\n                const result = await response.json();\n                return result ?? null;\n            }\n        }\n        return null;\n    }\n}\n\nexport default new ProfileApi();\n","import { Method, LocalAPIService } from \"@/services/API/API.service\";\n\nexport type Theme = \"light\" | \"dark\" | null;\nexport type ThemeData = {\n    theme: Theme;\n    user_id: string;\n    id?: number\n};\n\nconst root = \"themes\";\n\nclass ThemeApi {\n    public async getTheme(id: string): Promise<ThemeData | null> {\n        const response = await LocalAPIService.request(Method.GET, `${root}/${id}`);\n\n        if (response.status === 200) {\n            const result = await response.json();\n            return result ?? null;\n        }\n\n        return null;\n    }\n\n    public async updateTheme(id: string, data: Theme): Promise<ThemeData | null> {\n        // eslint-disable-next-line max-len\n        const response = await LocalAPIService.request(Method.PUT, `${root}/${id}`, { theme: data });\n        if (response.status === 200) {\n            const result = await response.json();\n            return result ?? null;\n        }\n        return null;\n    }\n\n    public async createTheme(data: ThemeData): Promise<ThemeData | null> {\n        const response = await LocalAPIService.request(Method.POST, root, data);\n        if (response.status === 200) {\n            const result = await response.json();\n            return result ?? null;\n        }\n        return null;\n    }\n}\n\nexport default new ThemeApi();\n","import React, { FC } from \"react\";\nimport { Route, RouteProps, Redirect } from \"react-router-dom\";\nimport { useSelector } from \"@/hooks/useSelector\";\n\nimport { checkAccess } from \"@/helpers/acess\";\nimport { routes } from \"@/config/routes/routes\";\n\nconst AccessRoute: FC<RouteProps> = ({ component, ...props }) => {\n    const Component = component as\n        | React.ComponentClass\n        | React.FunctionComponent;\n    const isSignedInCookie = checkAccess();\n    const isSignedIn = useSelector((state) => state.auth.isSignedIn);\n    const isSignedInOAuth = useSelector((state) => state.auth.isSignedInOAuth);\n\n    const isSignedInAll = isSignedInCookie || isSignedIn || isSignedInOAuth;\n\n    return (\n        <Route\n            {...props}\n            render={() => (!isSignedInAll ? (\n                <Component />\n            ) : (\n                <Redirect to={routes.main.path} />\n            ))\n            }\n        />\n    );\n};\n\nexport default AccessRoute;\n","import React, { FC } from \"react\";\nimport { Route, RouteProps } from \"react-router-dom\";\nimport { useSelector } from \"@/hooks/useSelector\";\n\nimport { checkAccess } from \"@/helpers/acess\";\nimport Error from \"@/pages/Error\";\n\nconst AccessRoute: FC<RouteProps> = ({ component, ...props }) => {\n    const Component = component as\n        | React.ComponentClass\n        | React.FunctionComponent;\n    const isSignedInCookie = checkAccess();\n    const isSignedIn = useSelector((state) => state.auth.isSignedIn);\n    const isSignedInOAuth = useSelector((state) => state.auth.isSignedInOAuth);\n\n    const isSignedInAll = isSignedInCookie || isSignedIn || isSignedInOAuth;\n\n    return (\n        <Route\n            {...props}\n            render={() => (isSignedInAll ? <Component /> : <Error status=\"403\" />)\n            }\n        />\n    );\n};\n\nexport default AccessRoute;\n","import React, {\n    FC, useState, useCallback, useEffect,\n} from \"react\";\nimport \"antd/dist/antd.css\";\n\nimport { Typography, Button } from \"antd\";\n\nimport styles from \"./App.module.scss\";\n\nimport { isServer } from \"@/helpers/environment\";\n\nconst { Title } = Typography;\n\ninterface Props {\n    onClose: Function;\n}\n\nexport const ModalChild: FC<Props> = ({ onClose }) => (\n    <>\n        <Title className={styles.title} level={2}>\n            Нет интернет соединения\n        </Title>\n\n        <Button type=\"primary\" onClick={() => onClose()}>\n            Закрыть\n        </Button>\n    </>\n);\n\nconst sw: unknown | null = !isServer ? navigator?.serviceWorker : null;\n\nexport const useServiceWorkers = () => {\n    const [isActive, setActive] = useState(false);\n\n    const onClose = useCallback(() => {\n        setActive(false);\n    }, []);\n\n    useEffect(() => {\n        function startServiceWorker() {\n            if (sw) {\n                window.addEventListener(\n                    \"load\",\n                    () => {\n                        (sw as ServiceWorkerContainer)\n                            .register(\"./sw.js\")\n                            .then((registration) => {\n                                console.log(\n                                    \"ServiceWorker registration successful \",\n                                    registration.scope,\n                                );\n                            })\n                            .then(() => {\n                                (sw as ServiceWorkerContainer).addEventListener(\n                                    \"message\",\n                                    ({ data }) => {\n                                        if (data === \"FORBIDDEN_METHOD\") {\n                                            setActive(true);\n                                        }\n                                    },\n                                );\n                            })\n                            .catch((error: string) => {\n                                console.log(\n                                    \"ServiceWorker registration failed: \",\n                                    error,\n                                );\n                            });\n                    },\n                    { once: true },\n                );\n            }\n        }\n\n        startServiceWorker();\n    }, []);\n\n    return {\n        isActive,\n        onClose,\n    };\n};\n","import React, { useEffect } from \"react\";\nimport \"antd/dist/antd.css\";\n\nimport { useDispatch } from \"react-redux\";\nimport ErrorBoundary from \"@/components/ErrorBoundary\";\nimport GameModal from \"@/components/GameModal\";\n\nimport Router from \"@/components/Router\";\n\nimport styles from \"./App.module.scss\";\nimport { useServiceWorkers, ModalChild } from \"./App.helpers\";\nimport { getTheme } from \"@/actions/theme.actions\";\nimport { useSelector } from \"@/hooks/useSelector\";\n\nconst App = () => {\n    const dispatch = useDispatch();\n\n    const { onClose, isActive } = useServiceWorkers();\n    const userId = useSelector((state) => state.profile.data.id);\n\n    useEffect(() => {\n        dispatch(getTheme());\n    }, [userId]);\n\n    return (\n        <div className={styles.App}>\n            <GameModal isActive={isActive} title=\"Ошибка\">\n                <ModalChild onClose={onClose} />\n            </GameModal>\n\n            <ErrorBoundary>\n                <Router />\n            </ErrorBoundary>\n        </div>\n    );\n};\n\nexport default App;\n","import React, { FC } from \"react\";\nimport { Button as CustomButton, ButtonProps } from \"antd\";\n\ninterface Props extends ButtonProps {}\n\nconst Button:FC<Props> = (props) => (<CustomButton {...props}/>);\n\nexport default Button;\n","import React, { FC } from \"react\";\n\nimport styles from \"./Container.module.scss\";\n\nconst Container: FC = ({ children }) => (\n    <div className={styles.container}>{children}</div>\n);\n\nexport default Container;\n","import React, { Component, ErrorInfo, ReactNode } from \"react\";\n\ninterface Props {\n    children: ReactNode;\n}\n\ninterface State {\n    error: Error | null,\n    errorInfo: ErrorInfo | null\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            error: null,\n            errorInfo: null,\n        };\n    }\n\n    componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n        this.setState({\n            error,\n            errorInfo,\n        });\n        // Log error info somewhere\n    }\n\n    // todo\n    render() {\n        if (this.state.error) {\n            return <h2>Something went wrong!</h2>;\n        }\n        return this.props.children;\n    }\n}\n\nexport default ErrorBoundary;\n","import React, { FC, ReactNode } from \"react\";\n\nimport { Modal as CustomModal } from \"antd\";\n\nimport styles from \"./GameModal.module.scss\";\n\ninterface Props {\n    isActive?: boolean;\n    children?: ReactNode;\n    title?: string;\n}\n\nconst GameModal: FC<Props> = ({ isActive, children, title }) => (\n    <CustomModal\n        className={styles.gameModal}\n        title={title}\n        visible={isActive}\n        footer={null}\n        closable={false}\n    >\n        <div className={styles.buttonContainer}>{children}</div>\n    </CustomModal>\n);\n\nexport default GameModal;\n","import React, { useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { signOut } from \"@/actions/auth.actions\";\nimport Button from \"@/components/Button\";\n\nexport const useHeader = () => {\n    const history = useHistory();\n    const dispatch = useDispatch();\n\n    const onSignOut = useCallback(async (event: any) => {\n        event.preventDefault();\n        dispatch(signOut(history));\n    }, []);\n\n    const renderSignOutButton = () => (\n        <Button onClick={onSignOut}>Выйти</Button>\n    );\n\n    return {\n        renderSignOutButton,\n    };\n};\n","import React, { FC } from \"react\";\n\nimport { Link } from \"react-router-dom\";\nimport { Typography } from \"antd\";\n\nimport { useHeader } from \"./Header.helpers\";\nimport { routes as appRoutes } from \"@/config/routes/routes\";\nimport { useSelector } from \"@/hooks/useSelector\";\n\nimport styles from \"./Header.module.scss\";\nimport NavBar from \"../NavBar\";\n\nconst { Text } = Typography;\n\ninterface Props {\n    currentPath?: string;\n}\n\nconst Header: FC<Props> = ({ currentPath }) => {\n    const { renderSignOutButton } = useHeader();\n\n    const isSignedIn = useSelector((state) => state.auth.isSignedIn);\n    const isSignedInOAuth = useSelector((state) => state.auth.isSignedInOAuth);\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.logo}>\n                <Link to={appRoutes.main.path} className={styles.logoSymbols}>\n                    <span className={styles.logoMainSymbol}>U</span>\n                    <Text type=\"secondary\">DC</Text>\n                </Link>\n            </div>\n            <div className={styles.routesContainer}>\n                <NavBar currentPath={currentPath} />\n                <div className={styles.buttonContainer}>\n                    {(isSignedIn || isSignedInOAuth) && renderSignOutButton()}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Header;\n","import React, { FC } from \"react\";\nimport { Input as CustomInput, InputProps } from \"antd\";\n\ninterface Props extends InputProps {}\n\nconst Input:FC<Props> = (props) => (<CustomInput {...props}/>);\n\nexport default Input;\n","import React, { FC, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport styles from \"./NavBar.module.scss\";\n\nimport Switch from \"@/components/Switch\";\nimport { useMountEffect } from \"@/hooks/useMountEffect\";\nimport { routes as appRoutes } from \"@/config/routes/routes\";\nimport { useSelector } from \"@/hooks/useSelector\";\nimport { useTheme } from \"./Navbar.helpers\";\n\nexport interface Route {\n    path: string;\n    label: string;\n}\n\ninterface Props {\n    currentPath?: string;\n}\n\nconst NavBar: FC<Props> = ({ currentPath }) => {\n    const isSignedIn = useSelector((state) => state.auth.isSignedIn);\n    const isSignedInOAuth = useSelector((state) => state.auth.isSignedInOAuth);\n    const [routes, setRoutes] = useState<Route[]>([]);\n    const { theme, changeTheme } = useTheme();\n\n    const allRoutes = [\n        // { path: appRoutes.about.path, label: \"Об игре\" },\n        { path: appRoutes.profile.path, label: \"Профиль\" },\n        { path: appRoutes.leaderboard.path, label: \"Таблица лидеров\" },\n        { path: appRoutes.forum.path, label: \"Форум\" },\n        { path: appRoutes.signUp.path, label: \"Регистрация\" },\n        { path: appRoutes.signIn.path, label: \"Вход\" },\n    ];\n\n    useMountEffect(() => {\n        if (isSignedIn || isSignedInOAuth) {\n            setRoutes(\n                allRoutes.filter(\n                    (route) => route.path !== appRoutes.signUp.path\n                                && route.path !== appRoutes.signIn.path,\n                ),\n            );\n        } else {\n            setRoutes(\n                allRoutes.filter(\n                    (route) => route.path === appRoutes.signUp.path\n                                || route.path === appRoutes.signIn.path,\n                ),\n            );\n        }\n    });\n\n    return (\n        <nav className={styles.ulContainer}>\n            <ul className={styles.ul}>\n                {routes.map((route) => (\n                    <li\n                        className={\n                            route.path === currentPath\n                                ? styles.active\n                                : styles.inactive\n                        }\n                        key={route.path}\n                    >\n                        <Link to={route.path}>{route.label}</Link>\n                    </li>\n                ))}\n\n                {(isSignedIn || isSignedInOAuth) && <Switch onClick={() => changeTheme(theme)} />}\n            </ul>\n        </nav>\n    );\n};\n\nexport default NavBar;\n","import { useDispatch } from \"react-redux\";\nimport { useSelector } from \"@/hooks/useSelector\";\nimport { Theme } from \"@/api/Theme/Theme.api\";\nimport { updateTheme, createTheme } from \"@/actions/theme.actions\";\n\nexport const useTheme = () => {\n    const dispatch = useDispatch();\n    const theme = useSelector((state) => state.theme);\n\n    const changeTheme = (theme: Theme | null) => {\n        if (theme === \"light\") {\n            dispatch(updateTheme(\"dark\"));\n        } else if (theme === \"dark\") {\n            dispatch(updateTheme(\"light\"));\n        } else {\n            dispatch(createTheme(\"dark\"));\n        }\n    };\n\n    return {\n        theme,\n        changeTheme,\n    };\n};\n","import React, { FC } from \"react\";\nimport { Spin } from \"antd\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\n\nimport styles from \"./PageLoader.module.scss\";\n\ninterface Props {\n    isSpinning: boolean;\n}\n\nconst PageLoader: FC<Props> = ({ isSpinning, children }) => {\n    const antIcon = <LoadingOutlined style={{ fontSize: 72 }} spin />;\n    return (\n        <>\n            <Spin className={styles.spinner} indicator={antIcon}size={\"large\"}\n                spinning={isSpinning} />\n            <div className={!isSpinning ? styles.init : styles.loading}>\n                {children}\n            </div>\n        </>\n    );\n};\n\nexport default PageLoader;\n","import React, { FC } from \"react\";\r\nimport Helmet from \"react-helmet\";\r\n\r\ntype Props = {\r\n    title?: string;\r\n    description?: string;\r\n    image?: string;\r\n};\r\n\r\nconst cutTags = (text: string = \"\") => text.replace(/<\\/?.+?>/gi, \"\");\r\n\r\nconst prepareData = ({ title, description, image }: Props) => ({\r\n    title: cutTags(title),\r\n    description: cutTags(description).substr(0, 250),\r\n    image,\r\n});\r\n\r\nconst PageMeta: FC<Props> = (props) => {\r\n    const { title, description, image } = prepareData(props);\r\n\r\n    return (\r\n        <Helmet>\r\n            <title>{title}</title>\r\n            <meta property=\"og:title\" content={title} />\r\n            <meta property=\"twitter:title\" content={title} />\r\n            {Boolean(description) && (\r\n                <meta name=\"description\" content={description} />\r\n            )}\r\n            {Boolean(description) && (\r\n                <meta property=\"og:description\" content={description} />\r\n            )}\r\n            {Boolean(description) && (\r\n                <meta property=\"twitter:description\" content={description} />\r\n            )}\r\n            {Boolean(image) && <meta property=\"og:image\" content={image} />}\r\n        </Helmet>\r\n    );\r\n};\r\n\r\nexport default PageMeta;\r\n","import React, { FC } from \"react\";\nimport { Input as CustomInput } from \"antd\";\n\nimport { LockOutlined } from \"@ant-design/icons\";\n\ninterface Props {\n    placeholder: string\n}\n\nconst { Password } = CustomInput;\n\nconst CustomPassword:FC<Props> = (props) => (\n    <Password\n        prefix={<LockOutlined />}\n        iconRender={() => false}\n        {...props}\n    />\n);\n\nexport default CustomPassword;\n","import React, { FC } from \"react\";\n\nimport Routes from \"./Routes/Routes.view\";\n\n// todo изменить на browserouter\nconst Router: FC = () => (\n    <Routes/>\n);\n\nexport default Router;\n","import React, { FC } from \"react\";\nimport {\n    Switch,\n    Route,\n    Redirect,\n    useLocation,\n    useHistory,\n} from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\n\nimport api from \"@/api/OAuth\";\nimport { signInOAuth } from \"@/actions/auth.actions\";\nimport { useMountEffect } from \"@/hooks/useMountEffect\";\n\nimport { getProfile } from \"@/actions/profile.actions\";\nimport Login from \"@/pages/SignIn\";\nimport SignUpView from \"@/pages/SignUp\";\nimport Main from \"@/pages/Main\";\nimport Profile from \"@/pages/Profile\";\nimport Forum from \"@/pages/Forum\";\nimport About from \"@/pages/About\";\nimport Leaderboard from \"@/pages/Leaderboard\";\nimport Error from \"@/pages/Error\";\nimport Game from \"@/pages/Game\";\nimport Offline from \"@/pages/Offline\";\nimport Topic from \"@/pages/Topic\";\nimport TopicEdit from \"@/pages/TopicEdit\";\nimport AccessRoute from \"@/components/AccessRoute\";\nimport AccessRedirectRoute from \"@/components/AccessRedirectRoute\";\n\nimport { routes } from \"@/config/routes/routes\";\n\nconst Routes: FC = () => {\n    const { search } = useLocation();\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    useMountEffect(() => {\n        const code = new URLSearchParams(search).get(\"code\");\n        if (code) {\n            api.signUpWithYandex(code).then(() => {\n                dispatch(signInOAuth(history));\n                dispatch(getProfile());\n            });\n        }\n    });\n\n    return (\n        <Switch>\n            <Redirect exact from={\"/\"} to={routes.signIn.path} />\n            <AccessRedirectRoute\n                path={routes.signIn.path}\n                component={Login}\n            />\n            <AccessRedirectRoute\n                path={routes.signUp.path}\n                component={SignUpView}\n            />\n            <AccessRoute path={routes.main.path} component={Main} />\n            <AccessRoute path={routes.profile.path} component={Profile} />\n            <AccessRoute exact path={routes.forum.path} component={Forum} />\n            <AccessRoute path={routes.topic.path} component={Topic} />\n            <AccessRoute exact path={routes.topicEdit.path} component={TopicEdit} />\n            <AccessRoute\n                path={routes.leaderboard.path}\n                component={Leaderboard}\n            />\n            <Route path={routes.about.path} component={About} />\n            <AccessRoute path={routes.game.path} component={Game} />\n            <Route path={\"/error\"} component={Error} />\n            <Route path={\"/offline\"} component={Offline} />\n        </Switch>\n    );\n};\n\nexport default Routes;\n","import React, { FC } from \"react\";\nimport { Switch as CustomSwitch, SwitchProps } from \"antd\";\n\ninterface Props extends SwitchProps {}\n\nconst Switch:FC<Props> = (props) => (<CustomSwitch {...props}/>);\n\nexport default Switch;\n","export const apiRoutes = {\n    oauth: {\n        providerURLRoot: \"https://oauth.yandex.ru/authorize?response_type=code\",\n        redirectURI: \"https://udg.nomoredomains.work\", // localhost:3000\n        serviceId: \"oauth/yandex/service-id\",\n        signIn: \"oauth/yandex\",\n        udcClientId: \"b7aa7e3038ed42358ea3cd11acddef45\",\n    },\n};\n","export const TEAM_SCORE = \"southParkGameScore\";\nexport const RECORDS_PER_PAGE = 10;\n\nexport interface LeaderBoardRecord {\n    login: string\n    [TEAM_SCORE]: number\n}\n\nexport type LeaderBoardRecordRequest = {\n    data: LeaderBoardRecord,\n    ratingFieldName: typeof TEAM_SCORE,\n    teamName: \"southpark\"\n};\n\nexport type LeaderBoardGetRequest = {\n    ratingFieldName: typeof TEAM_SCORE,\n    cursor: number,\n    limit: typeof RECORDS_PER_PAGE\n};\n\n// NOTE: any потому что сюда могут любую какашку положить\nexport type LeaderBoardData = Array<{ data: LeaderBoardRecord & any }>;\n","export type Route = {\n    path: string\n};\n\nexport type Routes = {\n    [key: string]: Route;\n};\n\nexport const routes: Routes = {\n    main: {\n        path: \"/main\",\n    },\n    signIn: {\n        path: \"/signin\",\n    },\n    signUp: {\n        path: \"/signup\",\n    },\n    profile: {\n        path: \"/profile\",\n    },\n    forum: {\n        path: \"/forum\",\n    },\n    topic: {\n        path: \"/topics/:id\",\n    },\n    topicEdit: {\n        path: \"/topic/edit\",\n    },\n    leaderboard: {\n        path: \"/leaderboard\",\n    },\n    about: {\n        path: \"/about\",\n    },\n    game: {\n        path: \"/game\",\n    },\n    theme: {\n        path: \"/themes/:id\",\n    },\n};\n\nexport const findRoute = (path: Route[\"path\"]): Route | null => {\n    const route = Object.values(routes).find((route) => route.path === path);\n    return route ?? null;\n};\n","export class GameAnimation {\n\n}\n","import { Weapon } from \"game/world/objects/weapon\";\nimport { RectangleGeometry } from \"game/core/geometry/rectangle/rectangle\";\nimport { Object2D } from \"game/core/object\";\nimport { GameAnimation } from \"../animation\";\nimport { Vector2D } from \"../../utils/vector\";\n\nexport interface CanAttack {\n    weapon: Weapon\n    attackAnimation: AttackAnimation\n}\n\ntype AttackAnimationProps = {\n\n};\n\n// TODO: Создать разные анимации атаки для разных видов оружия\nexport class AttackAnimation extends GameAnimation {\n    currentRotation: number = 0;\n    maxAnimationStep: number = 10;\n    maxRotation: number = 2.4;\n\n    constructor(props?: AttackAnimationProps) {\n        super();\n    }\n\n    // Обновить позиции оружия и анимировать удар, если он активен\n    update(weapon: Weapon, object: Object2D): Weapon {\n        // Анимация удара\n        if (weapon.active) {\n            // Нужно ли перевернуть\n            const shouldFlip = object.spriteConfig?.shouldFlip;\n            // Определяем позицию\n            const geom = object.geometry as RectangleGeometry;\n            const { x } = object.position;\n            const { y } = object.position;\n            const { width } = geom;\n            const { height } = geom;\n            // Позицинируем меч (подобрано)\n            // TODO: Баг позиционирования слева и дальности удара !\n            let weaponX = x + width * 0.55;\n            if (shouldFlip) {\n                weaponX = x - width * 0.15;\n            }\n            const weaponY = y - height * 0.5;\n            weapon.position.x = weaponX;\n            weapon.position.y = weaponY;\n            // Определяем угол поворота (текущий)\n            this.currentRotation += this.maxRotation / this.maxAnimationStep;\n            // Центром поворота устанавливаем ручку оружия\n            const weaponGeom = weapon.geometry as RectangleGeometry;\n            const center = new Vector2D(weapon.position.x, weapon.position.y + weaponGeom.height);\n            weapon.rotateAround(center, this.currentRotation);\n            // Конец анимации\n            if (this.currentRotation >= this.maxRotation) {\n                this.currentRotation = 0;\n                weapon.attackCount += 1;\n                weapon.active = false;\n                weapon.visible = false;\n            }\n        }\n        return weapon;\n    }\n}\n","import { Vector2D } from \"../../utils/vector\";\nimport { STEP } from \"../../../world/world.config\";\nimport { GameAnimation } from \"../animation\";\n\ntype MoveAnimationProps = {\n    speed: number\n};\n\nexport type MoveState = {\n    isMovingLeft: boolean;\n    isMovingRight: boolean;\n    isMovingTop: boolean;\n    isMovingDown: boolean;\n};\n\nexport class MoveAnimation extends GameAnimation {\n    moveState: MoveState;\n    speed: number;\n\n    constructor(props: MoveAnimationProps) {\n        super();\n        this.speed = props.speed;\n        //\n        this.moveState = {\n            isMovingLeft: false,\n            isMovingRight: false,\n            isMovingTop: false,\n            isMovingDown: false,\n        };\n        //\n    }\n\n    update(position: Vector2D): Vector2D {\n        const delta = STEP * this.speed;\n        if (this.moveState.isMovingDown) {\n            position.y += delta;\n        }\n        if (this.moveState.isMovingTop) {\n            position.y -= delta;\n        }\n        if (this.moveState.isMovingRight) {\n            position.x += delta;\n        }\n        if (this.moveState.isMovingLeft) {\n            position.x -= delta;\n        }\n        return position;\n    }\n\n    isMoving(): boolean {\n        return Object.values(this.moveState).reduce(\n            (res, val) => res || val,\n            false,\n        );\n    }\n}\n","import { ObjectSpriteConfig } from \"game/core/object\";\nimport { Sprite } from \"game/world/world.manager\";\nimport { STEP } from \"../../../world/world.config\";\nimport { GameAnimation } from \"../animation\";\nimport { MoveAnimation } from \"../move/moveAnimation\";\n\ntype SpriteAnimationProps = {\n    sprites: AnimationSprites\n};\n\nexport type AnimationSprites = {\n    idle_0: Sprite,\n    idle_1: Sprite,\n    idle_2: Sprite,\n    idle_3: Sprite,\n    run_0: Sprite,\n    run_1: Sprite,\n    run_2: Sprite,\n    run_3: Sprite,\n};\n\nexport class SpriteAnimation extends GameAnimation {\n    timeAfterLastSpriteUpdate: number; // in ms\n    sprites: AnimationSprites;\n\n    constructor(props: SpriteAnimationProps) {\n        super();\n        this.sprites = props.sprites;\n        this.timeAfterLastSpriteUpdate = 0;\n    }\n\n    update(\n        spriteConfig: ObjectSpriteConfig | null,\n        moveAnimation: MoveAnimation,\n    ): ObjectSpriteConfig | null {\n        this.timeAfterLastSpriteUpdate += STEP;\n        const shouldUpdateSprite = this.shouldUpdateSprite();\n        if (spriteConfig && shouldUpdateSprite) {\n            const isMoving = moveAnimation.isMoving();\n            const isCurrentSpriteIdle = this.isCurrentSpriteIdle(spriteConfig);\n            if (isMoving) {\n                if (isCurrentSpriteIdle) {\n                    spriteConfig.sprite = this.sprites.run_0;\n                } else {\n                    spriteConfig.sprite = this.getNextRunSprite(spriteConfig);\n                }\n            } else if (!isCurrentSpriteIdle) {\n                spriteConfig.sprite = this.sprites.idle_0;\n            } else {\n                spriteConfig.sprite = this.getNextIdleSprite(spriteConfig);\n            }\n        }\n        // NOTE: Обновляем shouldFlip после установки нового спрайта\n        if (spriteConfig) {\n            if (moveAnimation.moveState.isMovingRight) {\n                spriteConfig.shouldFlip = false;\n            }\n            if (moveAnimation.moveState.isMovingLeft) {\n                spriteConfig.shouldFlip = true;\n            }\n        }\n        return spriteConfig;\n    }\n\n    shouldUpdateSprite(): boolean {\n        // Обновляем 12 раз в секунду\n        if (this.timeAfterLastSpriteUpdate > 5 * STEP) {\n            this.timeAfterLastSpriteUpdate = 0;\n            return true;\n        }\n        return false;\n    }\n\n    isCurrentSpriteIdle(spriteConfig: ObjectSpriteConfig): boolean {\n        const sprite = spriteConfig?.sprite;\n        return sprite === this.sprites.idle_0\n                || sprite === this.sprites.idle_1\n                || sprite === this.sprites.idle_2\n                || sprite === this.sprites.idle_3;\n    }\n\n    getNextRunSprite(spriteConfig: ObjectSpriteConfig): Sprite {\n        const sprite = spriteConfig?.sprite;\n        switch (sprite) {\n            case this.sprites.run_0:\n                return this.sprites.run_1;\n            case this.sprites.run_1:\n                return this.sprites.run_2;\n            case this.sprites.run_2:\n                return this.sprites.run_3;\n            case this.sprites.run_3:\n                return this.sprites.run_0;\n            default:\n                return this.sprites.run_0;\n        }\n    }\n\n    getNextIdleSprite(spriteConfig: ObjectSpriteConfig): Sprite {\n        const sprite = spriteConfig?.sprite;\n        switch (sprite) {\n            case this.sprites.idle_0:\n                return this.sprites.idle_1;\n            case this.sprites.idle_1:\n                return this.sprites.idle_2;\n            case this.sprites.idle_2:\n                return this.sprites.idle_3;\n            case this.sprites.idle_3:\n                return this.sprites.idle_0;\n            default:\n                return this.sprites.idle_0;\n        }\n    }\n}\n","import { Object2D } from \"./object\";\n\nexport class Camera {\n    // TODO: Размеры viewport, zoom, объект привязки\n    bindedObject: Object2D | null;\n    size: number;\n\n    get x(): number {\n        return this.bindedObject?.position.x || 0;\n    }\n\n    get y(): number {\n        return this.bindedObject?.position.y || 0;\n    }\n\n    constructor(size: number) {\n        this.size = size;\n    }\n\n    bindObject(object: Object2D) {\n        this.bindedObject = object;\n    }\n    // TODO: frustumView culling\n}\n","// Класс, управляющий всеми событиями в игре\n// Например, для player если в prerender фиксируются зажатые клавишы передвижения, то\n// на основе пройденного времени нужно пересчитать перемещение объекта (+ скорость)\n// то есть пересчитать положение\nexport class EventBus {\n    private _listeners: Map<string, Array<Function>>;\n\n    constructor() {\n        this._listeners = new Map();\n    }\n\n    on(event: string, callback: Function): void {\n        const events = this._listeners.get(event) || [];\n        events.push(callback);\n        this._listeners.set(event, events);\n    }\n\n    off(event: string, callback: Function): void {\n        const events = this._listeners.get(event);\n\n        if (!events) {\n            return;\n        }\n\n        this._listeners.set(event, events.filter((listener) => listener !== callback));\n    }\n\n    emit(event: string, ...args: unknown[]) {\n        const events = this._listeners.get(event);\n\n        if (!events) {\n            return;\n        }\n        events.forEach((listener) => {\n            listener(...args);\n        });\n    }\n}\n","import { Box2 } from \"../utils/box2\";\nimport { Circle } from \"../utils/circle\";\nimport { Object2D } from \"../object\";\n\nexport enum GeometryTypes {\n    Rectangle = \"Rectangle\",\n    Circle = \"Circle\",\n    Shape = \"Shape\", // Свободная форма\n}\n\ntype GeometryProps = {\n    geomType: string, // GeometryTypes\n};\n\n// Get unique geometry id (ssr)\nconst getGeomId = (function () {\n    let geometryId = 0;\n    return () => {\n        geometryId += 1;\n        return geometryId;\n    };\n}());\n\nexport class Geometry {\n    // Уникальный id геометрии\n    id: number;\n    // Опциональное имя\n    name: string;\n    // Bounding box геометрии (для расчетов)\n    boundingBox: Box2 | null;\n    // Bounding circle геометрии (для расчетов)\n    boundingCircle: Circle | null;\n    // Тип геометрии (для отрисовки)\n    type: string;\n\n    constructor(props: GeometryProps) {\n        this.id = getGeomId();\n        this.name = \"\";\n        this.type = props.geomType;\n\n        this.boundingBox = null;\n        this.boundingCircle = null;\n    }\n\n    // TODO: Методы работы с геометрией\n    calculateBoundingBox(object: Object2D) {\n\n    }\n\n    calculateBoundingCircle(object: Object2D) {\n\n    }\n}\n","import { Object2D } from \"game/core/object\";\nimport { Box2 } from \"../../utils/box2\";\nimport { Vector2D } from \"../../utils/vector\";\nimport { Geometry, GeometryTypes } from \"../geometry\";\n\nexport class RectangleGeometry extends Geometry {\n    width: number;\n    height: number;\n\n    constructor(width: number, height: number) {\n        super({ geomType: GeometryTypes.Rectangle });\n\n        this.width = width;\n        this.height = height;\n    }\n\n    // Учитываем поворот и shouldFlip\n    calculateBoundingBox(object: Object2D) {\n        if (!this.boundingBox) {\n            this.boundingBox = new Box2(\n                new Vector2D(0, 0),\n                new Vector2D(0, 0),\n            );\n        }\n        const rectangle = new Vector2D(this.width, this.height);\n        const { position } = object;\n        if (object.rotation && object.rotationCenter) {\n            // Угол и центр поворота\n            let angle = object.rotation;\n            // TODO: Баг позиционирования слева и дальности удара !\n            if (object.spriteConfig?.shouldFlip) {\n                angle = -angle;\n            }\n            const center = object.rotationCenter.copy().add(\n                new Vector2D(object.position.x, object.position.y),\n            );\n            // Вращаем каждую точку вокруг центра\n            const p1 = new Vector2D(object.position.x, object.position.y);\n            const p2 = new Vector2D(object.position.x, object.position.y + this.height);\n            const p3 = new Vector2D(object.position.x + this.width, object.position.y);\n            const p4 = new Vector2D(\n                object.position.x + this.width,\n                object.position.y + this.height,\n            );\n            p1.rotateAround(center, angle);\n            p2.rotateAround(center, angle);\n            p3.rotateAround(center, angle);\n            p4.rotateAround(center, angle);\n            // Собираем новый BB из точек\n            const minX = Math.min(p1.x, p2.x, p3.x, p4.x);\n            const maxX = Math.max(p1.x, p2.x, p3.x, p4.x);\n            const minY = Math.min(p1.y, p2.y, p3.y, p4.y);\n            const maxY = Math.max(p1.y, p2.y, p3.y, p4.y);\n            const newMin = new Vector2D(minX, minY);\n            const newMax = new Vector2D(maxX, maxY);\n            // Новый BB\n            this.boundingBox = new Box2(newMin, newMax);\n        } else {\n            this.boundingBox.min = position;\n            this.boundingBox.max = position.copy().add(rectangle);\n        }\n    }\n}\n","import { Sprite } from \"game/world/world.manager\";\nimport { Geometry } from \"./geometry/geometry\";\nimport { Color } from \"./utils/color\";\nimport { Vector2D } from \"./utils/vector\";\n\nexport type Object2DProps = {\n    geometry: Geometry\n    color?: Color\n};\n\nexport type ObjectSpriteConfig = {\n    // Изображение\n    image: HTMLImageElement | undefined\n    sprite: Sprite\n    // Нужно ли повернуть\n    shouldFlip?: boolean\n};\n\n// Get unique geometry id (ssr)\nconst getObject2DId = (function () {\n    let objectId = 0;\n    return () => objectId += 1;\n}());\n\nexport class Object2D {\n    // Уникальный id в сцене\n    id: number;\n    // Опциональное имя объета\n    name: string;\n    // Позиция объекта в сцене\n    // NOTE: x = left, y = top\n    position: Vector2D;\n    // Rotation in radians\n    rotation: number;\n    // For Canvas Rendering\n    rotationCenter: Vector2D | undefined;\n    // Видимость объектв в сцене\n    visible: boolean;\n    // Должен ли объект обрезаться камерой при рендеринге\n    frustumCulled: boolean;\n    // Опциональные данные\n    userData: Object | null;\n    // Геометрия объекта\n    geometry: Geometry;\n    // Цвет\n    color: Color;\n    // Спрайт\n    // TODO: Определить тип и реализовать функционал\n    spriteConfig: ObjectSpriteConfig | null;\n\n    constructor(props: Object2DProps) {\n        // Задаем дефолтные значения\n        this.id = getObject2DId();\n        this.name = \"\";\n        this.position = new Vector2D(0, 0);\n        this.visible = true;\n        this.frustumCulled = false;\n        this.userData = null;\n        this.spriteConfig = null;\n        // Сохраняем тип геометрии\n        this.geometry = props.geometry;\n        this.color = props.color || new Color(0, 0, 0);\n    }\n\n    // Базовые методы для объекта\n    move(vect: Vector2D) {\n        this.position.add(vect);\n    }\n\n    /**\n     *  Вращает вокруг центра на заданнный угол\n        @center - Точка вокруг которой вращается\n        @angle - Угол вращения в радианах\n    */\n    rotateAround(center: Vector2D, angle: number) {\n        this.rotation = angle;\n        this.rotationCenter = new Vector2D(\n            center.x - this.position.x,\n            center.y - this.position.y,\n        );\n    }\n\n    scale() {\n\n    }\n\n    // Обобщенный метод обновления текущего состояния\n    // Каждый объект определяет самостоятельно\n    // Происходит каждые STEP\n    updateState() {\n\n    }\n}\n","import { STEP } from \"../../world/world.config\";\nimport { MoveAnimation } from \"../animations/move/moveAnimation\";\nimport { RectangleGeometry } from \"../geometry/rectangle/rectangle\";\nimport { Object2D } from \"../object\";\nimport { Box2 } from \"../utils/box2\";\nimport { Vector2D } from \"../utils/vector\";\n\nexport interface Collidable {\n    canCollide: boolean\n    onCollide(obstacle: Object2D & Collidable, ...args: any): void\n}\n\nexport function isImplementingCollision(obj1: Object2D): obj1 is Object2D & Collidable {\n    return (obj1 as Object).hasOwnProperty(\"canCollide\");\n}\n\nclass Physics {\n    hasBox2DCollided(obj1: Object2D, obj2: Object2D): boolean {\n        // Пересчитываем BoundingBox\n        obj1.geometry.calculateBoundingBox(obj1);\n        obj2.geometry.calculateBoundingBox(obj2);\n        // Получаем BB объектов\n        const box1 = obj1.geometry.boundingBox as Box2;\n        const box2 = obj2.geometry.boundingBox as Box2;\n        // Простая AABB проверка\n        if (\n            box1.min.x < box2.max.x\n            && box1.max.x > box2.min.x\n            && box1.min.y < box2.max.y\n            && box1.max.y > box2.min.y\n        ) {\n            return true;\n        }\n        return false;\n    }\n\n    // Общая идея в том, чтобы определить в следствие какого движения произошло столкновение\n    // Для этого мы берем предыдущую позицию и проверяем произойдет ли столкновение\n    // если передвинуться на расчетное значение delta\n    // Если столкновение произойдет, то пересчитываем позицию\n    // иначе восстанавливаем текущую позицию\n    getNewPositionAfterWallCollision(\n        object: Object2D,\n        obstacle: Object2D,\n        moveAnimation: MoveAnimation,\n        prevPosition: Vector2D,\n    ): Vector2D {\n        // Края объекта не должны пересекаться с bounding box obstacle\n        const objGeom = object.geometry as RectangleGeometry;\n        const obstGeomBB = obstacle.geometry.boundingBox as Box2;\n        const {\n            isMovingRight, isMovingLeft, isMovingDown, isMovingTop,\n        } = moveAnimation.moveState;\n        // Сохраняем текущую позицию (позиция после движения)\n        const position = object.position.copy();\n        const delta = STEP * moveAnimation.speed;\n        if (isMovingRight) {\n            // Устанавливаем предыдущую позицию\n            object.position = prevPosition.copy();\n            // Делаем шаг вправо\n            object.position.x += delta;\n            // Проверяем стало ли это причиной столкновения\n            const isCollisionCause = this.hasBox2DCollided(object, obstacle);\n            if (isCollisionCause) {\n                // Обновляем координаты если стало\n                object.position.x = obstacle.position.x - objGeom.width;\n                object.position.y = position.y;\n                // Дальше не идем, иначе восстановим случайно позицию\n                return object.position;\n            }\n\n            // Восстанавливаем позицию\n            object.position = position;\n        }\n        if (isMovingDown) {\n            object.position = prevPosition.copy();\n            object.position.y += delta;\n            const isCollisionCause = this.hasBox2DCollided(object, obstacle);\n            if (isCollisionCause) {\n                object.position.x = position.x;\n                object.position.y = obstGeomBB.min.y - objGeom.height;\n                return object.position;\n            }\n\n            object.position = position;\n        }\n        if (isMovingLeft) {\n            object.position = prevPosition.copy();\n            object.position.x -= delta;\n            const isCollisionCause = this.hasBox2DCollided(object, obstacle);\n            if (isCollisionCause) {\n                object.position.x = obstGeomBB.max.x;\n                object.position.y = position.y;\n                return object.position;\n            }\n\n            object.position = position;\n        }\n        if (isMovingTop) {\n            object.position = prevPosition.copy();\n            object.position.y -= delta;\n            const isCollisionCause = this.hasBox2DCollided(object, obstacle);\n            if (isCollisionCause) {\n                object.position.x = position.x;\n                object.position.y = obstGeomBB.max.y;\n                return object.position;\n            }\n\n            object.position = position;\n        }\n        return object.position;\n    }\n}\n\nexport default new Physics();\n","import { Camera } from \"./camera\";\nimport { GeometryTypes } from \"./geometry/geometry\";\nimport { RectangleGeometry } from \"./geometry/rectangle/rectangle\";\nimport { Object2D } from \"./object\";\nimport Physics, { isImplementingCollision } from \"./physics/physics\";\nimport { Scene } from \"./scene\";\n\ntype RendererProps = {\n    canvas: HTMLCanvasElement | null\n    width: number\n    height: number\n};\n\ntype PositionValues = {\n    x: number\n    y: number\n    width: number\n    height: number\n};\n\nexport class Renderer {\n    canvas: HTMLCanvasElement;\n    context: CanvasRenderingContext2D;\n\n    constructor(props: RendererProps) {\n        if (!props.canvas) {\n            throw new Error(\"Ошибка инициализации\");\n        }\n        const context = props.canvas.getContext(\"2d\");\n        if (!context) {\n            throw new Error(\"Ошибка получения контекста канвас\");\n        }\n\n        this.canvas = props.canvas;\n        this.context = context;\n\n        this.init(props.width, props.height);\n    }\n\n    init(width: number, height: number) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n\n    // Нарисовать все объекты сцены на канвасе. Обрезать камерой лишнее\n    render(scene: Scene, camera: Camera) {\n        const c = this.context;\n        const { canvas } = this;\n        const { background } = scene;\n        // TODO: Обрезать объекты в сцене камерой\n\n        // Сначала очищаем канвас\n        c.clearRect(0, 0, canvas.width, canvas.height);\n        // Затем рисуем бэкграунд\n        c.fillStyle = `rgba(${background.r}, ${background.g}, ${background.b}, ${background.a})`;\n        c.fillRect(0, 0, canvas.width, canvas.height);\n        // Отрисовка в цикле всех объектов в сцене\n        for (const obj of scene.objects) {\n            switch (obj.geometry.type) {\n                case GeometryTypes.Rectangle:\n                    this._drawRectangle(obj, camera);\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n\n    // Запустить физику и пересчитать анимацию\n    prerender(scene: Scene) {\n        // Сначала пересчитываем анимацию\n        for (const obj of scene.objectWithPhysics) {\n            obj.updateState();\n        }\n        // TODO: Реализовать Quadtree collison detection\n        /* eslint-disable */\n        // https://gamedevelopment.tutsplus.com/tutorials/quick-tip-use-quadtrees-to-detect-likely-collisions-in-2d-space--gamedev-374\n        // https://stackoverflow.com/questions/4981866/quadtree-for-2d-collision-detection\n        /* eslint-enable */\n\n        // Затем проверяем столкновение объектов в сцене\n        for (let i = 0; i < scene.objectWithPhysics.length; i += 1) {\n            for (let j = i + 1; j < scene.objectWithPhysics.length; j += 1) {\n                const obj1 = scene.objectWithPhysics[i];\n                const obj2 = scene.objectWithPhysics[j];\n\n                if (\n                    isImplementingCollision(obj1)\n                    && isImplementingCollision(obj2)\n                ) {\n                    const collided = Physics.hasBox2DCollided(obj1, obj2);\n                    // TODO: Определить очередность вызова callback\n                    // Например, если в движущегося игрока попадает пуля, то игрок не должен\n                    // от этого переместиться, а пуля должна уничтожиться\n                    if (collided) {\n                        obj1.onCollide(obj2);\n                        obj2.onCollide(obj1);\n                    }\n                }\n            }\n        }\n    }\n\n    // Отрисовка rectangle на канвасе\n    private _drawRectangle(object: Object2D, camera: Camera) {\n        // Ренедерим только видимые объекты\n        if (!object.visible) {\n            return;\n        }\n        const c = this.context;\n        const geom = object.geometry as RectangleGeometry;\n        const { color } = object;\n        // Пересчитываем координаты мира в координаты на canvas\n        // с учетом позиционирования камеры\n        const K = this.canvas.width / camera.size;\n        const {\n            x, y, width, height,\n        } = this._recalculateWorldValuesToCanvasValues(\n            camera,\n            {\n                x: object.position.x,\n                y: object.position.y,\n                width: geom.width,\n                height: geom.height,\n            },\n        );\n        // Выполняем преобразования для корректного отображения\n        // Translate to position\n        c.translate(x, y);\n        // Flip object\n        if (object.spriteConfig?.shouldFlip) {\n            c.translate(width, 0);\n            c.scale(-1, 1);\n        }\n        // Rotate object\n        if (object.rotation && object.rotationCenter) {\n            // Поворачиваем относительно центра\n            c.translate(object.rotationCenter.x * K, object.rotationCenter.y * K);\n            c.rotate(object.rotation);\n            c.translate(-object.rotationCenter.x * K, -object.rotationCenter.y * K);\n        }\n        // Draw Image (Sprite)\n        if (object.spriteConfig?.image) {\n            const sp = object.spriteConfig.sprite;\n            const image = object.spriteConfig.image as HTMLImageElement;\n            c.drawImage(image, sp.sx, sp.sy, sp.sWidth, sp.sHeight, 0, 0, width, height);\n        } else { // Or default Rectangle\n            c.fillStyle = `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`;\n            c.fillRect(0, 0, width, height);\n        }\n        // Reset transformations to default\n        c.setTransform(1, 0, 0, 1, 0, 0);\n    }\n\n    private _recalculateWorldValuesToCanvasValues(\n        camera: Camera,\n        values: PositionValues,\n    ): PositionValues {\n        // Смещаем координаты отностительно объекта привязки камеры\n        if (camera.bindedObject) {\n            values.x = camera.size / 2 + (values.x - camera.bindedObject.position.x);\n            values.y = camera.size / 2 + (values.y - camera.bindedObject.position.y);\n        }\n        // Переводим world coordinates в координаты отрисовки\n        // TODO: Проблема округления координат\n        const K = this.canvas.width / camera.size;\n        values.x *= K;\n        // Рассчитываем с поправкой на позиционирование камеры\n        if (camera.bindedObject) {\n            values.y = K * values.y - ((camera.size / 2) * K - this.canvas.height / 2);\n        } else {\n            values.y *= K;\n        }\n        values.width *= K;\n        values.height *= K;\n\n        return values;\n    }\n}\n","import { Object2D } from \"./object\";\nimport { Color } from \"./utils/color\";\n\nexport class Scene {\n    // TODO: Добавить поддержку Object в качесте бэкграунда (+ sprite)\n    public background: Color;\n    // Список объектов в сцене\n    public objects: Object2D[];\n    // Список объектов в сцене с физикой\n    public objectWithPhysics: Object2D[];\n\n    constructor(background?: Color) {\n        this.objects = [];\n        this.objectWithPhysics = [];\n\n        this.background = background || new Color(255, 255, 255);\n    }\n\n    add(objects: Object2D[] | Object2D) {\n        if (Array.isArray(objects)) {\n            this.objects.push(...objects);\n        } else {\n            this.objects.push(objects);\n        }\n    }\n\n    addObjectWithPhysics(objects: Object2D[] | Object2D) {\n        if (Array.isArray(objects)) {\n            this.objectWithPhysics.push(...objects);\n        } else {\n            this.objectWithPhysics.push(objects);\n        }\n    }\n\n    remove(object: Object2D) {\n        this.objects = this.objects.filter((x) => x !== object);\n        this.objectWithPhysics = this.objectWithPhysics.filter((x) => x !== object);\n    }\n}\n","import { Vector2D } from \"./vector\";\n\nexport class Box2 {\n    min: Vector2D;\n    max: Vector2D;\n\n    constructor(min: Vector2D, max: Vector2D) {\n        this.min = min;\n        this.max = max;\n    }\n}\n","export class Color {\n    r: number;\n    g: number;\n    b: number;\n    a: number;\n\n    constructor(r: number, g: number, b: number, a: number = 1) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n}\n","export class Vector2D {\n    x: number;\n    y: number;\n\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n\n    add(vector: Vector2D): Vector2D {\n        this.x += vector.x;\n        this.y += vector.y;\n\n        return this;\n    }\n\n    rotateAround(center: Vector2D, angle: number): Vector2D {\n        this.x = Math.cos(angle) * (this.x - center.x)\n                - Math.sin(angle) * (this.y - center.y) + center.x;\n        this.y = Math.sin(angle) * (this.x - center.x)\n                 + Math.cos(angle) * (this.y - center.y) + center.y;\n\n        return this;\n    }\n\n    copy(): Vector2D {\n        return new Vector2D(this.x, this.y);\n    }\n}\n","import { CanReceiveDamage } from \"game/core/animations/damage/damage\";\nimport { Scene } from \"game/core/scene\";\nimport { MoveAnimation } from \"../../core/animations/move/moveAnimation\";\nimport { AnimationSprites, SpriteAnimation } from \"../../core/animations/sprite/spriteAnimation\";\nimport { Vector2D } from \"../../core/utils/vector\";\nimport { Object2D, Object2DProps } from \"../../core/object\";\nimport Physics, { Collidable } from \"../../core/physics/physics\";\nimport { Player } from \"./player\";\nimport { Weapon } from \"./weapon\";\nimport { Directions, getRandomDirection } from \"../world.helpers\";\nimport { Wall } from \"./wall\";\nimport WorldManager from \"../world.manager\";\n\ntype EnemyProps = Object2DProps & {\n    scene: Scene;\n    maxHealth: number;\n    image?: HTMLImageElement\n};\n\nconst ENEMY_MOVE_DIRECTIONS: Directions = {\n    left: { name: \"left\", chance: 0.25 },\n    right: { name: \"right\", chance: 0.25 },\n    down: { name: \"down\", chance: 0.25 },\n    top: { name: \"top\", chance: 0.25 },\n};\n\nexport class Enemy extends Object2D implements Collidable, CanReceiveDamage {\n    scene: Scene;\n    canCollide: boolean = true;\n    //\n    speed: number = 50;\n    moveAnimation: MoveAnimation;\n    prevPosition: Vector2D;\n    //\n    spriteAnimation: SpriteAnimation;\n    enemySprites: AnimationSprites;\n    //\n    prevRecievedDamage: number;\n    // Здоровье\n    maxHealth: number;\n    private _health: number;\n    // Частота обновления позиции\n    currentMoveStateCounter: number = 0;\n    maxMoveStateUpdate: number = 30;\n\n    // TODO: Додумать реализацию\n    get health(): number {\n        return this._health;\n    }\n    set health(value: number) {\n        this._health = value;\n        if (this._health <= 0) {\n            this.onDeath();\n        }\n    }\n\n    constructor(props: EnemyProps) {\n        super(props);\n\n        this.scene = props.scene;\n        this.maxHealth = props.maxHealth;\n        this._health = this.maxHealth;\n        this._createEnemySprites(props.image);\n        this.init();\n    }\n\n    init() {\n        // Создаем логику анимации движения\n        this.moveAnimation = new MoveAnimation({\n            speed: this.speed,\n        });\n        this.moveStateUpdateCondition();\n        // Создаем логику анимации смены sprite\n        this.spriteAnimation = new SpriteAnimation({\n            sprites: this.enemySprites,\n        });\n    }\n\n    updateState() {\n        // Обновляем sprite\n        this.spriteConfig = this.spriteAnimation.update(this.spriteConfig, this.moveAnimation);\n        // Обновляем position\n        this.prevPosition = this.position.copy();\n        this.moveStateUpdateCondition();\n        this.position = this.moveAnimation.update(this.position);\n    }\n\n    //\n    onCollide(obstacle: Object2D & Collidable) {\n        if (obstacle instanceof Wall) {\n            this.position = Physics.getNewPositionAfterWallCollision(\n                this,\n                obstacle,\n                this.moveAnimation,\n                this.prevPosition,\n            );\n        }\n        if (obstacle instanceof Player) {\n            obstacle.health -= 0.5;\n        }\n        if (obstacle instanceof Weapon && obstacle.active) {\n            if (this.prevRecievedDamage !== obstacle.attackCount) {\n                this.health -= obstacle.damage;\n                this.prevRecievedDamage = obstacle.attackCount;\n            }\n        }\n    }\n\n    onDeath() {\n        this.scene.remove(this);\n        const enemiesCount = this.scene.objects.filter((x) => x instanceof Enemy).length;\n        if (!enemiesCount) {\n            WorldManager.gameWinCallback();\n        }\n    }\n\n    // TODO: Вынести AI к анимациям\n    moveStateUpdateCondition() {\n        // Обновляем направление движение раз в 60 / maxMoveStateUpdate сек\n        if (this.currentMoveStateCounter < this.maxMoveStateUpdate) {\n            this.currentMoveStateCounter += 1;\n            return;\n        }\n\n        this.currentMoveStateCounter = 0;\n\n        const { moveState } = this.moveAnimation;\n        moveState.isMovingDown = false;\n        moveState.isMovingLeft = false;\n        moveState.isMovingRight = false;\n        moveState.isMovingTop = false;\n        // Случайным образом выбираем направление и устанавливаем флаг\n        const direction = getRandomDirection(ENEMY_MOVE_DIRECTIONS);\n        switch (direction) {\n            case ENEMY_MOVE_DIRECTIONS.left:\n                moveState.isMovingLeft = true;\n                break;\n            case ENEMY_MOVE_DIRECTIONS.right:\n                moveState.isMovingRight = true;\n                break;\n            case ENEMY_MOVE_DIRECTIONS.down:\n                moveState.isMovingDown = true;\n                break;\n            case ENEMY_MOVE_DIRECTIONS.top:\n                moveState.isMovingTop = true;\n                break;\n            default:\n                break;\n        }\n    }\n\n    private _createEnemySprites(image?: HTMLImageElement) {\n        this.enemySprites = {\n            idle_0: {\n                sx: 368,\n                sy: 80,\n                sWidth: 16,\n                sHeight: 16,\n            },\n            idle_1: {\n                sx: 368 + 16,\n                sy: 80,\n                sWidth: 16,\n                sHeight: 16,\n            },\n            idle_2: {\n                sx: 368 + 16 * 2,\n                sy: 80,\n                sWidth: 16,\n                sHeight: 16,\n            },\n            idle_3: {\n                sx: 368 + 16 * 3,\n                sy: 80,\n                sWidth: 16,\n                sHeight: 16,\n            },\n            run_0: {\n                sx: 432,\n                sy: 80,\n                sWidth: 16,\n                sHeight: 16,\n            },\n            run_1: {\n                sx: 432 + 16,\n                sy: 80,\n                sWidth: 16,\n                sHeight: 16,\n            },\n            run_2: {\n                sx: 432 + 16 * 2,\n                sy: 80,\n                sWidth: 16,\n                sHeight: 16,\n            },\n            run_3: {\n                sx: 432 + 16 * 3,\n                sy: 80,\n                sWidth: 16,\n                sHeight: 16,\n            },\n        };\n        // Устанавливаем дефолтный спрайт\n        this.spriteConfig = {\n            image,\n            sprite: this.enemySprites.idle_0,\n            shouldFlip: false,\n        };\n    }\n}\n","import { Object2D, Object2DProps } from \"../../core/object\";\n\ntype GroundProps = Object2DProps & {\n\n};\n\nexport class Ground extends Object2D {\n    constructor(props: GroundProps) {\n        super(props);\n        this.init();\n    }\n\n    init() {\n\n    }\n}\n","import { Vector2D } from \"game/core/utils/vector\";\nimport { RectangleGeometry } from \"game/core/geometry/rectangle/rectangle\";\nimport { CanReceiveDamage } from \"game/core/animations/damage/damage\";\nimport { Object2D, Object2DProps } from \"../../core/object\";\nimport Physics, { Collidable } from \"../../core/physics/physics\";\nimport { MoveAnimation } from \"../../core/animations/move/moveAnimation\";\nimport { AnimationSprites, SpriteAnimation } from \"../../core/animations/sprite/spriteAnimation\";\nimport { AttackAnimation, CanAttack } from \"../../core/animations/attack/attack\";\nimport { Weapon } from \"./weapon\";\nimport { Wall } from \"./wall\";\nimport { Enemy } from \"./enemy\";\nimport { EventTypes } from \"../world.config\";\nimport WorldManager from \"../world.manager\";\nimport WorldEvents from \"../world.events\";\n\ntype PlayerProps = Object2DProps & {\n    geometry: RectangleGeometry,\n    maxHealth: number;\n    image?: HTMLImageElement;\n};\n\nexport class Player extends Object2D implements Collidable, CanAttack, CanReceiveDamage {\n    //\n    geometry: RectangleGeometry;\n    // Скорость передвижения пиксель/сек\n    speed: number = 150;\n    // Анимация передвижения\n    moveAnimation: MoveAnimation;\n    prevPosition: Vector2D;\n    //\n    canCollide: boolean = true;\n    // Анимация изменения Sprite\n    spriteAnimation: SpriteAnimation;\n    playerSprites: AnimationSprites;\n    // Оружие и анимация аттаки\n    weapon: Weapon;\n    attackAnimation: AttackAnimation;\n    // Здоровье\n    maxHealth: number;\n    private _health: number;\n\n    // TODO: Додумать реализацию\n    get health(): number {\n        return this._health;\n    }\n    set health(value: number) {\n        this._health = value;\n        WorldManager.playerUI?.updateHealth(this._health);\n        if (this._health <= 0) {\n            this.onDeath();\n        }\n    }\n\n    constructor(props: PlayerProps) {\n        super(props);\n\n        this.maxHealth = props.maxHealth;\n        // По дефолту полное здоровье\n        this._health = this.maxHealth;\n\n        this._createPlayerSprites(props.image);\n        this._updateWeaponState();\n        this.init();\n    }\n\n    init() {\n        // Создаем логику анимации движения\n        this.moveAnimation = new MoveAnimation({\n            speed: this.speed,\n        });\n        this.moveStateUpdateCondition();\n        // Создаем логику анимации смены sprite\n        this.spriteAnimation = new SpriteAnimation({\n            sprites: this.playerSprites,\n        });\n        // Создаем логику анимации атаки\n        this.attackAnimation = new AttackAnimation();\n    }\n\n    updateState() {\n        // Обновляем sprite\n        this.spriteConfig = this.spriteAnimation.update(this.spriteConfig, this.moveAnimation);\n        if (this.weapon.spriteConfig) {\n            this.weapon.spriteConfig.shouldFlip = this.spriteConfig?.shouldFlip;\n        }\n        // Обновляем position\n        this.prevPosition = this.position.copy();\n        this.position = this.moveAnimation.update(this.position);\n        // Обновляем оружие\n        this.weapon = this.attackAnimation.update(this.weapon, this);\n    }\n\n    // NOTE: Если скорость объекта значительно больше размера препятствия, то\n    // может случиться \"проскок\" объекта\n    onCollide(obstacle: Object2D & Collidable) {\n        if (obstacle instanceof Wall || obstacle instanceof Enemy) {\n            this.position = Physics.getNewPositionAfterWallCollision(\n                this,\n                obstacle,\n                this.moveAnimation,\n                this.prevPosition,\n            );\n        }\n    }\n\n    onDeath() {\n        WorldManager.gameOverCallback();\n    }\n\n    moveStateUpdateCondition() {\n        const { moveState } = this.moveAnimation;\n        //\n        WorldEvents.on(\n            EventTypes.ArrowLeftDown,\n            () => (moveState.isMovingLeft = true),\n        );\n        WorldEvents.on(\n            EventTypes.ArrowBottomDown,\n            () => (moveState.isMovingDown = true),\n        );\n        WorldEvents.on(\n            EventTypes.ArrowTopDown,\n            () => (moveState.isMovingTop = true),\n        );\n        WorldEvents.on(\n            EventTypes.ArrowRightDown,\n            () => (moveState.isMovingRight = true),\n        );\n        WorldEvents.on(\n            EventTypes.ArrowLeftUp,\n            () => (moveState.isMovingLeft = false),\n        );\n        WorldEvents.on(\n            EventTypes.ArrowTopUp,\n            () => (moveState.isMovingTop = false),\n        );\n        WorldEvents.on(\n            EventTypes.ArrowBottomUp,\n            () => (moveState.isMovingDown = false),\n        );\n        WorldEvents.on(\n            EventTypes.ArrowRightUp,\n            () => (moveState.isMovingRight = false),\n        );\n    }\n\n    private _updateWeaponState() {\n        WorldEvents.on(\n            EventTypes.SpaceDown,\n            () => {\n                this.weapon.active = true;\n                this.weapon.visible = true;\n            },\n        );\n    }\n\n    private _createPlayerSprites(image?: HTMLImageElement) {\n        this.playerSprites = {\n            idle_0: {\n                sx: 128,\n                sy: 107,\n                sWidth: 16,\n                sHeight: 21,\n            },\n            idle_1: {\n                sx: 128 + 16,\n                sy: 107,\n                sWidth: 16,\n                sHeight: 21,\n            },\n            idle_2: {\n                sx: 128 + 16 * 2,\n                sy: 107,\n                sWidth: 16,\n                sHeight: 21,\n            },\n            idle_3: {\n                sx: 128 + 16 * 3,\n                sy: 107,\n                sWidth: 16,\n                sHeight: 21,\n            },\n            run_0: {\n                sx: 192,\n                sy: 107,\n                sWidth: 16,\n                sHeight: 21,\n            },\n            run_1: {\n                sx: 192 + 16,\n                sy: 107,\n                sWidth: 16,\n                sHeight: 21,\n            },\n            run_2: {\n                sx: 192 + 16 * 2,\n                sy: 107,\n                sWidth: 16,\n                sHeight: 21,\n            },\n            run_3: {\n                sx: 192 + 16 * 3,\n                sy: 107,\n                sWidth: 16,\n                sHeight: 21,\n            },\n        };\n        // Устанавливаем дефолтный спрайт\n        this.spriteConfig = {\n            image,\n            sprite: this.playerSprites.idle_0,\n            shouldFlip: false,\n        };\n    }\n}\n","import { Object2D, Object2DProps } from \"../../core/object\";\nimport { Collidable } from \"../../core/physics/physics\";\n\ntype WallProps = Object2DProps & {\n\n};\n\nexport class Wall extends Object2D implements Collidable {\n    canCollide: boolean = true;\n\n    constructor(props: WallProps) {\n        super(props);\n        this.init();\n    }\n\n    init() {\n\n    }\n\n    onCollide() {\n        // console.log(`В стену ${this.id} кто-то врезался :(`);\n    }\n}\n","import { RectangleGeometry } from \"game/core/geometry/rectangle/rectangle\";\nimport { Object2D, Object2DProps } from \"../../core/object\";\nimport { Collidable } from \"../../core/physics/physics\";\n\ntype WeaponProps = Object2DProps & {\n    geometry: RectangleGeometry,\n    damage: number // Сколько жизней отнимает\n};\n\nexport class Weapon extends Object2D implements Collidable {\n    canCollide: boolean = true;\n    active: boolean; // Наносит ли урон в данный момент времени\n    damage: number;\n    attackCount: number; // Количество атак и номер текущей атаки\n\n    constructor(props: WeaponProps) {\n        super(props);\n        this.damage = props.damage;\n        this.active = false;\n        this.attackCount = 0;\n        this.init();\n    }\n\n    init() {\n\n    }\n\n    onCollide() {\n        // console.log(`В стену ${this.id} кто-то врезался :(`);\n    }\n}\n","import { Object2D, Object2DProps } from \"../../core/object\";\nimport { Sprite } from \"../world.manager\";\n\ntype HealthProps = Object2DProps & {\n    tileSetImage: HTMLImageElement\n    isHalf?: boolean // Половинка здоровья\n    isEmpty?: boolean // Половинка здоровья\n};\n\nconst HEALTH_SPITE: Sprite = {\n    sx: 288,\n    sy: 256,\n    sWidth: 16,\n    sHeight: 16,\n};\n\nconst HALF_HEALTH_SPITE: Sprite = {\n    sx: 304,\n    sy: 256,\n    sWidth: 16,\n    sHeight: 16,\n};\n\nconst EMPTY_HEALTH_SPITE: Sprite = {\n    sx: 320,\n    sy: 256,\n    sWidth: 16,\n    sHeight: 16,\n};\n\nexport class Health extends Object2D {\n    tileSetImage: HTMLImageElement;\n    isHalf: boolean;\n    isEmpty: boolean;\n\n    constructor(props: HealthProps) {\n        super(props);\n        this.isHalf = Boolean(props.isHalf);\n        this.isEmpty = Boolean(props.isEmpty);\n        this.tileSetImage = props.tileSetImage;\n        this.init();\n    }\n\n    init() {\n        this.spriteConfig = {\n            image: this.tileSetImage,\n            sprite: HEALTH_SPITE,\n        };\n        if (this.isHalf) {\n            this.spriteConfig.sprite = HALF_HEALTH_SPITE;\n        }\n        if (this.isEmpty) {\n            this.spriteConfig.sprite = EMPTY_HEALTH_SPITE;\n        }\n    }\n}\n","import { Camera } from \"../../core/camera\";\nimport { RectangleGeometry } from \"../../core/geometry/rectangle/rectangle\";\nimport { Renderer } from \"../../core/renderer\";\nimport { Color } from \"../../core/utils/color\";\nimport { Scene } from \"../../core/scene\";\nimport { LEVEL_SIZE } from \"../world.config\";\nimport { Health } from \"./health\";\n\ntype PlayerUIProps = {\n    canvas: HTMLCanvasElement,\n    tileSetImage: HTMLImageElement,\n    maxHealth: number\n};\n\nexport class PlayerUI {\n    canvas: HTMLCanvasElement;\n    renderer: Renderer;\n    camera: Camera;\n    scene: Scene;\n\n    health: number;\n    maxHealth: number;\n    score: number;\n\n    tileSetImage: HTMLImageElement;\n\n    constructor(props: PlayerUIProps) {\n        this.canvas = props.canvas;\n        this.canvas.style.position = \"absolute\";\n        this.canvas.height = window.innerHeight;\n        this.canvas.width = window.innerWidth;\n\n        this.maxHealth = props.maxHealth;\n        this.tileSetImage = props.tileSetImage;\n        this.init();\n    }\n\n    init() {\n        // Создаем Renderer\n        this.renderer = new Renderer({\n            canvas: this.canvas,\n            width: window.innerWidth,\n            height: window.innerHeight,\n        });\n        // Camera\n        this.camera = new Camera(LEVEL_SIZE * 1);\n        // Задаем бэкграунд и создаем сцену\n        // Прозрачный\n        const background = new Color(0, 0, 0, 0);\n        this.scene = new Scene(background);\n        //\n        this.updateHealth(this.maxHealth);\n    }\n\n    updateHealth(health: number) {\n        this.health = health;\n        const healthObjects: Health[] = [];\n        for (let i = 1; i <= this.maxHealth; i += 1) {\n            let isEmpty = false;\n            let isHalf = false;\n            if (i > this.health) {\n                if (i - this.health === 0.5) {\n                    isHalf = true;\n                } else {\n                    isEmpty = true;\n                }\n            }\n            const healthGeom = new RectangleGeometry(16, 16);\n            const healthObject = new Health({\n                geometry: healthGeom,\n                tileSetImage: this.tileSetImage,\n                isEmpty,\n                isHalf,\n            });\n            healthObject.position.x = (i - 1) * 16 + 5;\n            healthObject.position.y = 5;\n            healthObjects.push(healthObject);\n        }\n        this.scene.objects = this.scene.objects.filter((x) => x instanceof Health);\n        this.scene.add(healthObjects);\n    }\n\n    updateScore() {\n\n    }\n}\n","export const LEVEL_SIZE = 640; // in px\nexport const TILE_SIZE = 16; // in px\n\nexport const STEP = 1 / 60; // in sec\n\n// Список всех событий в игре\nexport enum EventTypes {\n    // Передвижение\n    ArrowLeftDown = \"ArrowLeftDown\",\n    ArrowTopDown = \"ArrowTopDown\",\n    ArrowBottomDown = \"ArrowBottomDown\",\n    ArrowRightDown = \"ArrowRightDown\",\n    ArrowLeftUp = \"ArrowLeftUp\",\n    ArrowTopUp = \"ArrowTopUp\",\n    ArrowBottomUp = \"ArrowBottomUp\",\n    ArrowRightUp = \"ArrowRightUp\",\n    // Удар\n    SpaceDown = \"SpaceDown\",\n    SpaceUp = \"SpaceUp\",\n    // Resize\n    Resize = \"Resize\",\n}\n\nexport enum KeyboardEvents {\n    // Move\n    ArrowLeft = \"ArrowLeft\",\n    ArrowUp = \"ArrowUp\",\n    ArrowDown = \"ArrowDown\",\n    ArrowRight = \"ArrowRight\",\n    // Attack\n    Space = \" \",\n}\n\nexport const TOGGLE_MENU_BUTTON = \"q\";\nexport const TOGGLE_FULLSCREEN_BUTTON = \"f\";\n","import { EventBus } from \"../core/eventBus\";\nimport { EventTypes, KeyboardEvents } from \"./world.config\";\n\ntype KeyListener = (this: Window, ev: KeyboardEvent) => any;\ntype Listener = (this: Window, ev: Event) => any;\n\nclass WorldEvents extends EventBus {\n    // События, от которых нужно отписаться\n    private _keyDownListener: KeyListener;\n    private _keyUpListener: KeyListener;\n    private _resizeListener: Listener;\n\n    init() {\n        const eventBus = this;\n\n        this._keyDownListener = (e: KeyboardEvent) => {\n            switch (e.key) {\n                case KeyboardEvents.ArrowDown:\n                    eventBus.emit(EventTypes.ArrowBottomDown);\n                    break;\n                case KeyboardEvents.ArrowLeft:\n                    eventBus.emit(EventTypes.ArrowLeftDown);\n                    break;\n                case KeyboardEvents.ArrowRight:\n                    eventBus.emit(EventTypes.ArrowRightDown);\n                    break;\n                case KeyboardEvents.ArrowUp:\n                    eventBus.emit(EventTypes.ArrowTopDown);\n                    break;\n                case KeyboardEvents.Space:\n                    eventBus.emit(EventTypes.SpaceDown);\n                    break;\n                default:\n                    break;\n            }\n        };\n\n        this._keyUpListener = (e: KeyboardEvent) => {\n            switch (e.key) {\n                case KeyboardEvents.ArrowDown:\n                    eventBus.emit(EventTypes.ArrowBottomUp);\n                    break;\n                case KeyboardEvents.ArrowLeft:\n                    eventBus.emit(EventTypes.ArrowLeftUp);\n                    break;\n                case KeyboardEvents.ArrowRight:\n                    eventBus.emit(EventTypes.ArrowRightUp);\n                    break;\n                case KeyboardEvents.ArrowUp:\n                    eventBus.emit(EventTypes.ArrowTopUp);\n                    break;\n                case KeyboardEvents.Space:\n                    eventBus.emit(EventTypes.SpaceUp);\n                    break;\n                default:\n                    break;\n            }\n        };\n\n        this._resizeListener = (e: Event) => {\n            eventBus.emit(EventTypes.Resize);\n        };\n\n        window.addEventListener(\"keydown\", this._keyDownListener);\n        window.addEventListener(\"keyup\", this._keyUpListener);\n        window.addEventListener(\"resize\", this._resizeListener);\n    }\n\n    unsubscribe() {\n        window.removeEventListener(\"keydown\", this._keyDownListener);\n        window.removeEventListener(\"keyup\", this._keyUpListener);\n        window.removeEventListener(\"resize\", this._resizeListener);\n    }\n}\n\nexport default new WorldEvents();\n","import { Vector2D } from \"../core/utils/vector\";\nimport { TILE_SIZE } from \"./world.config\";\n\n// Матрица уровня 40х40\nexport type Level = Array<Array<number>>;\n\n// Виды значений в матрице уровня\nexport enum TileTypes {\n    Ground = \"Ground\",\n    Wall = \"Wall\",\n    UI = \"UI\",\n}\n\ntype TileIndexed = {\n    [key: number]: string\n};\n\nexport const TILE_TYPES: TileIndexed = {\n    1: TileTypes.Ground,\n    2: TileTypes.Wall,\n    3: TileTypes.UI,\n};\n\nexport type Direction = {\n    name: string\n    chance: number\n};\n\nexport type Directions = {\n    left: Direction\n    right: Direction\n    down: Direction\n    top: Direction\n};\n\nexport const getRandomDirection = (directions: Directions): Direction => {\n    let min = 0;\n    const random = Math.random();\n    if (random < directions.left.chance) {\n        return directions.left;\n    }\n    min += directions.left.chance;\n    if (random < min + directions.right.chance) {\n        return directions.right;\n    }\n    min += directions.right.chance;\n    if (random < min + directions.down.chance) {\n        return directions.down;\n    }\n    min += directions.down.chance;\n    if (random < min + directions.top.chance) {\n        return directions.top;\n    }\n    return { name: \"\", chance: -1 };\n};\n\nconst fillMatrix = (level: Level, i: number, j: number, window: number): Level => {\n    const matrix = level;\n    for (let k = i; k < i + window; k += 1) {\n        for (let f = j; f < j + window; f += 1) {\n            matrix[k][f] = 1;\n        }\n    }\n    return matrix;\n};\n\n// TODO: Фикс багов генерации уровня\n/**\n    Генерирует рандомную матрицу уровня 40х40\n*/\nexport const generateRandomLevel = (): Level => {\n    // Размер доступной части level\n    const minRight = 1;\n    const maxRight = 38;\n    const minDown = 1;\n    const maxDown = 38;\n    // Level по дефолту ui background\n    let level: Level = new Array(maxRight + 2).fill(0).map((x) => new Array(maxDown + 2).fill(3));\n    // Шанс перейти на след tile\n    const directions: Directions = {\n        left: { name: \"left\", chance: 0 },\n        right: { name: \"right\", chance: 0.8 },\n        down: { name: \"down\", chance: 0.2 },\n        top: { name: \"top\", chance: 0 },\n    };\n    // Считаем сколько раз шагнули вниз, чтобы разрешить шагать вверх\n    // let downCount = 0;\n    // Окно генерации уровня\n    const pathWindow = 6;\n    // Указатели tile уровня\n    let tileHorizontal = Math.round(Math.random() * (maxRight - minRight) + minRight);\n    let tileVertical = minDown;\n    // Случайно генерируем путь уровня, выставляя 1 где можно ходить\n    while (tileVertical + pathWindow < maxDown) {\n        // Выбираем направление\n        let directon = getRandomDirection(directions);\n        // Шагаем в зависимости от направления\n        if (directon === directions.right) {\n            // Если справа есть куда шагать\n            if (tileHorizontal + 2 * pathWindow < maxRight) {\n                // Делаем шаг вправо\n                tileHorizontal += pathWindow;\n                // Обновляем уровень\n                level = fillMatrix(level, tileVertical, tileHorizontal, pathWindow);\n                // Следующий шаг со след рандомными значениями\n                directions.left.chance = 0.45;\n                directions.right.chance = 0.45;\n                directions.down.chance = 0.1;\n                directions.top.chance = 0;\n            } else { // Иначе шагаем вниз\n                directon = directions.down;\n                // След шаг только влево или вниз, тк вправо больше некуда шагать\n                directions.left.chance = 0.9;\n                directions.right.chance = 0;\n                directions.down.chance = 0.1;\n                directions.top.chance = 0;\n            }\n        }\n        if (directon === directions.down) {\n            if (tileVertical + 2 * pathWindow < maxDown) {\n                // Делаем шаг вниз\n                tileVertical += pathWindow;\n                // Шагаем вниз и даем возможность шагать влево\n                level = fillMatrix(level, tileVertical, tileHorizontal, pathWindow);\n                // Влево или вправо рандомно\n                directions.left.chance = 0.45;\n                directions.right.chance = 0.45;\n                //\n                // downCount++\n                // if(downCount === 3) {\n                //     directions.top.chance = 0.05\n                //     directions.down.chance = 0.05\n                //     downCount = 0\n                // }\n                // else {\n                //     directions.top.chance = 0\n                //     directions.down.chance = 0.1\n                // }\n            } else {\n                // Заканчиваем генерацию\n                tileVertical += pathWindow;\n            }\n        }\n        if (directon === directions.left) {\n            if (tileHorizontal - pathWindow > minRight) {\n                // Шаг влево\n                tileHorizontal -= pathWindow;\n                level = fillMatrix(level, tileVertical, tileHorizontal, pathWindow);\n                // Для след шага\n                directions.left.chance = 0.45;\n                directions.right.chance = 0.45;\n                directions.down.chance = 0.1;\n                directions.top.chance = 0;\n            } else {\n                // Иначе шагаем вниз\n                directon = directions.down;\n                // Влево больше некуда шагать\n                directions.right.chance = 0.9;\n                directions.left.chance = 0;\n                directions.down.chance = 0.1;\n                directions.top.chance = 0;\n            }\n        }\n        // if(directon === directions.top) {\n\n        // }\n    }\n    // Проставляем стены\n    for (let i = 0; i < level.length; i += 1) {\n        for (let j = 0; j < level.length; j += 1) {\n            // Ставим стены рядом с землей\n            if (level[i][j] === 1) {\n                if (level[i + 1][j] === 3) {\n                    level[i + 1][j] = 2;\n                }\n                if (level[i - 1][j] === 3) {\n                    level[i - 1][j] = 2;\n                }\n                if (level[i + 1][j - 1] === 3) {\n                    level[i + 1][j - 1] = 2;\n                }\n                if (level[i + 1][j + 1] === 3) {\n                    level[i + 1][j + 1] = 2;\n                }\n                if (level[i][j - 1] === 3) {\n                    level[i][j - 1] = 2;\n                    level[i - 1][j - 1] = 2;\n                }\n                if (level[i][j + 1] === 3) {\n                    level[i][j + 1] = 2;\n                    level[i - 1][j + 1] = 2;\n                }\n            }\n        }\n    }\n    return level;\n};\n\n/**\n    Найти первый доступный для размещения кусок земли с начала\n*/\nexport const getFirstGroundTileOnLevel = (level: Level): Vector2D | undefined => {\n    for (let i = 0; i < level.length; i += 1) {\n        for (let j = 0; j < level.length; j += 1) {\n            const number = level[i][j];\n            if (TILE_TYPES[number] === TileTypes.Ground) {\n                return new Vector2D(j * TILE_SIZE, i * TILE_SIZE);\n            }\n        }\n    }\n    return undefined;\n};\n\n/**\n    Найти первый доступный для размещения кусок земли с конца\n*/\nexport const getLastGroundTileOnLevel = (level: Level): Vector2D | undefined => {\n    for (let i = level.length - 1; i >= 0; i -= 1) {\n        for (let j = level.length - 1; j >= 0; j -= 1) {\n            const number = level[i][j];\n            if (TILE_TYPES[number] === TileTypes.Ground) {\n                return new Vector2D(j * TILE_SIZE, i * TILE_SIZE);\n            }\n        }\n    }\n    return undefined;\n};\n","import { isServer } from \"@/helpers/environment\";\n\nimport { Color } from \"../core/utils/color\";\nimport { RectangleGeometry } from \"../core/geometry/rectangle/rectangle\";\nimport { Scene } from \"../core/scene\";\n\nimport { Player } from \"./objects/player\";\nimport { Enemy } from \"./objects/enemy\";\n\nimport {\n    generateRandomLevel, getFirstGroundTileOnLevel,\n    getLastGroundTileOnLevel, Level, TileTypes, TILE_TYPES,\n} from \"./world.helpers\";\nimport { Object2D } from \"../core/object\";\nimport { Vector2D } from \"../core/utils/vector\";\nimport { LEVEL_SIZE, TILE_SIZE } from \"./world.config\";\nimport { Ground } from \"./objects/ground\";\nimport { Wall } from \"./objects/wall\";\nimport { Camera } from \"../core/camera\";\n\nimport TileSetImage from \"../../../assets/tileset.png\";\nimport { Weapon } from \"./objects/weapon\";\nimport { PlayerUI } from \"./ui/player.ui\";\n\nexport type Sprite = {\n    // Положение на изображении\n    sx: number,\n    sy: number,\n    sWidth: number,\n    sHeight: number,\n};\n\nclass WorldManager {\n    // Scene\n    scene: Scene;\n    // Camera\n    camera: Camera;\n    // Игрок\n    player: Player;\n    // Картинка Sprites\n    tileSetImage: HTMLImageElement;\n    // Уровень\n    level: Level;\n    // UI canvas и управление\n    playerUI: PlayerUI | undefined;\n    // Callbacks\n    gameOverCallback: () => void;\n    gameWinCallback: () => void;\n\n    constructor() {\n        // TODO: костыль тк в ноде нельзя new Image\n        const tileSetImage = !isServer ? new Image(512, 512) : null;\n\n        if (!tileSetImage) return;\n\n        tileSetImage.src = TileSetImage;\n        this.tileSetImage = tileSetImage;\n    }\n\n    composeLevel(\n        gameOverCallback: () => void,\n        gameWinCallback: () => void,\n    ): [Scene, Camera] {\n        this.gameOverCallback = gameOverCallback;\n        this.gameWinCallback = gameWinCallback;\n        // Camera\n        this.camera = new Camera(LEVEL_SIZE);\n        // Задаем бэкграунд и создаем сцену\n        const background = new Color(0, 0, 0);\n        this.scene = new Scene(background);\n        // Генерируем рандомный уровень\n        this.level = generateRandomLevel();\n        // Создаем стены и землю из матрицы уровня\n        const objects = this._createWallsAndGroundFromLevel(this.level);\n        // И добавляем в сцену первыми\n        this.scene.add(objects);\n        // В отдельный список добавляем объекты, которые имеют физику\n        this.scene.addObjectWithPhysics(objects.filter((x) => x instanceof Wall));\n        // Создаем Игрока\n        const [player, sword] = this._createPlayer(this.level);\n        this.player = player;\n        // Добавляем в сцену\n        this.scene.add([sword, player]);\n        this.scene.addObjectWithPhysics([sword, player]);\n        // Устанавливаем объект привязки камеры\n        this.camera.bindObject(player);\n        // Создаем противников\n        this._createEnemies();\n\n        return [this.scene, this.camera];\n    }\n\n    composeUIScene(canvas: HTMLCanvasElement) {\n        // Создаем playerUI\n        this.playerUI = new PlayerUI({\n            canvas,\n            tileSetImage: this.tileSetImage,\n            maxHealth: this.player.maxHealth,\n        });\n    }\n\n    getTilePositionFromCoordinates(coordinates: Vector2D): Vector2D {\n        const x = Math.floor(coordinates.x / TILE_SIZE) * TILE_SIZE;\n        const y = Math.floor(coordinates.y / TILE_SIZE) * TILE_SIZE;\n        return new Vector2D(x, y);\n    }\n\n    private _createWallsAndGroundFromLevel(level: Level): Array<Object2D> {\n        const objects: Array<Object2D> = [];\n        for (let i = 0; i < level.length; i += 1) {\n            for (let j = 0; j < level.length; j += 1) {\n                const number = level[i][j];\n                const position: Vector2D = new Vector2D(j * TILE_SIZE, i * TILE_SIZE);\n                if (TILE_TYPES[number] === TileTypes.Ground) {\n                    const groundGeom = new RectangleGeometry(TILE_SIZE, TILE_SIZE);\n                    const color = new Color(225, 0, 0);\n                    const ground = new Ground({ geometry: groundGeom, color });\n                    ground.position = position;\n                    // TODO: Перенести в класс\n                    const sprite: Sprite = {\n                        sx: 16,\n                        sy: 64,\n                        sWidth: 16,\n                        sHeight: 16,\n                    };\n                    ground.spriteConfig = {\n                        image: this.tileSetImage,\n                        sprite,\n                    };\n                    objects.push(ground);\n                }\n                if (TILE_TYPES[number] === TileTypes.Wall) {\n                    const wallGeom = new RectangleGeometry(TILE_SIZE, TILE_SIZE);\n                    const color = new Color(0, 225, 0);\n                    const wall = new Wall({ geometry: wallGeom, color });\n                    wall.position = position;\n                    // TODO: Перенести в класс\n                    const sprite: Sprite = {\n                        sx: 16,\n                        sy: 16,\n                        sWidth: 16,\n                        sHeight: 16,\n                    };\n                    wall.spriteConfig = {\n                        image: this.tileSetImage,\n                        sprite,\n                    };\n                    objects.push(wall);\n                }\n            }\n        }\n        return objects;\n    }\n\n    private _createPlayer(\n        level: Level,\n    ): [Player, Weapon] {\n        const playerGeom = new RectangleGeometry(16, 21);\n        const player = new Player({\n            geometry: playerGeom,\n            image: this.tileSetImage,\n            maxHealth: 6,\n        });\n        // Зададим дефолтное положение\n        const playerPosition = getFirstGroundTileOnLevel(level);\n        if (!playerPosition) {\n            throw new Error(\"Уровень сгенерирован с ошибкой\");\n        }\n        player.position = playerPosition;\n        // Создадим оружие\n        const swordGeometry = new RectangleGeometry(10, 21);\n        const sword = new Weapon({\n            geometry: swordGeometry,\n            damage: 1,\n        });\n        sword.spriteConfig = {\n            image: this.tileSetImage,\n            sprite: {\n                sx: 323,\n                sy: 26,\n                sWidth: 10,\n                sHeight: 21,\n            },\n        };\n        sword.visible = false;\n        player.weapon = sword;\n        return [player, sword];\n    }\n\n    private _createEnemies() {\n        // Создаем противника 1\n        const enemy = this._createEnemy(this.scene, this.level);\n        // Добавляем в сцену\n        this.scene.add(enemy);\n        this.scene.addObjectWithPhysics(enemy);\n        // Создаем противника 2\n        const enemy2 = this._createEnemy(this.scene, this.level);\n        // Добавляем в сцену\n        this.scene.add(enemy2);\n        this.scene.addObjectWithPhysics(enemy2);\n        // Создаем противника 3\n        const enemy3 = this._createEnemy(this.scene, this.level);\n        // Добавляем в сцену\n        this.scene.add(enemy3);\n        this.scene.addObjectWithPhysics(enemy3);\n    }\n\n    private _createEnemy(\n        scene: Scene,\n        level: Level,\n    ): Enemy {\n        const enemyGeom = new RectangleGeometry(TILE_SIZE, TILE_SIZE);\n        const enemy = new Enemy({\n            scene,\n            geometry: enemyGeom,\n            color: new Color(0, 0, 255),\n            image: this.tileSetImage,\n            maxHealth: 1,\n        });\n        // Зададим дефолтное положение\n        const enemyPosition = getLastGroundTileOnLevel(level);\n        if (!enemyPosition) {\n            throw new Error(\"Уровень сгенерирован с ошибкой\");\n        }\n        enemy.position = enemyPosition;\n        return enemy;\n    }\n}\n\n// Синглтон\nexport default new WorldManager();\n","import { Camera } from \"../core/camera\";\nimport { Renderer } from \"../core/renderer\";\nimport { Scene } from \"../core/scene\";\nimport WorldManager from \"./world.manager\";\nimport WorldEvents from \"./world.events\";\nimport { EventTypes, STEP } from \"./world.config\";\n\ntype WorldProps = {\n    canvas: HTMLCanvasElement | null\n    uiCanvas: HTMLCanvasElement | null\n    gameOverCallback: () => void\n    gameWinCallback: () => void\n};\n\n// Игровой мир\nexport class World {\n    canvas: HTMLCanvasElement | null;\n    uiCanvas: HTMLCanvasElement | null;\n    renderer: Renderer;\n    // Управление анимацией рендеринга\n    animationNumber: number | undefined;\n    scene: Scene;\n    camera: Camera;\n\n    // Callback to interact with GUI\n    gameOverCallback: () => void;\n    gameWinCallback: () => void;\n\n    /**\n       Инициализирует world и начинает анимацию\n    */\n    init(props: WorldProps) {\n        this.canvas = props.canvas;\n        this.uiCanvas = props.uiCanvas;\n        this.gameOverCallback = props.gameOverCallback;\n        this.gameWinCallback = props.gameWinCallback;\n\n        // Создаем Renderer\n        this.renderer = new Renderer({\n            canvas: this.canvas,\n            width: window.innerWidth,\n            height: window.innerHeight,\n        });\n\n        // World Manager\n        [this.scene, this.camera] = WorldManager.composeLevel(\n            this.gameOverCallback,\n            this.gameWinCallback,\n        );\n\n        // Создаем playerUI\n        if (this.uiCanvas) {\n            WorldManager.composeUIScene(this.uiCanvas);\n        }\n\n        // Инициализируем события\n        WorldEvents.init();\n        // Подписываемся на событие ресайз\n        WorldEvents.on(EventTypes.Resize, this._onResize.bind(this));\n        // Начинаем анимацию\n        this.startAnimataion();\n    }\n\n    startAnimataion() {\n        let dt = 0; // определяем текущее время\n        let last = performance.now(); // в этой переменной сохраняем время вызова предыдущего кадра\n\n        const render = () => {\n            this.animationNumber = requestAnimationFrame(() => render());\n            // определяем текущее время\n            const now = performance.now();\n            // добавляем прошедшую разницу во времени\n            dt += Math.min(1, (now - last) / 1000); // исправление проблемы неактивных вкладок\n            while (dt > STEP) {\n                // вложенный цикл может вызывать обновление состояния несколько раз подряд\n                // если прошло больше времени, чем выделено на один кадр\n                dt -= STEP;\n                // Обновляем состояние каждый STEP\n                this.renderer.prerender(this.scene);\n                // TODO: Реализовать логику camera без привязки к объекту\n                // this.camera.update()\n            }\n            // сохраняем время отрисовки последнего кадра\n            last = now;\n            // Рендерим основной мир\n            this.renderer.render(this.scene, this.camera);\n            // Рендерим UI поверх\n            WorldManager.playerUI?.renderer.render(\n                WorldManager.playerUI.scene,\n                WorldManager.playerUI.camera,\n            );\n        };\n\n        render();\n    }\n\n    stopAnimation() {\n        if (this.animationNumber) {\n            cancelAnimationFrame(this.animationNumber);\n            this.animationNumber = undefined;\n        }\n    }\n\n    private _onResize() {\n        if (this.canvas && this.animationNumber) {\n            this.canvas.height = window.innerHeight;\n            this.canvas.width = window.innerWidth;\n            if (this.uiCanvas) {\n                this.uiCanvas.height = window.innerHeight;\n                this.uiCanvas.width = window.innerWidth;\n            }\n        }\n    }\n\n    destroy() {\n        this.stopAnimation();\n        WorldEvents.unsubscribe();\n    }\n}\n","import { isServer } from \"./environment\";\n\n/* eslint-disable */\nexport const getCookie = (name: string) => {\n    if (!isServer) {\n        const matches = document.cookie.match(\n            new RegExp(\n                `(?:^|; )${\n                    name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\")\n                }=([^;]*)`,\n            ),\n        );\n\n        return matches ? decodeURIComponent(matches[1]) : undefined;\n    }\n\n    return false;\n};\n/* eslint-enable */\n\nexport const checkAccess = (): boolean => getCookie(\"isSignedIn\") === \"true\" || false;\n\nexport const checkOAuthSigned = (): boolean => getCookie(\"setSignedInOAuth\") === \"true\" || false;\n\nexport const setSigned = (value: boolean) => {\n    document.cookie = `isSignedIn=${value.toString()}`;\n};\n\nexport const setSignedOAuth = (value: boolean) => {\n    document.cookie = `setSignedInOAuth=${value.toString()}`;\n};\n\nexport const getUserIdCookie = () => getCookie(\"userId\") || \"\";\nexport const setUserIdCookie = (id: number) => document.cookie = `userId=${id.toString()}`;\n","export const isServer = !(\r\n    typeof window !== \"undefined\"\r\n    && window.document\r\n    && window.document.createElement\r\n);\n","import { useEffect } from \"react\";\n\n/**\n * Вызывает effectCallback при маунте компонента\n */\nexport const useMountEffect = (effectCallback: () => (() => void) | void) => {\n    useEffect(effectCallback, []);\n};\n","import {\n    useSelector as useReduxSelector,\n    TypedUseSelectorHook,\n} from \"react-redux\";\n\nimport { RootState } from \"store/store\";\n\nexport const useSelector: TypedUseSelectorHook<RootState> = useReduxSelector;\n","import { useEffect } from \"react\";\n\n/**\n * Вызывает effectCallback при unmount компонента\n */\nexport const useUnmountEffect = (effectCallback: () => (() => void) | void) => {\n    useEffect(() => () => {\n        effectCallback();\n    }, []);\n};\n","import React, { FC } from \"react\";\n\nimport Container from \"@/components/Container\";\nimport PageMeta from \"@/components/PageMeta\";\nimport Header from \"@/components/Header\";\nimport { routes } from \"@/config/routes/routes\";\n\nconst About: FC = () => (\n    <Container>\n        <PageMeta title=\"About\" description=\"About game\" />\n        <Header currentPath={routes.about.path} />\n    </Container>\n);\n\nexport default About;\n","export const ErrorInfo = {\n    404: \"Страница не существует\",\n    403: \"Доступ закрыт\",\n    500: \"Неизвестная ошибка\",\n};\n","import React, { FC } from \"react\";\nimport { Typography } from \"antd\";\n\nimport { Link } from \"react-router-dom\";\nimport Container from \"@/components/Container\";\nimport { routes } from \"@/config/routes/routes\";\n\nimport styles from \"./Error.module.scss\";\nimport { ErrorInfo } from \"./Error.helpers\";\n\ninterface Props {\n    status: \"404\" | \"403\" | \"500\"\n}\n\nconst Error: FC<Props> = ({ status = \"404\" }) => {\n    const {\n        container, errorContainer, title, info, back, notFound,\n    } = styles;\n\n    return (\n        <Container>\n            <div className={container}>\n                <div className={errorContainer}>\n                    <Typography className={title}>{status}</Typography>\n                    <Typography className={info}>{ErrorInfo[status]}</Typography>\n                    <Link\n                        to={status === \"403\" ? routes.signIn.path : routes.main.path}\n                        className={back}\n                    >\n                        Вернуться\n                    </Link>\n                </div>\n                <div className={notFound}/>\n            </div>\n        </Container>\n    );\n};\n\nexport default Error;\n","import {\n    useRef,\n} from \"react\";\nimport { shallowEqual, useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { useSelector } from \"@/hooks/useSelector\";\nimport { useMountEffect } from \"@/hooks/useMountEffect\";\nimport { loadForumTopics } from \"@/actions/forum.actions\";\n\nexport const useForum = () => {\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const table = useRef<HTMLDivElement>(null);\n\n    const { data, isLoading } = useSelector((state) => state.forum, shallowEqual);\n\n    useMountEffect(() => {\n        dispatch(loadForumTopics());\n    });\n\n    return {\n        data,\n        isLoading,\n        table,\n        history,\n    };\n};\n","import React, { FC, useCallback } from \"react\";\nimport { Table } from \"antd\";\nimport { ColumnsType } from \"antd/es/table\";\n\nimport Container from \"@/components/Container\";\nimport PageMeta from \"@/components/PageMeta\";\nimport Header from \"@/components/Header\";\nimport { routes } from \"@/config/routes/routes\";\nimport Button from \"@/components/Button\";\n\nimport styles from \"./Forum.module.scss\";\nimport { useForum } from \"./Forum.helpers\";\n\ninterface ForumRecord {\n    id: number,\n    title: string,\n    comments_count: number\n}\n\nconst Forum: FC = () => {\n    const {\n        data,\n        isLoading,\n        table,\n        history,\n    } = useForum();\n\n    const columns: ColumnsType<ForumRecord> = [\n        {\n            title: \"Заголовок\",\n            dataIndex: [\"data\", \"title\"],\n            render: (value: string, item: ForumRecord) => (\n                <div className={styles.title}>\n                    {item?.title}\n                </div>\n            ),\n        },\n        {\n            title: \"Кол-во сообщений\",\n            dataIndex: [\"data\", \"messagesCount\"],\n            render: (value: string, item: ForumRecord) => (\n                <div className={styles.counter}>\n                    {item?.comments_count ?? 0}\n                </div>\n            ),\n        },\n        {\n            title: \"Действия\",\n            // todo кнопки\n        },\n    ];\n\n    const handleRowClick = useCallback((record: ForumRecord) => ({\n        onClick: () => history.push(routes.topic.path.replace(\":id\", record?.id.toString())),\n    }), []);\n\n    const getRowKey = useCallback((record: ForumRecord) => record?.id, []);\n\n    const onCreate = useCallback(() => history.push(routes.topicEdit.path), []);\n\n    return (\n        <Container>\n            <PageMeta title=\"Forum\" description=\"Game forum\" />\n            <Header currentPath={routes.forum.path} />\n            <div className={styles.tableContainer}>\n                <Table\n                    ref={table}\n                    className={styles.leaderBoardTable}\n                    columns={columns}\n                    dataSource={data}\n                    rowKey={getRowKey}\n                    onRow={handleRowClick}\n                    loading={{\n                        size: \"large\",\n                        spinning: isLoading,\n                    }}\n                    scroll={{\n                        y: 400,\n                    }}\n                    pagination={false}\n                />\n            </div>\n            <div className={styles.buttonContainer}>\n                <Button type=\"primary\" onClick={onCreate}>Создать</Button>\n            </div>\n        </Container>\n    );\n};\n\nexport default Forum;\n","import React, { useState, useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { shallowEqual } from \"react-redux\";\n\nimport { World } from \"@/game/world/world\";\nimport { routes } from \"@/config/routes/routes\";\nimport { TOGGLE_FULLSCREEN_BUTTON, TOGGLE_MENU_BUTTON } from \"@/game/world/world.config\";\nimport { TEAM_SCORE, LeaderBoardRecord } from \"@/config/leaderboard\";\nimport { useSelector } from \"@/hooks/useSelector\";\nimport LeaderboardApi from \"@/api/Leaderboard/Leaderboard.api\";\n\nconst togglePointerLock = () => {\n    document.documentElement.requestPointerLock();\n};\n\nconst togglePointerUnlock = () => {\n    document.exitPointerLock();\n};\n\nconst exitFullScreen = () => {\n    if (document.fullscreenElement) {\n        document.exitFullscreen();\n    }\n};\n\nconst openFullScreen = () => {\n    if (!document.fullscreenElement) {\n        document.documentElement.requestFullscreen();\n    }\n};\n\nconst toggleFullScreen = () => {\n    if (document.fullscreenElement) {\n        exitFullScreen();\n    } else {\n        openFullScreen();\n    }\n};\n\nexport const useGame = () => {\n    const [isActive, setActive] = useState(true);\n    const [isGameOver, setGameOver] = useState(false);\n    const [isGameWin, setGameWin] = useState(false);\n    const [isPaused, setPause] = useState(false);\n    const [world] = useState(new World());\n    const canvasRef = React.useRef<HTMLCanvasElement>(null);\n    const uiCanvasRef = React.useRef<HTMLCanvasElement>(null);\n    const history = useHistory();\n    const user = useSelector((state) => state.profile.data, shallowEqual);\n\n    const createRecord = useCallback(() => {\n        const data: LeaderBoardRecord = {\n            login: user.login,\n            [TEAM_SCORE]: Math.round(Math.random() * 200),\n        };\n        LeaderboardApi.createLeaderBoardRecord(data);\n    }, []);\n\n    const callMenu = useCallback((e: KeyboardEvent) => {\n        if (e.key === TOGGLE_MENU_BUTTON) {\n            setActive(true);\n            setPause(true);\n            world.stopAnimation();\n            togglePointerUnlock();\n        }\n        if (e.key === TOGGLE_FULLSCREEN_BUTTON) {\n            toggleFullScreen();\n        }\n    }, []);\n\n    const callGameOver = useCallback(() => {\n        setActive(true);\n        setGameOver(true);\n        world.destroy();\n        togglePointerUnlock();\n        createRecord();\n    }, []);\n\n    const callGameWin = useCallback(() => {\n        setActive(true);\n        setGameWin(true);\n        world.destroy();\n        togglePointerUnlock();\n        createRecord();\n    }, []);\n\n    const setUpPauseButton = useCallback(() => {\n        document.addEventListener(\"keydown\", callMenu);\n    }, []);\n\n    const onClose = useCallback(() => {\n        setActive(false);\n        exitFullScreen();\n        history.push(routes.main.path);\n    }, []);\n\n    const onStart = useCallback(() => {\n        world.init({\n            canvas: canvasRef.current,\n            uiCanvas: uiCanvasRef.current,\n            gameOverCallback: callGameOver,\n            gameWinCallback: callGameWin,\n        });\n        setGameOver(false);\n        setGameWin(false);\n        setPause(false);\n        setActive(false);\n        togglePointerLock();\n        openFullScreen();\n    }, []);\n\n    const onResume = useCallback(() => {\n        world.startAnimataion();\n        setPause(false);\n        setActive(false);\n        togglePointerLock();\n    }, []);\n\n    const onUnmount = useCallback(() => {\n        world.destroy();\n        document.removeEventListener(\"keydown\", callMenu);\n    }, []);\n\n    return {\n        isActive,\n        isPaused,\n        canvasRef,\n        uiCanvasRef,\n        onStart,\n        onResume,\n        onClose,\n        onUnmount,\n        setUpPauseButton,\n        isGameOver,\n        isGameWin,\n    };\n};\n","import React, { FC } from \"react\";\n\nimport { useGame } from \"@/pages/Game/Game.helpers\";\nimport Menu from \"./Menu\";\nimport PageMeta from \"@/components/PageMeta\";\nimport styles from \"./Game.module.scss\";\nimport { useMountEffect } from \"@/hooks/useMountEffect\";\nimport { useUnmountEffect } from \"@/hooks/useUnmountEffect\";\n\nconst Game: FC = () => {\n    const {\n        isActive,\n        isPaused,\n        canvasRef,\n        uiCanvasRef,\n        onStart,\n        onResume,\n        onClose,\n        onUnmount,\n        setUpPauseButton,\n        isGameOver,\n        isGameWin,\n    } = useGame();\n\n    useMountEffect(() => {\n        setUpPauseButton();\n    });\n\n    useUnmountEffect(() => {\n        onUnmount();\n    });\n\n    return (\n        <>\n            <PageMeta title=\"Game\" description=\"Game page\" />\n            <div className={styles.game}>\n                <canvas ref={canvasRef} />\n                <canvas ref={uiCanvasRef} />\n                <Menu\n                    isActive={isActive}\n                    onClose={onClose}\n                    onStart={onStart}\n                    isPaused={isPaused}\n                    isGameOver={isGameOver}\n                    isGameWin={isGameWin}\n                    onResume={onResume}\n                />\n            </div>\n        </>\n    );\n};\n\nexport default Game;\n","import React, { FC } from \"react\";\nimport { Modal as CustomModal, Typography, Button } from \"antd\";\n\nimport styles from \"./Main.module.scss\";\n\nconst { Title } = Typography;\ninterface Props {\n    isActive: boolean;\n    isPaused: boolean;\n    isGameOver: boolean;\n    isGameWin: boolean;\n    onClose: () => void;\n    onStart: () => void;\n    onResume: () => void;\n}\n\nconst Menu: FC<Props> = ({\n    isActive,\n    isPaused,\n    isGameOver,\n    isGameWin,\n    onClose,\n    onStart,\n    onResume,\n}) => (\n    <CustomModal\n        title=\"Меню\"\n        visible={isActive}\n        footer={null}\n        closable={false}\n    >\n        <div className={styles.buttonContainer}>\n            {isGameOver && (\n                <Title className={styles.title} level={3}>\n                    Потрачено!\n                </Title>\n            )}\n\n            {isGameWin && (\n                <Title className={styles.title} level={3}>\n                    Победа!\n                </Title>\n            )}\n\n            <Button type=\"primary\" onClick={isPaused ? onResume : onStart}>\n                {isPaused ? \"Продолжить\"\n                    : `Начать ${(isGameOver || isGameWin) ? \"заново\" : \"игру\"}`\n                }\n            </Button>\n\n            <Button type=\"primary\" onClick={onClose}>\n                Вернуться на главную\n            </Button>\n        </div>\n    </CustomModal>\n);\n\nexport default Menu;\n","import {\n    useCallback, useEffect, useRef, useState,\n} from \"react\";\nimport { shallowEqual, useDispatch } from \"react-redux\";\nimport { loadLeaderBoard } from \"@/actions/leaderboard.actions\";\nimport { useMountEffect } from \"@/hooks/useMountEffect\";\nimport { useSelector } from \"@/hooks/useSelector\";\nimport { RECORDS_PER_PAGE } from \"@/config/leaderboard\";\nimport { isServer } from \"@/helpers/environment\";\n\nexport const useLeaderBoard = () => {\n    const [canMoveLeft, setCanMoveLeft] = useState(false);\n    const [canMoveRight, setCanMoveRight] = useState(false);\n    const [cursor, setCursor] = useState(0);\n    const dispatch = useDispatch();\n\n    const table = useRef<HTMLDivElement>(null);\n    const [tableScroll, setTableScroll] = useState(!isServer ? window?.innerHeight : 0);\n\n    const { data, isLoading } = useSelector((state) => state.leaderBoard, shallowEqual);\n\n    useMountEffect(() => {\n        dispatch(loadLeaderBoard(cursor));\n        if (table.current) {\n            const tableHeight = table.current.clientHeight;\n            const header = table.current.getElementsByClassName(\"ant-table-header\");\n            const headerHeight = header.length ? header[0].clientHeight : 0;\n            setTableScroll(tableHeight - headerHeight);\n        }\n    });\n\n    useEffect(() => {\n        const canMoveRight = data.length >= RECORDS_PER_PAGE;\n        setCanMoveRight(canMoveRight);\n        const canMoveLeft = cursor !== 0;\n        setCanMoveLeft(canMoveLeft);\n    }, [data]);\n\n    const onMoveRight = useCallback(() => {\n        const newCursor = cursor + RECORDS_PER_PAGE;\n        setCursor(newCursor);\n        dispatch(loadLeaderBoard(newCursor));\n    }, [data]);\n\n    const onMoveLeft = useCallback(() => {\n        const newCursor = cursor - RECORDS_PER_PAGE;\n        setCursor(newCursor);\n        dispatch(loadLeaderBoard(newCursor));\n    }, [data]);\n\n    return {\n        data,\n        isLoading,\n        canMoveLeft,\n        onMoveLeft,\n        canMoveRight,\n        onMoveRight,\n        table,\n        tableScroll,\n    };\n};\n","import React, { FC, useCallback } from \"react\";\nimport { Table, TablePaginationConfig } from \"antd\";\nimport { ColumnsType } from \"antd/es/table\";\nimport {\n    FilterValue,\n    SorterResult,\n    TableCurrentDataSource,\n} from \"antd/lib/table/interface\";\n\nimport Header from \"@/components/Header\";\nimport PageMeta from \"@/components/PageMeta\";\nimport Container from \"@/components/Container\";\n\nimport { routes } from \"@/config/routes/routes\";\nimport styles from \"./LeaderBoard.module.scss\";\nimport { useLeaderBoard } from \"./LeaderBoard.helpers\";\nimport { LeaderBoardRecord, TEAM_SCORE } from \"@/config/leaderboard\";\nimport Pagination from \"./components/Pagination\";\n\n// Колонки таблицы\nconst columns: ColumnsType<{ data: LeaderBoardRecord }> = [\n    {\n        title: \"Логин\",\n        dataIndex: [\"data\", \"login\"],\n        render: (value: string, item: { data: LeaderBoardRecord }) => {\n            const score = item.data[TEAM_SCORE];\n            return (\n                <div\n                    className={`${styles.nameContainer} ${\n                        score > 100 ? styles.nameActive : styles.nameBanned\n                    }`}\n                >\n                    {value}\n                </div>\n            );\n        },\n    },\n    {\n        title: \"Очки\",\n        dataIndex: [\"data\", TEAM_SCORE],\n    },\n];\n\n// Дефолтный колбэк при сортировке/пагинации/фильтрации\nconst onChange = (\n    pagination: TablePaginationConfig,\n    filters: Record<string, FilterValue | null>,\n    sorter: SorterResult<{ data: LeaderBoardRecord }> | SorterResult<any>[],\n    extra: TableCurrentDataSource<any>,\n) => {\n    console.log(\"params\", pagination, filters, sorter, extra);\n};\n\nconst LeaderBoard: FC<{}> = () => {\n    const {\n        data,\n        isLoading,\n        canMoveLeft,\n        onMoveLeft,\n        canMoveRight,\n        onMoveRight,\n        table,\n        tableScroll,\n    } = useLeaderBoard();\n\n    const getRowKey = useCallback(\n        (record: { data: LeaderBoardRecord }) => record.data.login,\n        [],\n    );\n\n    return (\n        <Container>\n            <PageMeta title=\"Leaderboard\" description=\"Leaderboard page\" />\n            <Header currentPath={routes.leaderboard.path} />\n            <div className={styles.leaderBoardContainer}>\n                <Table\n                    ref={table}\n                    className={styles.leaderBoardTable}\n                    columns={columns}\n                    dataSource={data}\n                    onChange={onChange}\n                    rowKey={getRowKey}\n                    loading={{\n                        size: \"large\",\n                        spinning: isLoading,\n                    }}\n                    scroll={{\n                        y: tableScroll,\n                    }}\n                    pagination={false}\n                />\n            </div>\n            <Pagination\n                onMoveLeft={onMoveLeft}\n                canMoveLeft={canMoveLeft}\n                onMoveRight={onMoveRight}\n                canMoveRight={canMoveRight}\n                isLoading={isLoading}\n            />\n        </Container>\n    );\n};\n\nexport default LeaderBoard;\n","import { Button } from \"antd\";\nimport React, { FC } from \"react\";\nimport { LeftOutlined, RightOutlined } from \"@ant-design/icons\";\n\nimport styles from \"./Pagination.module.scss\";\n\ntype PaginationProps = {\n    onMoveLeft: () => void\n    canMoveLeft: boolean\n    onMoveRight: () => void\n    canMoveRight: boolean\n    isLoading: boolean\n};\n\nconst Pagination: FC<PaginationProps> = (props: PaginationProps) => (\n    <div className={styles.container}>\n        <Button\n            type=\"default\"\n            icon={<LeftOutlined />}\n            onClick={props.onMoveLeft}\n            disabled={!props.canMoveLeft}\n        >\n        </Button>\n        <Button\n            className={styles.buttonRight}\n            type=\"default\"\n            icon={<RightOutlined />}\n            onClick={props.onMoveRight}\n            disabled={!props.canMoveRight}\n        >\n        </Button>\n    </div>\n);\n\nexport default Pagination;\n","import React, { FC } from \"react\";\nimport { Typography, Button } from \"antd\";\n\nimport { useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport Container from \"@/components/Container\";\nimport PageMeta from \"@/components/PageMeta\";\nimport Header from \"@/components/Header\";\n\nimport { routes } from \"@/config/routes/routes\";\nimport styles from \"./Main.module.scss\";\nimport { getProfile } from \"@/actions/profile.actions\";\nimport { useMountEffect } from \"@/hooks/useMountEffect\";\n\nconst { Text } = Typography;\n\nconst Main: FC = () => {\n    const {\n        title, info, infoContainer, container,\n    } = styles;\n\n    const dispatch = useDispatch();\n\n    useMountEffect(() => {\n        dispatch(getProfile());\n    });\n\n    return (\n        <Container>\n            <PageMeta title=\"Main\" description=\"Main page\" />\n            <Header />\n            <div className={container}>\n                <div className={infoContainer}>\n                    <Typography className={title}>\n                        <span className={styles.titleMain}>Ultimate</span>\n                        <Text type=\"secondary\"> Dungeon Crawler</Text>\n                    </Typography>\n                    <Typography className={info}>\n                        Очисти некогда великую обитель от насилия монстров и заблудших душ\n                    </Typography>\n                    <Link to={routes.game.path}>\n                        <Button type=\"primary\">\n                            Играть\n                        </Button>\n                    </Link>\n                </div>\n            </div>\n        </Container>\n    );\n};\n\nexport default Main;\n","import React from \"react\";\nimport { Typography } from \"antd\";\n\nimport { Link } from \"react-router-dom\";\nimport Container from \"@/components/Container\";\n\nimport styles from \"./Offline.module.scss\";\n\nconst Error = () => {\n    const {\n        container, errorContainer, title, info, back, notFound,\n    } = styles;\n\n    return (\n        <Container>\n            <div className={container}>\n                <div className={errorContainer}>\n                    <Typography className={title}>Вы сейчас оффлайн</Typography>\n                    <Typography className={info}>\n                        Попробуйте зайти позже\n                    </Typography>\n                    <Link to={\"/\"} className={back}>\n                        Вернуться\n                    </Link>\n                </div>\n                <div className={notFound} />\n            </div>\n        </Container>\n    );\n};\n\nexport default Error;\n","import {\n    FC, useCallback, useEffect, useState,\n} from \"react\";\nimport { Input } from \"antd\";\nimport { useForm } from \"antd/lib/form/Form\";\nimport { useDispatch, shallowEqual } from \"react-redux\";\n\nimport { PasswordData } from \"api/Profile\";\nimport { routes } from \"@/config/routes/routes\";\nimport Password from \"@/components/Password\";\nimport { useSelector } from \"@/hooks/useSelector\";\nimport { getProfile, setPassword, setProfile } from \"@/actions/profile.actions\";\nimport { SignUpData, UserInfo } from \"@/api/Auth\";\nimport { useMountEffect } from \"@/hooks/useMountEffect\";\nimport { checkOAuthSigned } from \"@/helpers/acess\";\n\nexport interface FieldSet {\n    name: string,\n    disabled: boolean,\n    required: boolean,\n    message?: string,\n    placeholder: string,\n    component: typeof Input | FC<any>,\n}\n\nconst initialFields: FieldSet[] = [\n    {\n        name: \"first_name\",\n        disabled: true,\n        required: false,\n        placeholder: \"Имя\",\n        component: Input,\n    },\n    {\n        name: \"second_name\",\n        disabled: true,\n        required: false,\n        placeholder: \"Фамилия\",\n        component: Input,\n    },\n    {\n        name: \"email\",\n        disabled: true,\n        required: true,\n        message: \"Введите эл. почту\",\n        placeholder: \"Эл. почта\",\n        component: Input,\n    },\n    {\n        name: \"phone\",\n        disabled: true,\n        required: false,\n        placeholder: \"Телефон\",\n        component: Input,\n    },\n    {\n        name: \"login\",\n        disabled: true,\n        required: true,\n        message: \"Введите логин\",\n        placeholder: \"Логин\",\n        component: Input,\n    },\n];\n\nconst passwordFields: FieldSet[] = [\n    {\n        name: \"oldPassword\",\n        disabled: true,\n        required: false,\n        message: \"Введите старый пароль\",\n        placeholder: \"Старый пароль\",\n        component: Password,\n    },\n    // todo добавить validationRules фнукцию, триггерит обязательность, если заполнен oldPassword\n    {\n        name: \"newPassword\",\n        disabled: true,\n        required: false,\n        message: \"Введите новый пароль\",\n        placeholder: \"Новый пароль\",\n        component: Password,\n    },\n];\n\nexport const useProfileForm = () => {\n    const [isEdit, setIsEdit] = useState<boolean>(false);\n    const [isOAuthSigned, setIsOAuthSigned] = useState<boolean>(false);\n    const [form] = useForm();\n    const dispatch = useDispatch();\n\n    const { data, isLoading } = useSelector((state) => state.profile, shallowEqual);\n\n    useMountEffect(() => {\n        dispatch(getProfile());\n        setIsOAuthSigned(checkOAuthSigned());\n    });\n\n    useEffect(() => {\n        form.setFieldsValue(data);\n    }, [form, data]);\n\n    const onFinish = useCallback((values: SignUpData & PasswordData) => {\n        const { oldPassword, newPassword, ...rest } = values;\n        dispatch(setProfile(rest));\n        if (oldPassword && newPassword) {\n            dispatch(setPassword({ oldPassword, newPassword }));\n        }\n    }, []);\n\n    const onFinishFailed = useCallback(\n        (errorInfo: UserInfo) => console.log(\"Failed:\", errorInfo),\n        [],\n    );\n\n    return {\n        currentPath: routes.profile.path,\n        onFinish,\n        onFinishFailed,\n        isEdit,\n        setIsEdit,\n        isOAuthSigned,\n        profile: data,\n        form,\n        fields: initialFields,\n        passwordFields,\n        isLoading,\n    };\n};\n","import React from \"react\";\nimport {\n    Form, Space, Image as AntdImage,\n} from \"antd\";\n\nimport Container from \"@/components/Container\";\nimport Header from \"@/components/Header\";\nimport PageMeta from \"@/components/PageMeta\";\nimport PageLoader from \"@/components/PageLoader\";\n\nimport FormFields from \"./components/FormFields\";\nimport FormControls from \"./components/FormControls\";\n\nimport styles from \"./Profile.module.scss\";\nimport ProfileDefault from \"../../../assets/images/default_profile.png\";\n\nimport { useProfileForm } from \"./Profile.helpers\";\n\nconst Profile = () => {\n    const {\n        currentPath,\n        onFinish,\n        isEdit,\n        setIsEdit,\n        isOAuthSigned,\n        profile,\n        form,\n        isLoading,\n    } = useProfileForm();\n\n    return (\n        <PageLoader isSpinning={isLoading}>\n            <Container>\n                <PageMeta title=\"Profile\" description=\"Profile page\" />\n                <Header currentPath={currentPath} />\n                <div className={styles.formContainer}>\n                    <Space className={styles.formInnerContainer} direction=\"vertical\" size=\"middle\">\n                        {profile.avatar && <AntdImage\n                            width={200}\n                            height={200}\n                            src={`api/v2/resources${profile.avatar}`}\n                            crossOrigin={\"use-credentials\"}\n                            fallback={ProfileDefault}\n                        />}\n                        {!profile.avatar && <div className={styles.imageEmpty}></div>}\n                        <Form\n                            name=\"profile\"\n                            form={form}\n                            initialValues={profile}\n                            layout=\"vertical\"\n                        >\n                            <FormFields isEdit={isEdit} />\n\n                            {!isOAuthSigned && (\n                                <FormControls\n                                    isEdit={isEdit}\n                                    setIsEdit={setIsEdit}\n                                    form={form}\n                                    onFinish={onFinish}\n                                />\n                            )}\n                        </Form>\n                    </Space>\n                </div>\n            </Container>\n        </PageLoader>\n    );\n};\n\nexport default Profile;\n","import React, { FC, useCallback } from \"react\";\nimport { Button, Form, Modal } from \"antd\";\nimport { EditOutlined } from \"@ant-design/icons\";\n\nimport { FormElement } from \"../../Profile.types\";\nimport styles from \"./FormControls.module.scss\";\n\nconst FormControls: FC<FormElement> = ({\n    isEdit,\n    setIsEdit,\n    onFinish,\n    form,\n}) => {\n    const handleCancel = useCallback(() => {\n        setIsEdit(!isEdit);\n        form.resetFields();\n    }, [form, isEdit]);\n\n    const handleEdit = useCallback(() => {\n        setIsEdit(!isEdit);\n    }, [isEdit]);\n\n    if (isEdit) {\n        return (\n            <>\n                <Form.Item>\n                    <Button\n                        block\n                        type=\"primary\"\n                        onClick={() => {\n                            Modal.confirm({\n                                title: \"Сохранить?\",\n                                content: \"Будут изменены данные профиля\",\n                                cancelText: \"Нет\",\n                                okText: \"Да\",\n                                onOk() {\n                                    setIsEdit(false);\n                                    onFinish(form.getFieldsValue(true));\n                                },\n                                onCancel() {\n                                    setIsEdit(false);\n                                    form.resetFields();\n                                },\n                            });\n                        }}\n                    >\n                        Сохранить\n                        <EditOutlined />\n                    </Button>\n                </Form.Item>\n                <Form.Item>\n                    <Button\n                        block\n                        className={styles.cancelButton}\n                        type=\"default\"\n                        onClick={handleCancel}\n                    >\n                        Отменить\n                    </Button>\n                </Form.Item>\n            </>\n        );\n    }\n\n    return (\n        <Form.Item>\n            <Button block type=\"primary\" onClick={handleEdit}>\n                Редактировать\n                <EditOutlined />\n            </Button>\n        </Form.Item>\n    );\n};\n\nexport default FormControls;\n","import React from \"react\";\nimport { Form } from \"antd\";\n\nimport { FieldSet } from \"../../Profile.helpers\";\n\n// TODO: либо отключить правило в eslint либо затянуть конфиг для Prettier\n// eslint-disable-next-line max-len\nexport const renderFieldSet = (fields: FieldSet[], isEdit: boolean) => fields.map((item: any, index: number) => {\n    const {\n        component: Item, name, message, required, disabled, placeholder,\n    } = item;\n    return (\n        <Form.Item\n            key={`item-${index}`}\n            name={name}\n            rules={[{ required, message }]}\n        >\n            <Item disabled={disabled && !isEdit} placeholder={placeholder} />\n        </Form.Item>\n    );\n});\n","import React, { FC } from \"react\";\n\nimport { useProfileForm } from \"../../Profile.helpers\";\nimport { FormElement } from \"../../Profile.types\";\nimport { renderFieldSet } from \"../../components/FormFields/FormFields.helpers\";\n\nconst FormFields: FC<Pick<FormElement, \"isEdit\">> = ({ isEdit }) => {\n    const { fields, passwordFields } = useProfileForm();\n    return (\n        <>\n            {renderFieldSet(fields, isEdit)}\n            {isEdit && renderFieldSet(passwordFields, isEdit)}\n        </>\n    );\n};\n\nexport default FormFields;\n","import { useHistory } from \"react-router-dom\";\nimport { useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\n\nimport { routes } from \"@/config/routes/routes\";\nimport { SignInData } from \"@/api/Auth\";\nimport { signIn } from \"@/actions/auth.actions\";\nimport { useSelector } from \"@/hooks/useSelector\";\n\nexport enum SignInFieldNames {\n    Login = \"login\",\n    Password = \"password\",\n}\n\nexport const useSignInForm = () => {\n    const history = useHistory();\n    const dispatch = useDispatch();\n    const isLoading = useSelector((state) => state.auth.isLoading);\n\n    const onFinish = useCallback(async (values: SignInData) => {\n        dispatch(signIn(values, history));\n    }, []);\n\n    const onFinishFailed = (errorInfo: Error) => console.log(\"Failed:\", errorInfo);\n\n    return {\n        currentPath: routes.signIn.path,\n        onFinish,\n        onFinishFailed,\n        isLoading,\n    };\n};\n","import React, { FC } from \"react\";\nimport { Input, Button, Form } from \"antd\";\n\nimport { UserOutlined } from \"@ant-design/icons\";\nimport Container from \"@/components/Container\";\nimport PageMeta from \"@/components/PageMeta\";\nimport Password from \"@/components/Password\";\nimport Header from \"@/components/Header\";\nimport PageLoader from \"@/components/PageLoader\";\n\nimport { routes } from \"@/config/routes/routes\";\nimport styles from \"./SignIn.module.scss\";\nimport { SignInFieldNames, useSignInForm } from \"./SignIn.helpers\";\nimport YandexSignIn from \"./YandexSignIn/YandexSignIn.view\";\n\nconst SignIn: FC = () => {\n    const { onFinish, onFinishFailed, isLoading } = useSignInForm();\n\n    return (\n        <PageLoader isSpinning={isLoading}>\n            <Container>\n                <PageMeta title=\"SignIn\" description=\"SignIn page\" />\n                <Header currentPath={routes.signIn.path} />\n                <div className={styles.formContainer}>\n                    <Form\n                        name=\"signIn\"\n                        onFinish={onFinish}\n                        onFinishFailed={() => onFinishFailed}\n                        layout=\"vertical\"\n                    >\n                        <Form.Item\n                            name={SignInFieldNames.Login}\n                            rules={[\n                                {\n                                    required: true,\n                                    message: \"Введите логин\",\n                                },\n                            ]}\n                        >\n                            <Input\n                                placeholder=\"логин\"\n                                prefix={<UserOutlined />}\n                            />\n                        </Form.Item>\n                        <Form.Item\n                            name={SignInFieldNames.Password}\n                            rules={[\n                                {\n                                    required: true,\n                                    message: \"Введите пароль\",\n                                },\n                            ]}\n                        >\n                            <Password placeholder=\"пароль\" />\n                        </Form.Item>\n                        <Form.Item>\n                            <Button block type=\"primary\" htmlType=\"submit\">\n                                Войти\n                            </Button>\n                        </Form.Item>\n                        <Form.Item>\n                            <YandexSignIn/>\n                        </Form.Item>\n                    </Form>\n                </div>\n            </Container>\n        </PageLoader>\n    );\n};\n\nexport default SignIn;\n","import React, { FC, useCallback } from \"react\";\n// import { useDispatch } from \"react-redux\";\nimport { LoginOutlined } from \"@ant-design/icons\";\n\nimport Button from \"@/components/Button\";\n// import api from \"@/api/OAuth\";\nimport { apiRoutes } from \"@/config/apiRoutes\";\n// import { getProfile } from \"@/actions/profile.actions\";\n\nimport styles from \"./YandexSignIn.module.scss\";\n\nconst { providerURLRoot, redirectURI, udcClientId } = apiRoutes.oauth;\n\nconst providerURL = (clientId: string) => `${providerURLRoot}&client_id=${clientId}\n&redirect_uri=${redirectURI}`;\n\nconst YandexSignIn: FC = () => {\n    // const dispatch = useDispatch();\n\n    const onClick = useCallback(async () => {\n        // api.getServiceId(redirectURI)\n        //     .then((serviceId) => {\n        //         if (serviceId) {\n        //             window.location.replace(providerURL(serviceId));\n        //         }\n        //         dispatch(getProfile());\n        //     })\n        //     .catch((error) => {\n        //         console.log(error);\n        //     });\n        window.location.replace(providerURL(udcClientId));\n    }, []);\n\n    return (\n        <Button className={styles.link} onClick={onClick} >\n            <LoginOutlined className={styles.icon}/>\n            Войти через Яндекс\n        </Button>\n    );\n};\n\nexport default YandexSignIn;\n","import { useHistory } from \"react-router-dom\";\n\nimport { routes } from \"@/config/routes/routes\";\nimport api, { SignUpData } from \"@/api/Auth\";\n\nenum SignUpFieldNames {\n    SecondName = \"second_name\",\n    FirstName = \"first_name\",\n    Email = \"email\",\n    Phone = \"phone\",\n    Login = \"login\",\n    Password = \"password\",\n}\n\nexport const useSignUp = () => {\n    const history = useHistory();\n\n    const fieldSet = [\n        {\n            name: SignUpFieldNames.SecondName,\n            rules: [{ required: true, message: \"Введите фамилию\" }],\n            placeholder: \"Фамилия\",\n        },\n        {\n            name: SignUpFieldNames.FirstName,\n            rules: [{ required: true, message: \"Введите имя\" }],\n            placeholder: \"Имя\",\n        },\n        {\n            name: SignUpFieldNames.Email,\n            rules: [{ required: true, message: \"Введите почту\" }],\n            placeholder: \"Эл. почта\",\n        },\n        {\n            name: SignUpFieldNames.Phone,\n            rules: [{ required: true, message: \"Введите телефон\" }],\n            placeholder: \"Телефон\",\n        },\n        {\n            name: SignUpFieldNames.Login,\n            rules: [{ required: true, message: \"Введите логин\" }],\n            placeholder: \"Логин\",\n        },\n        {\n            name: SignUpFieldNames.Password,\n            rules: [{ required: true, message: \"Введите пароль\" }],\n            placeholder: \"Пароль\",\n            type: \"password\",\n        },\n    ];\n\n    const onFinish = async (values: SignUpData) => {\n        const response = await api.signUp(values);\n        if (response) {\n            history.push(routes.signIn.path);\n        }\n    };\n\n    const onFinishFailed = (errorInfo: Error) => console.log(\"Failed:\", errorInfo);\n\n    return {\n        currentPath: routes.signUp.path,\n        fieldSet,\n        onFinish,\n        onFinishFailed,\n    };\n};\n","import React, { FC } from \"react\";\nimport { Input, Button, Form } from \"antd\";\n\nimport Container from \"@/components/Container\";\nimport Header from \"@/components/Header\";\n\nimport { routes } from \"@/config/routes/routes\";\nimport styles from \"./SignUp.module.scss\";\nimport { useSignUp } from \"./SignUp.helpers\";\n\nconst SignUp: FC = () => {\n    const {\n        fieldSet, onFinish, onFinishFailed,\n    } = useSignUp();\n\n    return (\n        <Container>\n            <Header currentPath={routes.signUp.path} />\n            <div className={styles.formContainer}>\n                <Form\n                    name=\"signUp\"\n                    onFinish={onFinish}\n                    onFinishFailed={() => onFinishFailed}\n                    layout=\"vertical\"\n                >\n                    {fieldSet.map((set, index) => (\n                        <Form.Item\n                            name={set.name}\n                            rules={set.rules}\n                            key={`${set.name}-${index}`}\n                        >\n                            <Input\n                                type={set.type ?? \"\"}\n                                placeholder={set.placeholder}\n                            />\n                        </Form.Item>\n                    ))}\n                    <Form.Item>\n                        <Button block type=\"primary\" htmlType=\"submit\">\n                            Зарегистрироваться\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </div>\n        </Container>\n    );\n};\n\nexport default SignUp;\n","import React, { FC } from \"react\";\nimport { Comment } from \"antd\";\n\nimport styles from \"./Comment.module.scss\";\n\ninterface Props {\n    author?: string,\n    message?: string,\n}\n\nconst CommentContainer: FC<Props> = ({ author, message }) => (\n    <Comment\n        className={styles.comment}\n        author={<a>{author ?? \"author\"}</a>}\n        content={\n            <p>{message ?? \"Say what?\"}</p>\n        }\n    />\n);\n\nexport default CommentContainer;\n","import React, { FC, useCallback, useState } from \"react\";\nimport { Input } from \"antd\";\n\nimport styles from \"./CommentInput.module.scss\";\n\nimport Button from \"@/components/Button\";\n\nconst { TextArea } = Input;\n\nconst CommentInput: FC = () => {\n    const [message, setMessage] = useState(\"\");\n\n    const handleInput = useCallback((e: any) => setMessage(e.target.value), []);\n    const handleSubmit = useCallback(() => console.log(message), [message]);\n\n    return (\n        <>\n            <div className={styles.container}>\n                <TextArea maxLength={100} rows={3} onChange={handleInput} value={message} />\n            </div>\n            <div className={styles.buttonContainer} >\n                <Button type=\"primary\" onClick={handleSubmit}>Отправить</Button>\n            </div>\n        </>\n    );\n};\n\nexport default CommentInput;\n","import { shallowEqual, useDispatch } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\n\nimport { useSelector } from \"@/hooks/useSelector\";\nimport { useMountEffect } from \"@/hooks/useMountEffect\";\nimport { loadTopic } from \"@/actions/topic.actions\";\n\nexport const useTopic = () => {\n    const dispatch = useDispatch();\n    const { data, isLoading } = useSelector((state) => state.topic, shallowEqual);\n    const { pathname } = useLocation();\n\n    const id = pathname.split(\"/\").slice(-1)[0];\n\n    useMountEffect(() => {\n        dispatch(loadTopic(Number(id)));\n    });\n\n    return {\n        topic: data,\n        isLoading,\n    };\n};\n","import React, { FC } from \"react\";\nimport { Typography } from \"antd\";\n\nimport Container from \"@/components/Container\";\nimport PageMeta from \"@/components/PageMeta\";\nimport Header from \"@/components/Header\";\nimport { routes } from \"@/config/routes/routes\";\nimport PageLoader from \"@/components/PageLoader\";\n\nimport styles from \"./Topic.module.scss\";\nimport CommentContainer from \"./Comment\";\nimport CommentInput from \"./CommentInput\";\nimport { useTopic } from \"./Topic.helpers\";\n\nconst { Title, Text } = Typography;\n\nconst Topic: FC = () => {\n    const { topic, isLoading } = useTopic();\n    const { title, body } = topic;\n\n    return (\n        <PageLoader isSpinning={isLoading}>\n            <Container>\n                <PageMeta title=\"Topic\" description=\"About game\" />\n                <Header currentPath={routes.topic.path} />\n                <div className={styles.container}>\n                    <Title level={2}>{title}</Title>\n                    <Text>{body}</Text>\n                    <div className={styles.comments}>\n                        <CommentContainer/>\n                        <CommentContainer/>\n                        <CommentContainer/>\n                    </div>\n                    <CommentInput/>\n                </div>\n            </Container>\n        </PageLoader>\n    );\n};\n\nexport default Topic;\n","import { useHistory, useLocation } from \"react-router-dom\";\nimport { useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\n\nimport { routes } from \"@/config/routes/routes\";\nimport { createTopic, updateTopic } from \"@/actions/topic.actions\";\nimport { useSelector } from \"@/hooks/useSelector\";\nimport { TopicEditData } from \"@/reducers/topic.reducer\";\n\nexport enum TopicFieldNames {\n    Title = \"title\",\n    Body = \"body\",\n}\n\nexport const useTopicForm = () => {\n    const history = useHistory();\n    const dispatch = useDispatch();\n    const isLoading = useSelector((state) => state.topic.isLoading);\n    const { pathname } = useLocation();\n\n    const id = pathname.split(\"/\").slice(-1)[0];\n    const hasId = !isNaN(Number(id));\n\n    const submitLabel = hasId ? \"Редактировать\" : \"Создать\";\n    const titleLabel = hasId ? \"Редактирование темы\" : \"Создание темы\";\n\n    console.log(hasId);\n\n    const onFinish = useCallback(async (data: TopicEditData) => {\n        if (hasId) {\n            dispatch(updateTopic(Number(id), data));\n        } else {\n            dispatch(createTopic(data, history));\n        }\n    }, []);\n\n    const onFinishFailed = (errorInfo: Error) => console.log(\"Failed:\", errorInfo);\n\n    return {\n        currentPath: routes.topicEdit.path,\n        onFinish,\n        onFinishFailed,\n        isLoading,\n        submitLabel,\n        titleLabel,\n    };\n};\n","import React, { FC } from \"react\";\nimport {\n    Button, Form, Input as AntInput, Typography,\n} from \"antd\";\nimport { RightOutlined } from \"@ant-design/icons\";\n\nimport Container from \"@/components/Container\";\nimport PageMeta from \"@/components/PageMeta\";\nimport Header from \"@/components/Header\";\nimport PageLoader from \"@/components/PageLoader\";\nimport Input from \"@/components/Input\";\n\nimport styles from \"./TopicEdit.module.scss\";\nimport { TopicFieldNames, useTopicForm } from \"./TopicEdit.helpers\";\n\nconst { TextArea } = AntInput;\n\nconst TopicEdit: FC = () => {\n    const {\n        isLoading, onFinish, onFinishFailed, currentPath, submitLabel, titleLabel,\n    } = useTopicForm();\n\n    return (\n        <PageLoader isSpinning={isLoading}>\n            <Container>\n                <PageMeta title=\"Topic\" description=\"About game\" />\n                <Header currentPath={currentPath} />\n                <div className={styles.container}>\n                    <Typography className={styles.title}>{titleLabel}</Typography>\n                    <Form\n                        name=\"topicCreate\"\n                        onFinish={onFinish}\n                        onFinishFailed={() => onFinishFailed}\n                        layout=\"vertical\"\n                    >\n                        <Form.Item\n                            name={TopicFieldNames.Title}\n                            rules={[\n                                {\n                                    required: true,\n                                    message: \"Введите заголовок топика\",\n                                },\n                            ]}\n                        >\n                            <Input\n                                placeholder=\"заголовок\"\n                                prefix={<RightOutlined />}\n                            />\n                        </Form.Item>\n                        <Form.Item\n                            name={TopicFieldNames.Body}\n                            rules={[\n                                {\n                                    required: true,\n                                    message: \"Введите описание топика\",\n                                },\n                            ]}\n                        >\n                            <TextArea maxLength={100} rows={6} placeholder=\"описание\" />\n                        </Form.Item>\n                        <Form.Item>\n                            <Button block type=\"primary\" htmlType=\"submit\">\n                                {submitLabel}\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </div>\n            </Container>\n        </PageLoader>\n    );\n};\n\nexport default TopicEdit;\n","import {\n    LOADING,\n    SIGN_IN,\n    SIGN_OUT,\n    SIGN_IN_OAUTH,\n} from \"@/actions/types/auth.types\";\nimport { checkAccess } from \"@/helpers/acess\";\nimport { AuthAction, AuthStages } from \"@/actions/auth.actions\";\n\nexport interface AuthState {\n    isSignedIn: boolean;\n    isSignedInOAuth: boolean;\n    isLoading: boolean;\n    stage: AuthStages;\n}\n\nexport const initialState: AuthState = {\n    isSignedIn: checkAccess(),\n    isSignedInOAuth: checkAccess(),\n    isLoading: false,\n    stage: AuthStages.INIT,\n};\n\n/* eslint-disable @typescript-eslint/default-param-last */\nexport const authReducer = (\n    state: AuthState = initialState,\n    action: AuthAction,\n) => {\n    switch (action.type) {\n        case SIGN_IN:\n            return {\n                isSignedIn: true,\n                isSignedInOAuth: false,\n                isLoading: false,\n                stage: AuthStages.DONE,\n            };\n        case SIGN_IN_OAUTH:\n            return {\n                isSignedIn: false,\n                isSignedInOAuth: true,\n                isLoading: false,\n                stage: AuthStages.DONE,\n            };\n        case SIGN_OUT:\n            return {\n                isSignedIn: false,\n                isSignedInOAuth: false,\n                isLoading: false,\n                stage: AuthStages.DONE,\n            };\n        case LOADING:\n            return {\n                isSignedIn: false,\n                isSignedInOAuth: false,\n                isLoading: action.payload.isLoading,\n                stage: AuthStages.LOADING,\n            };\n        default:\n            return state;\n    }\n};\n/* eslint-enable @typescript-eslint/default-param-last */\n","import { ForumAction } from \"@/actions/forum.actions\";\nimport { FORUM_LOAD, FORUM_SET_LOADING } from \"@/actions/types/forum.types\";\n\nexport interface ForumState {\n    isLoading: boolean\n    data: any\n}\n\nexport const FORUM_INIT_STATE: ForumState = {\n    isLoading: false,\n    data: [],\n};\n\n/* eslint-disable @typescript-eslint/default-param-last */\nexport const forumReducer = (\n    state: ForumState = FORUM_INIT_STATE,\n    action: ForumAction,\n): ForumState => {\n    switch (action.type) {\n        case FORUM_LOAD:\n            return {\n                ...state,\n                data: action.payload.data,\n            };\n        case FORUM_SET_LOADING:\n            return {\n                ...state,\n                isLoading: action.payload.isLoading,\n            };\n        default:\n            return state;\n    }\n};\n/* eslint-enable @typescript-eslint/default-param-last */\n","import { LeaderBoardAction } from \"@/actions/leaderboard.actions\";\nimport { LOAD, SET_LOADING } from \"@/actions/types/leaderboard.types\";\nimport { LeaderBoardData } from \"@/config/leaderboard\";\n\nexport interface LeaderBoardState {\n    isLoading: boolean\n    data: LeaderBoardData\n}\n\nexport const LEADERBOARD_INIT_STATE: LeaderBoardState = {\n    isLoading: false,\n    data: [],\n};\n\n/* eslint-disable @typescript-eslint/default-param-last */\nexport const leaderBoardReducer = (\n    state: LeaderBoardState = LEADERBOARD_INIT_STATE,\n    action: LeaderBoardAction,\n): LeaderBoardState => {\n    switch (action.type) {\n        case LOAD:\n            return {\n                ...state,\n                data: action.payload.data,\n            };\n        case SET_LOADING:\n            return {\n                ...state,\n                isLoading: action.payload.isLoading,\n            };\n        default:\n            return state;\n    }\n};\n/* eslint-enable @typescript-eslint/default-param-last */\n","import { ProfileAction, ProfileStages } from \"@/actions/profile.actions\";\nimport {\n    GET_PROFILE,\n    PROFILE_LOADING,\n    SET_PASSWORD,\n    SET_PROFILE,\n} from \"@/actions/types/profile.types\";\n\nexport interface ProfileState {\n    data: {\n        id: number;\n        second_name: string;\n        first_name: string;\n        email: string;\n        phone: string;\n        login: string;\n        password: string;\n        avatar: string;\n    };\n    isLoading: boolean;\n    stage: ProfileStages;\n}\n\nconst initialState: ProfileState = {\n    data: {\n        id: 0,\n        second_name: \"\",\n        first_name: \"\",\n        email: \"\",\n        phone: \"\",\n        login: \"\",\n        password: \"\",\n        avatar: \"\",\n    },\n    isLoading: false,\n    stage: ProfileStages.INIT,\n};\n\n/* eslint-disable @typescript-eslint/default-param-last */\nexport const profileReducer = (\n    state: ProfileState = initialState,\n    action: ProfileAction,\n) => {\n    switch (action.type) {\n        case GET_PROFILE:\n            return {\n                data: { ...action.payload.data },\n                isLoading: false,\n                stage: ProfileStages.DONE,\n            };\n        case SET_PROFILE:\n            return {\n                data: { ...action.payload.data },\n                isLoading: false,\n                stage: ProfileStages.DONE,\n            };\n        case SET_PASSWORD:\n            return {\n                ...state,\n                isLoading: false,\n                stage: ProfileStages.DONE,\n            };\n        case PROFILE_LOADING:\n            return {\n                data: {},\n                isLoading: action.payload.isLoading,\n                stage: ProfileStages.LOADING,\n            };\n        default:\n            return state;\n    }\n};\n/* eslint-enable @typescript-eslint/default-param-last */\n","import { ThemeAction } from \"@/actions/theme.actions\";\nimport { Theme } from \"@/api/Theme/Theme.api\";\nimport { SET_THEME } from \"@/actions/types/theme.types\";\n\nconst initialState: Theme = null;\n\n/* eslint-disable @typescript-eslint/default-param-last */\nexport const themeReducer = (\n    state: Theme = initialState,\n    action: ThemeAction,\n) => {\n    switch (action.type) {\n        case SET_THEME:\n            return action.payload;\n        default:\n            return state;\n    }\n};\n/* eslint-enable @typescript-eslint/default-param-last */\n","import { TopicAction } from \"@/actions/topic.actions\";\nimport { TOPIC_LOAD, TOPIC_SET_LOADING } from \"@/actions/types/topic.types\";\n\nexport interface TopicEditData {\n    title: string,\n    body: string,\n}\n\ninterface TopicData extends TopicEditData {\n    id: number,\n    created_at: string,\n    user_id: number,\n    comments_count: number | null,\n}\n\nexport interface TopicState {\n    isLoading: boolean\n    data: TopicData\n}\n\nexport const TOPIC_INIT_STATE: TopicState = {\n    isLoading: false,\n    data: {\n        id: 0,\n        title: \"\",\n        body: \"\",\n        created_at: \"\",\n        user_id: 0,\n        comments_count: null,\n    },\n};\n\n/* eslint-disable @typescript-eslint/default-param-last */\nexport const topicReducer = (\n    state: TopicState = TOPIC_INIT_STATE,\n    action: TopicAction,\n): TopicState => {\n    switch (action.type) {\n        case TOPIC_LOAD:\n            return {\n                ...state,\n                data: action.payload.data,\n            };\n        case TOPIC_SET_LOADING:\n            return {\n                ...state,\n                isLoading: action.payload.isLoading,\n            };\n        default:\n            return state;\n    }\n};\n/* eslint-enable @typescript-eslint/default-param-last */\n","import { Request, Response } from \"express\";\nimport { ValidationError } from \"sequelize\";\nimport {\n    addDBTopic, getDBTopics, updateDBTopic, removeDBTopic, getDBTopic,\n} from \"@/server/db/forum/actions/topics\";\nimport { createSafeDecorator } from \"@/server/utils/safeDecorator\";\nimport { HttpStatuses } from \"@/server/utils/httpStatuses\";\n\nconst topicErrorHandler = (err: unknown, res: Response) => {\n    if (err instanceof ValidationError) {\n        return res.status(HttpStatuses.BadRequest).send({ message: \"Неверный формат данных\" });\n    }\n    return res.status(HttpStatuses.ServerError).send({ message: \"Ошибка сервера\" });\n};\nconst Safe = createSafeDecorator(topicErrorHandler);\n\nclass TopicController {\n    @Safe\n    async get(req: Request, res: Response) {\n        const topics = await getDBTopics();\n        if (!topics || !topics.length) {\n            return res.status(HttpStatuses.BadRequest).send({ message: \"Топики отсутствуют\" });\n        }\n        return res.status(HttpStatuses.OK).send(topics);\n    }\n\n    @Safe\n    async getTopic(req: Request, res: Response) {\n        const id = Number(req.params.id);\n        const topic = await getDBTopic(id);\n        if (!topic) {\n            return res.status(HttpStatuses.BadRequest).send({ message: \"Топики отсутствуют\" });\n        }\n        return res.status(HttpStatuses.OK).send(topic);\n    }\n\n    @Safe\n    async add(req: Request, res: Response) {\n        const topic = await addDBTopic(req.body);\n        if (!topic) {\n            return res.status(HttpStatuses.BadRequest).send(\n                { message: \"Ошибка добавления топика\" },\n            );\n        }\n        return res.status(HttpStatuses.Created).send(topic);\n    }\n\n    @Safe\n    async update(req: Request, res: Response) {\n        const id = Number(req.params.id);\n        const resultArray = await updateDBTopic(id, req.body);\n        const result = resultArray[0];\n        if (!result) {\n            return res.status(HttpStatuses.BadRequest).send({ message: \"Ошибка изменения топика\" });\n        }\n        const topic = await getDBTopic(id);\n        return res.status(HttpStatuses.OK).send(topic);\n    }\n\n    @Safe\n    async delete(req: Request, res: Response) {\n        const id = Number(req.params.id);\n        const result = await removeDBTopic(id);\n        if (!result) {\n            return res.status(HttpStatuses.BadRequest).send({ message: \"Ошибка удаления топика\" });\n        }\n        return res.status(HttpStatuses.OK).sendStatus(HttpStatuses.OK);\n    }\n}\n\nexport default new TopicController();\n","export { default as TopicController } from \"./forum/topics\";\nexport { default as ThemesController } from \"./themes/themes\";\n","import { Request, Response } from \"express\";\nimport { ValidationError } from \"sequelize\";\nimport { updateDBTheme, getDBTheme, addDBTheme } from \"@/server/db/themes/actions/themes\";\nimport { createSafeDecorator } from \"@/server/utils/safeDecorator\";\nimport { HttpStatuses } from \"@/server/utils/httpStatuses\";\n\nconst themeErrorHandler = (err: unknown, res: Response) => {\n    console.log(err);\n    if (err instanceof ValidationError) {\n        return res.status(HttpStatuses.BadRequest).send({ message: \"Неверный формат данных\" });\n    }\n    return res.status(HttpStatuses.ServerError).send({ message: \"Ошибка сервера\" });\n};\n\nconst Safe = createSafeDecorator(themeErrorHandler);\n\nclass ThemeController {\n    @Safe\n    async get(req: Request, res: Response) {\n        const id = Number(req.params.id);\n        const theme = await getDBTheme(id);\n        if (!theme) {\n            // Если нет, то создаем\n            const newTheme = await addDBTheme({\n                user_id: id,\n                theme: \"light\",\n            });\n            if (!newTheme) {\n                return res.status(HttpStatuses.BadRequest).send(\n                    { message: \"Ошибка сохранения темы\" },\n                );\n            }\n            return res.status(HttpStatuses.OK).send(newTheme);\n        }\n        return res.status(HttpStatuses.OK).send(theme);\n    }\n\n    @Safe\n    async update(req: Request, res: Response) {\n        const id = Number(req.params.id);\n        // Сначала проверяем существует ли такой юзер\n        const theme = await getDBTheme(id);\n        if (!theme) {\n            // Если нет, то создаем\n            const newTheme = await addDBTheme({\n                user_id: id,\n                theme: req.body,\n            });\n            if (!newTheme) {\n                return res.status(HttpStatuses.BadRequest).send(\n                    { message: \"Ошибка сохранения темы\" },\n                );\n            }\n            return res.status(HttpStatuses.OK).send(newTheme);\n        }\n        // Если есть, то обновляем\n        const resultArray = await updateDBTheme(id, req.body);\n\n        const result = resultArray[0];\n        if (!result) {\n            return res.status(HttpStatuses.BadRequest).send({ message: \"Ошибка изменения темы\" });\n        }\n\n        // Возвращаем обновленную тему\n        const updatedTheme = await getDBTheme(id);\n        return res.status(HttpStatuses.OK).send(updatedTheme);\n    }\n\n    @Safe\n    async add(req: Request, res: Response) {\n        const currentTheme = await addDBTheme(req.body);\n\n        if (!currentTheme) {\n            return res.status(HttpStatuses.BadRequest).send({ message: \"Ошибка сохранения темы\" });\n        }\n        return res.status(HttpStatuses.OK).send(currentTheme);\n    }\n}\n\nexport default new ThemeController();\n","import { Topic } from \"../models/topic\";\n\nexport const getDBTopics = (): Promise<any> => Topic.findAll();\n\nexport const getDBTopic = (id: number): Promise<any> => Topic.findOne({ where: { id } });\n\n// TODO: Разобраться с типами\nexport const addDBTopic = (topic: any): Promise<any> => {\n    const data = {\n        title: topic?.title,\n        body: topic?.body,\n        user_id: topic?.user_id,\n    } as any;\n    return Topic.create(data);\n};\n\nexport const updateDBTopic = (id: number, topic: any): Promise<any> => {\n    const data = {} as any;\n    if (topic?.title) data.title = topic.title;\n    if (topic?.body) data.body = topic.body;\n    if (topic?.user_id) data.user_id = topic.user_id;\n    return Topic.update(data, { where: { id } });\n};\n\nexport const removeDBTopic = (id: number): Promise<any> => Topic.destroy({\n    where: { id },\n});\n","import {\n    AllowNull, AutoIncrement, Column,\n    DataType, Length, Model, PrimaryKey, Table,\n} from \"sequelize-typescript\";\n\nconst MAX_LENGTH = 512;\n\n@Table({\n    timestamps: true,\n    createdAt: \"created_at\",\n    updatedAt: false,\n    tableName: \"topics\",\n})\nexport class Topic extends Model<Topic> {\n    @AutoIncrement\n    @PrimaryKey\n    @Column(DataType.INTEGER)\n        id: number;\n\n    @Length({ max: MAX_LENGTH })\n    @AllowNull(false)\n    @Column(DataType.STRING)\n        title: string;\n\n    @AllowNull(false)\n    @Column(DataType.STRING)\n        body: string;\n\n    @AllowNull(true)\n    @Column(DataType.INTEGER)\n        user_id: number;\n\n    @AllowNull(true)\n    @Column(DataType.INTEGER)\n        comments_count: number;\n}\n","import { Sequelize, SequelizeOptions } from \"sequelize-typescript\";\nimport { Topic } from \"./forum/models/topic\";\nimport { Theme } from \"./themes/models/themes\";\n\nexport const createSequelize = (): Sequelize => {\n    const sequelizeOptions: SequelizeOptions = {\n        host: process.env.DB_HOST,\n        port: Number(process.env.DB_PORT) || 5432,\n        username: process.env.DB_USERNAME,\n        password: process.env.DB_PASSWORD,\n        database: process.env.DB_NAME,\n        dialect: \"postgres\",\n    };\n\n    const db = new Sequelize(sequelizeOptions);\n    db.addModels([Topic, Theme]);\n\n    return db;\n};\n","import { Theme } from \"../models/themes\";\n\nexport const getDBTheme = (id: number): Promise<any> => Theme.findOne({ where: { user_id: id } });\n\nexport const updateDBTheme = (id: number, body: any): Promise<any> => {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const data = {\n        theme: body.theme,\n        user_id: id,\n    };\n    return Theme.update(data, { where: { user_id: id } });\n};\n\nexport const addDBTheme = (body: any): Promise<any> => Theme.create(body);\n","import {\n    AllowNull, AutoIncrement, Column,\n    DataType, Model, PrimaryKey, Table,\n} from \"sequelize-typescript\";\n\n@Table({\n    timestamps: false,\n    tableName: \"themes\",\n})\nexport class Theme extends Model<Theme> {\n    @AutoIncrement\n    @PrimaryKey\n    @Column(DataType.INTEGER)\n        id: number;\n\n    @AllowNull(true)\n    @Column(DataType.STRING)\n        theme: string;\n\n    @AllowNull(true)\n    @Column(DataType.INTEGER)\n        user_id: number;\n}\n","import { createProxyMiddleware } from \"http-proxy-middleware\";\nimport { root, base } from \"@/services/API/API.service\";\n\nexport const apiProxy = createProxyMiddleware(base, {\n    target: root,\n    changeOrigin: true,\n    cookieDomainRewrite: \"udg.nomoredomains.work\",\n});\n","import { Request, Response, NextFunction } from \"express\";\nimport { HttpStatuses } from \"@/server/utils/httpStatuses\";\n\nexport const checkAuth = (\n    req: Request,\n    res: Response,\n    next: NextFunction,\n) => {\n    if (req.cookies.uuid && req.cookies.authCookie) {\n        next();\n    } else {\n        res.status(HttpStatuses.Unauthorized).send({ message: \"Пользователь не авторизован\" });\n    }\n};\n","export { apiProxy } from \"./apiProxy\";\nexport { limiterMiddleware } from \"./limiter\";\nexport { serverRenderMiddleware } from \"./serverRender\";\nexport { redirectMiddleware } from \"./redirect\";\n","/* @ts-ignore */\nimport rateLimit from \"express-rate-limit\";\n\n// NOTE: Базовая защита от DDOS\nexport const limiterMiddleware = rateLimit({\n    windowMs: 20 * 60 * 1000,\n    max: 100,\n});\n","import { Request, Response, NextFunction } from \"express\";\n\nexport const redirectMiddleware = (\n    req: Request,\n    res: Response,\n    next: NextFunction,\n) => {\n    res.redirect(\"/\");\n};\n","import { NextFunction, Request, Response } from \"express\";\nimport React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport { StaticRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport Helmet from \"react-helmet\";\nimport configureStore from \"@/store/store\";\nimport { makeHTMLPage } from \"../utils/makeHTMLPage\";\nimport App from \"../../components/App\";\nimport {\n    signInSuccess,\n    signOutSuccess,\n} from \"@/actions/auth.actions\";\nimport { HttpStatuses } from \"@/server/utils/httpStatuses\";\n\nconst store = configureStore();\n\nexport const serverRenderMiddleware = (\n    req: Request,\n    res: Response,\n    next: NextFunction,\n) => {\n    const location = req.url;\n    const host = req.get(\"Host\");\n    let protocol = \"https\";\n    if (host?.startsWith(\"localhost\")) {\n        protocol = \"http\";\n    }\n    const hostUrl = `${protocol}://${host}`;\n\n    if (req.cookies.uuid && req.cookies.authCookie) {\n        store.dispatch(signInSuccess());\n    } else {\n        store.dispatch(signOutSuccess());\n    }\n\n    const jsx = (\n        <Provider store={store}>\n            <StaticRouter location={location}>\n                <App />\n            </StaticRouter>\n        </Provider>\n    );\n    const reactHtml = renderToString(jsx);\n    const reduxState = store.getState();\n    const helmetData = Helmet.renderStatic();\n\n    // TODO: если отдавать 304 ридерект,\n    // то ломаются service-workers, надо подумать что с этим сделать\n    res.status(HttpStatuses.OK).send(\n        makeHTMLPage(hostUrl, reactHtml, helmetData, reduxState),\n    );\n\n    res.end();\n};\n","import express from \"express\";\nimport bodyParser from \"body-parser\";\nimport { checkAuth } from \"server/middlewares/auth\";\nimport { ThemesController, TopicController } from \"@/server/controllers\";\nimport { apiBase } from \"@/services/API/API.service\";\n\nconst apiRouter = express.Router();\nconst middlewares = [\n    bodyParser.json(),\n    checkAuth,\n];\n\napiRouter.get(`${apiBase}/topics`, ...middlewares, TopicController.get);\napiRouter.get(`${apiBase}/topics/:id`, ...middlewares, TopicController.getTopic);\napiRouter.post(`${apiBase}/topics`, ...middlewares, TopicController.add);\napiRouter.put(`${apiBase}/topics/:id`, ...middlewares, TopicController.update);\napiRouter.delete(`${apiBase}/topics/:id`, ...middlewares, TopicController.delete);\n\napiRouter.get(`${apiBase}/themes/:id`, ...middlewares, ThemesController.get);\napiRouter.put(`${apiBase}/themes/:id`, ...middlewares, ThemesController.update);\napiRouter.post(`${apiBase}/themes`, ...middlewares, ThemesController.add);\n\nexport { apiRouter };\n","import express from \"express\";\r\nimport { routes, Routes } from \"@/config/routes/routes\";\r\nimport {\r\n    serverRenderMiddleware,\r\n    limiterMiddleware,\r\n    redirectMiddleware,\r\n} from \"../middlewares\";\r\n\r\nconst appRouter = express.Router();\r\n\r\nconst appRoutes = (function getRoutes(routesMap: Routes): string[] {\r\n    return Object.values(routesMap).reduce<string[]>(\r\n        (routes, route) => routes.concat([route.path]),\r\n        [],\r\n    );\r\n}(routes));\r\nappRoutes.push(\"/\");\r\n\r\nappRouter.get(appRoutes, limiterMiddleware, serverRenderMiddleware);\r\n// NOTE: Если дошли до сюда, то такого роута не существует и нужно сделать redirect или 404\r\nappRouter.get(\"/*\", redirectMiddleware);\r\n\r\nexport { appRouter };\r\n","export { appRouter } from \"./appRoutes\";\nexport { apiRouter } from \"./apiRoutes\";\nexport { yandexApiRouter } from \"./yandexApiRoutes\";\n","import express from \"express\";\nimport { base } from \"@/services/API/API.service\";\nimport {\n    apiProxy,\n} from \"../middlewares\";\nimport { checkAuth } from \"@/server/middlewares/auth\";\n\nconst yandexApiRouter = express.Router();\n\nyandexApiRouter.all(`${base}/*`, apiProxy, checkAuth);\n\nexport { yandexApiRouter };\n","import \"dotenv/config\";\nimport express from \"express\";\nimport cookieParser from \"cookie-parser\";\nimport { apiRouter, appRouter, yandexApiRouter } from \"./router\";\n\nconst app = express();\n\napp.use(express.static(`${__dirname}`));\napp.use(cookieParser());\napp.use(apiRouter);\napp.use(yandexApiRouter);\napp.use(appRouter);\n\nexport { app };\n","export enum HttpStatuses {\n    OK = 200,\n    Created = 201,\n    Redirect = 302,\n    BadRequest = 400,\n    Unauthorized = 401,\n    Forbidden = 403,\n    NotFound = 404,\n    ServerError = 500,\n}\n","import { HelmetData } from \"react-helmet\";\r\n\r\n/* eslint-disable max-len */\r\nconst makeHTMLPage = (\r\n    hostUrl: string,\r\n    content: string,\r\n    helmetData: HelmetData,\r\n    reduxState = {},\r\n) => `\r\n        <!DOCTYPE html>\r\n            <html lang=\"en\">\r\n                <head>\r\n                    <meta charset=\"UTF-8\">\r\n                    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\r\n                    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n                    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n                    <link rel=\"stylesheet\" href=\"${hostUrl}/main.css\"> \r\n                    <link href=\"https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap\" rel=\"stylesheet\">\r\n                    ${helmetData.title.toString()}\r\n                    ${helmetData.meta.toString()}\r\n                </head>\r\n\r\n                <body>\r\n                    <div id=\"root\">${content}</div>\r\n                    <script>\r\n                        window.__INITIAL_STATE__ = ${JSON.stringify(reduxState)}\r\n                    </script>\r\n                    <script type=\"module\" src=\"${hostUrl}/bundle.js\"></script>\r\n                </body>\r\n        </html>\r\n    `;\r\n/* eslint-enable max-len */\r\n\r\nexport { makeHTMLPage };\r\n","export const createSafeDecorator = (errorHandler: Function) => function safe(\n    target: Object,\n    propertyKey: string,\n    descriptor: TypedPropertyDescriptor<any>,\n): TypedPropertyDescriptor<any> {\n    // Запоминаем исходную функцию\n    const originalMethod = descriptor.value;\n    // Подменяем ее на нашу обертку\n    descriptor.value = function SafeWrapper() {\n        // Сохраняем аргументы (req и res)\n        // eslint-disable-next-line prefer-rest-params\n        const args = arguments;\n        // Заворачиваем в асинхронную обертку, чтобы работал try catch\n        const wrapper = async () => {\n            try {\n                // Вызываем исходный метод\n                await originalMethod.apply(this, args);\n            } catch (err) {\n                // Передаем в handler ошибку и Response\n                errorHandler.call(this, err, args[1]);\n            }\n        };\n        wrapper();\n    };\n    // Обновляем дескриптор\n    return descriptor;\n};\n","export enum Method {\n    GET = \"GET\",\n    POST = \"POST\",\n    PUT = \"PUT\",\n    PATCH = \"PATCH\",\n    DELETE = \"DELETE\",\n}\n\nexport const root = \"https://ya-praktikum.tech\";\nexport const base = \"/api/v2\";\nexport const apiBase = \"/api/local\";\n\nclass APIService {\n    private readonly base: Request | string;\n\n    constructor(isLocalBase?: boolean) {\n        this.base = isLocalBase ? apiBase : base;\n    }\n\n    async request(method: Method, url: string, data = {}) {\n        const response = await fetch(`${this.base}/${url}`, {\n            method,\n            mode: \"cors\", // no-cors, *cors, same-origin\n            cache: \"no-cache\",\n            credentials: \"include\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Access-Control-Allow-Credentials\": \"true\",\n            },\n            ...(method !== Method.GET && { body: JSON.stringify(data) }),\n        });\n        return response ?? null;\n    }\n}\n\nexport default new APIService();\n\nexport const LocalAPIService = new APIService(true);\n","export { default } from \"./API.service\";\nexport * from \"./API.service\";\n","import {\n    createStore, compose, combineReducers, applyMiddleware,\n} from \"redux\";\nimport thunk from \"redux-thunk\";\n\nimport { profileReducer, ProfileState } from \"@/reducers/profile.reducer\";\nimport { authReducer, AuthState } from \"@/reducers/auth.reducer\";\nimport { themeReducer } from \"@/reducers/theme.reducer\";\nimport { Theme } from \"@/api/Theme/Theme.api\";\nimport { topicReducer, TopicState } from \"@/reducers/topic.reducer\";\nimport {\n    leaderBoardReducer,\n    LeaderBoardState,\n} from \"@/reducers/leaderboard.reducer\";\n\nimport { isServer } from \"@/helpers/environment\";\nimport { ForumState, forumReducer } from \"@/reducers/forum.reducer\";\n\nexport interface RootState {\n    auth: AuthState;\n    profile: ProfileState;\n    leaderBoard: LeaderBoardState;\n    theme: Theme;\n    forum: ForumState;\n    topic: TopicState;\n}\n\nconst rootReducer = combineReducers({\n    auth: authReducer,\n    profile: profileReducer,\n    leaderBoard: leaderBoardReducer,\n    theme: themeReducer,\n    forum: forumReducer,\n    topic: topicReducer,\n});\n\nconst initialState = !isServer ? window.__INITIAL_STATE__ : {};\n\nconst configureStore = () => createStore(\n    rootReducer,\n    initialState,\n    compose(\n        applyMiddleware(thunk),\n        !isServer && window.__REDUX_DEVTOOLS_EXTENSION__\n            ? window.__REDUX_DEVTOOLS_EXTENSION__()\n            : (f: () => void) => f,\n    ),\n);\n\nexport default configureStore;\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"App\":\"d6rBLli3BagIoSgKy2ws\",\"title\":\"UAUK2yU1qb5KDEJM4sbz\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"kJXI1z3_FtxH2idolQUx\"};","// extracted by mini-css-extract-plugin\nexport default {\"buttonContainer\":\"ultcbUs8Qt8tCIj5tXOH\",\"gameModal\":\"xIdsnPhxwe4Zq0BRMNiF\",\"title\":\"DuSwT0NBq2F0kQETkcW_\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"mTFHSVjnSUFdoSnWwGhe\",\"logo\":\"AQj0qjGusBKgpXIQViBm\",\"logoMainSymbol\":\"aNbRr60ArYUg5LfoQFU1\",\"buttonContainer\":\"zVYRLMeG9dFBljEerzGQ\",\"routesContainer\":\"XUShHu6oinx4l6jUlqoK\",\"signUp\":\"HEQhGHtynWtNqUFywT1T\",\"signIn\":\"AprMwPhjHqR_T2NfcvnM\"};","// extracted by mini-css-extract-plugin\nexport default {\"ulContainer\":\"FGIBGaQePsS7MPrLD6AI\",\"ul\":\"VhefOyE6KqL2INmTvax_\",\"active\":\"eb4qUgSDxGoiL722sZWU\",\"inactive\":\"FeWI55JQiPAKhK8Rt5kQ\"};","// extracted by mini-css-extract-plugin\nexport default {\"init\":\"NK4oWEno3OTBZGk14ybv\",\"loading\":\"E504S1U9EEZmM5IH4xUx\",\"spinner\":\"kySekU_9UevbfgBcgQyY\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"ZysAcaq2wqNhjy8Izjfx\",\"info\":\"OdAUtezfXOkkacFZbGNV\",\"notFound\":\"_oqEYBV8I5tzU_K4b01Q\",\"container\":\"hvuBUQ5BuCflJ3z7EgLb\",\"errorContainer\":\"a9XtgsE_WJB8ErZLTHBl\",\"back\":\"H7clTc6gQPwiqxfv0oHg\"};","// extracted by mini-css-extract-plugin\nexport default {\"tableContainer\":\"h4pJAZ6ZYAtiycUJJW3g\",\"title\":\"S_BnvX9K7zmCBzCnTxlY\",\"counter\":\"Vu0ebY7tJswaf1LhSZfy\",\"buttonContainer\":\"Z90jr4hKQ5ZF2P5MiEzw\"};","// extracted by mini-css-extract-plugin\nexport default {\"game\":\"KQGV7dUqbgjYs1ZwpxXx\"};","// extracted by mini-css-extract-plugin\nexport default {\"buttonContainer\":\"VJBHhg7XFDtxeSNUAZDw\",\"title\":\"eFlcKTx78Wlv2EtRSPio\"};","// extracted by mini-css-extract-plugin\nexport default {\"leaderBoardContainer\":\"VNtOnQ9u1eqRD7cD6rL3\",\"leaderBoardTable\":\"L3SZByFwQnpU08n5SPsJ\",\"nameContainer\":\"HcjLexU_ULLT64Fy5m_N\",\"nameActive\":\"A9tTBCkPNUB1VMe4nsR2\",\"nameBanned\":\"SyFk3md3WBR2rgiLvKh5\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"shyebdQ7V79WnyJEEzeC\",\"buttonRight\":\"bCl2fYvnr1euix4tqdmM\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"pAZsGDSIwHLk6FyMvuHq\",\"infoContainer\":\"SCceGicoKjZbSFCUBNKH\",\"title\":\"jmDUZnAIerxVoLf7HHyx\",\"titleMain\":\"DSp6h4AcHxJnmSxh5kSL\",\"info\":\"oautDfGR7aAKuM_pwWJO\",\"gameHref\":\"cXj9rBw90d6eB9h24ZiA\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"wN3ZAMOwZkdEOLnck1VB\",\"info\":\"WgBzMCi6qYIjWHRWiYJo\",\"notFound\":\"Au51wDy14LIeKsXdlStJ\",\"container\":\"aNybNIFFW5NPE8XGbE8a\",\"errorContainer\":\"pRiz7GMS75rLbl0hQ3MK\",\"back\":\"F5BSP_DuF2JWJpELV9l9\"};","// extracted by mini-css-extract-plugin\nexport default {\"formContainer\":\"NeTQGkuyOTT60EAvRHMH\",\"formInnerContainer\":\"nNNqd4uYzsCMlqnKPxLF\",\"imageEmpty\":\"qGDfz5gGyncaGneQYXco\"};","// extracted by mini-css-extract-plugin\nexport default {\"cancelButton\":\"XcpXT3fVczqQykjGsWKX\"};","// extracted by mini-css-extract-plugin\nexport default {\"formContainer\":\"C9kTxACIRCoIHh4xS7yE\"};","// extracted by mini-css-extract-plugin\nexport default {\"link\":\"yHwKfZYQBg7DNphUOjwh\",\"icon\":\"tsI5LJ1GqWtO8I4zgmyX\"};","// extracted by mini-css-extract-plugin\nexport default {\"formContainer\":\"_4r4fQwgzOuwIOzlNjdva\"};","// extracted by mini-css-extract-plugin\nexport default {\"comment\":\"TspRTE2G39H6tAirzKZs\",\"ant-comment-content-author-name\":\"l3_WNbYCgL44Ir5PsAEw\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"bTNmpK1ju_yi_nGhJ8V7\",\"buttonContainer\":\"Tn1PaCwUlNzlPDXni40j\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"VRShYKvDw5s7uMOjoJ0w\",\"comments\":\"rEOOn71v_anhyYGzSuIJ\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"tVA28iwOv6hGtnPiEqJV\",\"title\":\"bsDM8hjmhcRnrixWOtoO\"};","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"antd\");","module.exports = require(\"antd/lib/form/Form\");","module.exports = require(\"body-parser\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"dotenv/config\");","module.exports = require(\"express\");","module.exports = require(\"express-rate-limit\");","module.exports = require(\"http-proxy-middleware\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-helmet\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"redux-thunk\");","module.exports = require(\"sequelize\");","module.exports = require(\"sequelize-typescript\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { app } from \"./server\";\r\nimport { createSequelize } from \"./db/init\";\r\n\r\nconst port = process.env.PORT || 3000;\r\n\r\nconst DB = createSequelize();\r\nDB?.authenticate()\r\n    .then(() => console.log(\"db connected\"))\r\n    .catch((err) => console.error(\"db error: \", err));\r\n\r\napp.listen(port, () => {\r\n    console.log(`Server started on port ${port}`);\r\n});\r\n"],"names":["api","routes","setUserIdCookie","setSigned","setSignedOAuth","LOADING","SIGN_IN","SIGN_OUT","SIGN_IN_OAUTH","AuthStages","loading","isLoading","type","payload","signInSuccess","signInOAuthSuccess","signOutSuccess","signIn","data","history","dispatch","_state","response","push","main","path","error","signInOAuth","signOut","logOut","FORUM_LOAD","FORUM_SET_LOADING","forumApi","getTopics","setLoading","loadForumTopics","LOAD","SET_LOADING","LeaderboardApi","getLeaderBoard","loadLeaderBoard","cursor","profileApi","GET_PROFILE","PROFILE_LOADING","SET_PASSWORD","ProfileStages","profileFetchSuccess","profileUploadSuccess","passwordUpdateSuccess","getProfile","getUserInfo","id","setProfile","setPassword","getUserIdCookie","SET_THEME","LIGHT_THEME","DARK_THEME","updateDOMTheme","theme","document","body","classList","remove","add","themeRequest","getTheme","themeData","updateTheme","createTheme","userId","user_id","TOPIC_LOAD","TOPIC_SET_LOADING","getTopic","loadTopic","createTopic","forum","updateTopic","SET_PROFILE","notification","APIService","Method","root","AuthApi","isSuccessfulRequest","undefined","message","errorMessage","status","success","signUp","request","POST","result","json","GET","default","LocalAPIService","ForumApi","PUT","RECORDS_PER_PAGE","TEAM_SCORE","LeaderBoardApi","ratingFieldName","limit","ok","createLeaderBoardRecord","teamName","apiRoutes","serviceId","redirectURI","oauth","OAuthApi","isSignIn","getServiceId","service_id","signUpWithYandex","code","redirect_uri","ProfileDataType","ProfileApi","dataType","Common","requestData","display_name","Password","setAvatar","ThemeApi","React","Route","Redirect","useSelector","checkAccess","AccessRoute","component","props","Component","isSignedInCookie","isSignedIn","state","auth","isSignedInOAuth","isSignedInAll","Error","useState","useCallback","useEffect","Typography","Button","styles","isServer","Title","ModalChild","onClose","title","sw","navigator","serviceWorker","useServiceWorkers","isActive","setActive","startServiceWorker","window","addEventListener","register","then","registration","console","log","scope","catch","once","useDispatch","ErrorBoundary","GameModal","Router","App","profile","CustomButton","Container","children","container","constructor","errorInfo","componentDidCatch","setState","render","Modal","CustomModal","gameModal","buttonContainer","useHistory","useHeader","onSignOut","event","preventDefault","renderSignOutButton","Link","appRoutes","NavBar","Text","Header","currentPath","logo","logoSymbols","logoMainSymbol","routesContainer","Input","CustomInput","Switch","useMountEffect","useTheme","setRoutes","changeTheme","allRoutes","label","leaderboard","filter","route","ulContainer","ul","map","active","inactive","Spin","LoadingOutlined","PageLoader","isSpinning","antIcon","fontSize","spinner","init","Helmet","cutTags","text","replace","prepareData","description","image","substr","PageMeta","Boolean","LockOutlined","CustomPassword","Routes","useLocation","Login","SignUpView","Main","Profile","Forum","About","Leaderboard","Game","Offline","Topic","TopicEdit","AccessRedirectRoute","search","URLSearchParams","get","topic","topicEdit","about","game","CustomSwitch","providerURLRoot","udcClientId","findRoute","Object","values","find","GameAnimation","Vector2D","AttackAnimation","update","weapon","object","shouldFlip","spriteConfig","geom","geometry","x","position","y","width","height","weaponX","weaponY","currentRotation","maxRotation","maxAnimationStep","weaponGeom","center","rotateAround","attackCount","visible","STEP","MoveAnimation","speed","moveState","isMovingLeft","isMovingRight","isMovingTop","isMovingDown","delta","isMoving","reduce","res","val","SpriteAnimation","sprites","timeAfterLastSpriteUpdate","moveAnimation","shouldUpdateSprite","isCurrentSpriteIdle","sprite","run_0","getNextRunSprite","idle_0","getNextIdleSprite","idle_1","idle_2","idle_3","run_1","run_2","run_3","Camera","bindedObject","size","bindObject","EventBus","_listeners","Map","on","callback","events","set","off","listener","emit","args","forEach","GeometryTypes","getGeomId","geometryId","Geometry","name","geomType","boundingBox","boundingCircle","calculateBoundingBox","calculateBoundingCircle","Box2","RectangleGeometry","Rectangle","rectangle","rotation","rotationCenter","angle","copy","p1","p2","p3","p4","minX","Math","min","maxX","max","minY","maxY","newMin","newMax","Color","getObject2DId","objectId","Object2D","frustumCulled","userData","color","move","vect","scale","updateState","isImplementingCollision","obj1","hasOwnProperty","Physics","hasBox2DCollided","obj2","box1","box2","getNewPositionAfterWallCollision","obstacle","prevPosition","objGeom","obstGeomBB","isCollisionCause","Renderer","canvas","context","getContext","scene","camera","c","background","clearRect","fillStyle","r","g","b","a","fillRect","obj","objects","_drawRectangle","prerender","objectWithPhysics","i","length","j","collided","onCollide","K","_recalculateWorldValuesToCanvasValues","translate","rotate","sp","drawImage","sx","sy","sWidth","sHeight","setTransform","Scene","Array","isArray","addObjectWithPhysics","vector","cos","sin","Player","Weapon","getRandomDirection","Wall","WorldManager","ENEMY_MOVE_DIRECTIONS","left","chance","right","down","top","Enemy","health","_health","value","onDeath","maxHealth","_createEnemySprites","moveStateUpdateCondition","spriteAnimation","enemySprites","prevRecievedDamage","damage","enemiesCount","gameWinCallback","currentMoveStateCounter","maxMoveStateUpdate","direction","Ground","EventTypes","WorldEvents","playerUI","updateHealth","_createPlayerSprites","_updateWeaponState","playerSprites","attackAnimation","gameOverCallback","ArrowLeftDown","ArrowBottomDown","ArrowTopDown","ArrowRightDown","ArrowLeftUp","ArrowTopUp","ArrowBottomUp","ArrowRightUp","SpaceDown","HEALTH_SPITE","HALF_HEALTH_SPITE","EMPTY_HEALTH_SPITE","Health","isHalf","isEmpty","tileSetImage","LEVEL_SIZE","PlayerUI","style","innerHeight","innerWidth","renderer","healthObjects","healthGeom","healthObject","updateScore","TILE_SIZE","KeyboardEvents","TOGGLE_MENU_BUTTON","TOGGLE_FULLSCREEN_BUTTON","eventBus","_keyDownListener","e","key","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Space","_keyUpListener","SpaceUp","_resizeListener","Resize","unsubscribe","removeEventListener","TileTypes","TILE_TYPES","UI","directions","random","fillMatrix","level","matrix","k","f","generateRandomLevel","minRight","maxRight","minDown","maxDown","fill","pathWindow","tileHorizontal","round","tileVertical","directon","getFirstGroundTileOnLevel","number","getLastGroundTileOnLevel","TileSetImage","Image","src","composeLevel","_createWallsAndGroundFromLevel","player","sword","_createPlayer","_createEnemies","composeUIScene","getTilePositionFromCoordinates","coordinates","floor","groundGeom","ground","wallGeom","wall","playerGeom","playerPosition","swordGeometry","enemy","_createEnemy","enemy2","enemy3","enemyGeom","enemyPosition","World","uiCanvas","_onResize","bind","startAnimataion","dt","last","performance","now","animationNumber","requestAnimationFrame","stopAnimation","cancelAnimationFrame","destroy","getCookie","matches","cookie","match","RegExp","decodeURIComponent","checkOAuthSigned","toString","createElement","effectCallback","useReduxSelector","useUnmountEffect","ErrorInfo","errorContainer","info","back","notFound","useRef","shallowEqual","useForum","table","Table","columns","dataIndex","item","counter","comments_count","handleRowClick","record","onClick","getRowKey","onCreate","tableContainer","leaderBoardTable","spinning","togglePointerLock","documentElement","requestPointerLock","togglePointerUnlock","exitPointerLock","exitFullScreen","fullscreenElement","exitFullscreen","openFullScreen","requestFullscreen","toggleFullScreen","useGame","isGameOver","setGameOver","isGameWin","setGameWin","isPaused","setPause","world","canvasRef","uiCanvasRef","user","createRecord","login","callMenu","callGameOver","callGameWin","setUpPauseButton","onStart","current","onResume","onUnmount","Menu","useLeaderBoard","canMoveLeft","setCanMoveLeft","canMoveRight","setCanMoveRight","setCursor","tableScroll","setTableScroll","leaderBoard","tableHeight","clientHeight","header","getElementsByClassName","headerHeight","onMoveRight","newCursor","onMoveLeft","Pagination","score","nameContainer","nameActive","nameBanned","onChange","pagination","filters","sorter","extra","LeaderBoard","leaderBoardContainer","LeftOutlined","RightOutlined","buttonRight","infoContainer","titleMain","useForm","initialFields","disabled","required","placeholder","passwordFields","useProfileForm","isEdit","setIsEdit","isOAuthSigned","setIsOAuthSigned","form","setFieldsValue","onFinish","oldPassword","newPassword","rest","onFinishFailed","fields","Form","AntdImage","FormFields","FormControls","ProfileDefault","formContainer","formInnerContainer","avatar","imageEmpty","EditOutlined","handleCancel","resetFields","handleEdit","confirm","content","cancelText","okText","onOk","getFieldsValue","onCancel","cancelButton","renderFieldSet","index","Item","SignInFieldNames","useSignInForm","UserOutlined","YandexSignIn","SignIn","LoginOutlined","providerURL","clientId","location","link","icon","SignUpFieldNames","useSignUp","fieldSet","SecondName","rules","FirstName","Email","Phone","SignUp","Comment","CommentContainer","author","comment","TextArea","CommentInput","setMessage","handleInput","target","handleSubmit","useTopic","pathname","split","slice","Number","comments","TopicFieldNames","useTopicForm","hasId","isNaN","submitLabel","titleLabel","AntInput","Body","initialState","stage","INIT","authReducer","action","DONE","FORUM_INIT_STATE","forumReducer","LEADERBOARD_INIT_STATE","leaderBoardReducer","second_name","first_name","email","phone","password","profileReducer","themeReducer","TOPIC_INIT_STATE","created_at","topicReducer","ValidationError","addDBTopic","getDBTopics","updateDBTopic","removeDBTopic","getDBTopic","createSafeDecorator","HttpStatuses","topicErrorHandler","err","BadRequest","send","ServerError","Safe","TopicController","req","topics","OK","params","Created","resultArray","delete","sendStatus","ThemesController","updateDBTheme","getDBTheme","addDBTheme","themeErrorHandler","ThemeController","newTheme","updatedTheme","currentTheme","findAll","findOne","where","create","AllowNull","AutoIncrement","Column","DataType","Length","Model","PrimaryKey","MAX_LENGTH","timestamps","createdAt","updatedAt","tableName","INTEGER","STRING","Sequelize","Theme","createSequelize","sequelizeOptions","host","process","env","DB_HOST","port","DB_PORT","username","DB_USERNAME","DB_PASSWORD","database","DB_NAME","dialect","db","addModels","createProxyMiddleware","base","apiProxy","changeOrigin","cookieDomainRewrite","checkAuth","next","cookies","uuid","authCookie","Unauthorized","limiterMiddleware","serverRenderMiddleware","redirectMiddleware","rateLimit","windowMs","redirect","renderToString","StaticRouter","Provider","configureStore","makeHTMLPage","store","url","protocol","startsWith","hostUrl","jsx","reactHtml","reduxState","getState","helmetData","renderStatic","end","express","bodyParser","apiBase","apiRouter","middlewares","post","put","appRouter","getRoutes","routesMap","concat","yandexApiRouter","all","cookieParser","app","use","static","__dirname","meta","JSON","stringify","errorHandler","safe","propertyKey","descriptor","originalMethod","SafeWrapper","arguments","wrapper","apply","call","isLocalBase","method","fetch","mode","cache","credentials","headers","createStore","compose","combineReducers","applyMiddleware","thunk","rootReducer","__INITIAL_STATE__","__REDUX_DEVTOOLS_EXTENSION__","PORT","DB","authenticate","listen"],"sourceRoot":""}